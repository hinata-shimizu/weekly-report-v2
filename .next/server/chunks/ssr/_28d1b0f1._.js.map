{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-server-dom-turbopack-client.ts","../../../../src/app/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactServerDOMTurbopackClient\n","\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\nimport Link from \"next/link\";\n\ntype TaskStatus = \"not_decided\" | \"todo\" | \"doing\" | \"done\";\n\ntype Task = {\n  id: string;\n  title: string;\n  status: TaskStatus;\n};\n\nconst STATUS_LABEL: Record<TaskStatus, string> = {\n  not_decided: \"未決定\",\n  todo: \"未着手\",\n  doing: \"進行中\",\n  done: \"完了\",\n};\n\nconst STATUS_ORDER: TaskStatus[] = [\"not_decided\", \"todo\", \"doing\", \"done\"];\n\nexport default function ReportDetailPage({\n  params,\n}: {\n  params: { id: string };\n}) {\n  // 週報IDごとに別々のキー\n  const storageKey = `weekly-report-tasks-${String(params.id)}`;\n\n  const [newTitle, setNewTitle] = useState(\"\");\n  const [tasks, setTasks] = useState<Task[]>([]);\n  const [loaded, setLoaded] = useState(false);\n  const [savedMessage, setSavedMessage] = useState(\"\");\n\n  // ★ 初回＋「IDが変わったとき」に localStorage から読み込む\n  useEffect(() => {\n    if (typeof window === \"undefined\") return;\n\n    const raw = window.localStorage.getItem(storageKey);\n\n    if (!raw) {\n      // このID用のデータがまだ無いときは、前のIDのタスクを引き継がずリセットする\n      setTasks([]);\n      setLoaded(true);\n      return;\n    }\n\n    try {\n      const parsed = JSON.parse(raw) as Task[];\n      if (Array.isArray(parsed)) {\n        setTasks(parsed);\n      } else {\n        setTasks([]);\n      }\n    } catch (e) {\n      console.error(\"failed to parse tasks from localStorage\", e);\n      setTasks([]);\n    }\n\n    setLoaded(true);\n  }, [storageKey]);\n\n  // tasks が変わったら自動保存\n  useEffect(() => {\n    if (!loaded) return;\n    if (typeof window === \"undefined\") return;\n\n    window.localStorage.setItem(storageKey, JSON.stringify(tasks));\n\n    if (tasks.length === 0) {\n      setSavedMessage(\"\");\n      return;\n    }\n    setSavedMessage(\"自動保存しました\");\n    const timer = setTimeout(() => setSavedMessage(\"\"), 1500);\n    return () => clearTimeout(timer);\n  }, [tasks, loaded, storageKey]);\n\n  const handleAddTask = () => {\n    const trimmed = newTitle.trim();\n    if (!trimmed) return;\n\n    const newTask: Task = {\n      id: crypto.randomUUID(),\n      title: trimmed,\n      status: \"todo\", // 初期ステータス：未着手\n    };\n\n    setTasks((prev) => [newTask, ...prev]);\n    setNewTitle(\"\");\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === \"Enter\") {\n      e.preventDefault();\n      handleAddTask();\n    }\n  };\n\n  const handleChangeStatus = (id: string, status: TaskStatus) => {\n    setTasks((prev) =>\n      prev.map((task) =>\n        task.id === id\n          ? {\n              ...task,\n              status,\n            }\n          : task\n      )\n    );\n  };\n\n  const handleDelete = (id: string) => {\n    setTasks((prev) => prev.filter((task) => task.id !== id));\n  };\n\n  const countsByStatus: Record<TaskStatus, number> = {\n    not_decided: tasks.filter((t) => t.status === \"not_decided\").length,\n    todo: tasks.filter((t) => t.status === \"todo\").length,\n    doing: tasks.filter((t) => t.status === \"doing\").length,\n    done: tasks.filter((t) => t.status === \"done\").length,\n  };\n\n  return (\n    <main className=\"max-w-5xl mx-auto py-6 px-3 md:px-4 space-y-6\">\n      {/* ヘッダー */}\n      <header className=\"flex flex-col gap-3 md:flex-row md:items-center md:justify-between\">\n        <div className=\"space-y-1.5\">\n          <Link\n            href=\"/reports\"\n            className=\"inline-flex items-center text-[11px] md:text-xs text-slate-600 hover:text-slate-900\"\n          >\n            ← 週報一覧に戻る\n          </Link>\n          <h1 className=\"text-xl md:text-2xl font-bold\">\n            週報ID: {params.id} のタスク管理\n          </h1>\n          <p className=\"text-xs md:text-sm text-slate-600 max-w-2xl\">\n            今週やることを箇条書きで洗い出して、ステータスを切り替えながら進捗を管理します。\n            タスクは「週報IDごとに」ブラウザへ自動保存されます。\n          </p>\n          <p className=\"text-[10px] text-slate-400\">\n            storageKey: <code>{storageKey}</code>\n          </p>\n          {!loaded && (\n            <p className=\"text-[11px] text-slate-500\">読み込み中...</p>\n          )}\n        </div>\n\n        <div className=\"flex flex-col items-end gap-1.5\">\n          <div className=\"flex flex-wrap gap-1.5 text-[11px] md:text-xs\">\n            <span className=\"inline-flex items-center rounded-full bg-slate-100 px-2.5 py-1\">\n              合計:{\" \"}\n              <span className=\"ml-1 font-semibold text-slate-800\">\n                {tasks.length}\n              </span>\n            </span>\n            <span className=\"inline-flex items-center rounded-full bg-emerald-50 px-2.5 py-1\">\n              完了:{\" \"}\n              <span className=\"ml-1 font-semibold text-emerald-700\">\n                {countsByStatus.done}\n              </span>\n            </span>\n            <span className=\"inline-flex items-center rounded-full bg-blue-50 px-2.5 py-1\">\n              進行中:{\" \"}\n              <span className=\"ml-1 font-semibold text-blue-700\">\n                {countsByStatus.doing}\n              </span>\n            </span>\n            <span className=\"inline-flex items-center rounded-full bg-amber-50 px-2.5 py-1\">\n              未着手:{\" \"}\n              <span className=\"ml-1 font-semibold text-amber-700\">\n                {countsByStatus.todo}\n              </span>\n            </span>\n          </div>\n          {savedMessage && (\n            <p className=\"text-[11px] text-emerald-600\">{savedMessage}</p>\n          )}\n        </div>\n      </header>\n\n      {/* タスク追加 */}\n      <section className=\"rounded-xl border bg-white/80 shadow-sm p-4 md:p-5 space-y-3\">\n        <h2 className=\"text-base md:text-lg font-semibold\">タスクを追加</h2>\n        <div className=\"flex flex-col md:flex-row gap-2.5\">\n          <input\n            type=\"text\"\n            className=\"flex-1 rounded-lg border border-slate-300 px-3 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-slate-400 focus:border-slate-400\"\n            placeholder=\"例）画面AのUI調整／バグ#123の原因調査／仕様書レビュー など\"\n            value={newTitle}\n            onChange={(e) => setNewTitle(e.target.value)}\n            onKeyDown={handleKeyDown}\n          />\n          <button\n            type=\"button\"\n            onClick={handleAddTask}\n            className=\"w-full md:w-auto inline-flex justify-center items-center rounded-lg px-4 py-2.5 text-sm font-medium border border-slate-700 bg-slate-800 text-white hover:bg-slate-700 transition\"\n          >\n            ＋ 追加\n          </button>\n        </div>\n      </section>\n\n      {/* タスク一覧 */}\n      <section className=\"space-y-3\">\n        <div className=\"flex items-center justify-between gap-2\">\n          <h2 className=\"text-base md:text-lg font-semibold\">タスク一覧</h2>\n        </div>\n\n        {tasks.length === 0 ? (\n          <div className=\"rounded-xl border border-dashed border-slate-300 bg-slate-50/60 p-5 text-center space-y-1.5\">\n            <p className=\"text-sm text-slate-600\">まだタスクがありません。</p>\n            <p className=\"text-[11px] md:text-xs text-slate-500\">\n              上の入力欄から「今週やること」を1行ずつ追加してみてください。\n            </p>\n          </div>\n        ) : (\n          <div className=\"rounded-xl border bg-white/90 shadow-sm max-h-[60vh] overflow-y-auto\">\n            <ul className=\"divide-y divide-slate-100\">\n              {tasks.map((task) => (\n                <li\n                  key={task.id}\n                  className=\"px-3 md:px-4 py-2 md:py-2.5 flex items-start gap-2 md:gap-3\"\n                >\n                  {/* 左：タスク名（少し大きめ） */}\n                  <div className=\"flex-1 min-w-0\">\n                    <p className=\"text-sm md:text-base text-slate-900 break-words\">\n                      {task.title}\n                    </p>\n                  </div>\n\n                  {/* 右：ステータスボタン群＋削除 */}\n                  <div className=\"flex flex-col items-end gap-1 min-w-[150px]\">\n                    <div className=\"flex flex-wrap justify-end gap-1\">\n                      {STATUS_ORDER.map((status) => {\n                        const active = task.status === status;\n                        const base =\n                          \"px-2 py-[2px] rounded-full text-[11px] border transition focus:outline-none whitespace-nowrap\";\n                        const activeStyleByStatus: Record<TaskStatus, string> = {\n                          not_decided:\n                            \"bg-slate-800 border-slate-800 text-white\",\n                          todo: \"bg-amber-500 border-amber-500 text-white\",\n                          doing: \"bg-blue-600 border-blue-600 text-white\",\n                          done: \"bg-emerald-600 border-emerald-600 text-white\",\n                        };\n                        const inactiveStyleByStatus: Record<\n                          TaskStatus,\n                          string\n                        > = {\n                          not_decided:\n                            \"bg-slate-50 border-slate-300 text-slate-700 hover:bg-slate-100\",\n                          todo: \"bg-amber-50 border-amber-300 text-amber-700 hover:bg-amber-100\",\n                          doing: \"bg-blue-50 border-blue-300 text-blue-700 hover:bg-blue-100\",\n                          done: \"bg-emerald-50 border-emerald-300 text-emerald-700 hover:bg-emerald-100\",\n                        };\n\n                        return (\n                          <button\n                            key={status}\n                            type=\"button\"\n                            onClick={() =>\n                              handleChangeStatus(task.id, status)\n                            }\n                            className={\n                              base +\n                              \" \" +\n                              (active\n                                ? activeStyleByStatus[status]\n                                : inactiveStyleByStatus[status])\n                            }\n                          >\n                            {STATUS_LABEL[status]}\n                          </button>\n                        );\n                      })}\n                    </div>\n                    <button\n                      type=\"button\"\n                      onClick={() => handleDelete(task.id)}\n                      className=\"text-[11px] text-red-500 hover:text-red-600 hover:underline\"\n                    >\n                      削除\n                    </button>\n                  </div>\n                </li>\n              ))}\n            </ul>\n          </div>\n        )}\n      </section>\n    </main>\n  );\n}\n"],"names":["module","exports","require","vendored","ReactServerDOMTurbopackClient"],"mappings":"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","ignoreList":[0]}