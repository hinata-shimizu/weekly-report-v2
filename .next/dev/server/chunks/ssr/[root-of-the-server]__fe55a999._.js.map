{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hinat/projects/weekly-report-app/src/lib/reportUtils.ts"],"sourcesContent":["import { type ClassValue, clsx } from \"clsx\";\r\nimport { twMerge } from \"tailwind-merge\";\r\n\r\n// --- Types ---\r\n\r\nexport type Report = {\r\n    id: string;\r\n    title: string; // „ÄåM/DÔΩûM/D„ÅÆÈÄ±Â†±„Äç\r\n    description: string; // Ë™¨Êòé\r\n    createdAt: string; // ISOÊñáÂ≠óÂàó\r\n    weekStart: string; // „Åù„ÅÆÈÄ±„ÅÆÈñãÂßãÊó•ÔºàISOÔºâ\r\n    weekEnd: string; // „Åù„ÅÆÈÄ±„ÅÆÁµÇ‰∫ÜÊó•ÔºàISOÔºâ\r\n};\r\n\r\nexport type TaskStatus = \"not_decided\" | \"todo\" | \"doing\" | \"done\";\r\n\r\nexport type TaskPriority = \"p0\" | \"p1\" | \"p2\";\r\n\r\nexport type Task = {\r\n    id: string;\r\n    title: string;\r\n    status: TaskStatus;\r\n    tag: string | null;\r\n\r\n    priority: TaskPriority; // existing code assumed \"todo\" priority but now we have explicit priority\r\n    isToday: boolean;\r\n\r\n    estimatedMinutes: number | null;\r\n    actualSeconds: number;\r\n\r\n    isRunning: boolean;\r\n    startedAt: number | null;\r\n};\r\n\r\n// ... existing types ... \r\n\r\nexport const PRIORITY_ORDER: TaskPriority[] = [\"p0\", \"p1\", \"p2\"];\r\nexport const STATUS_ORDER: TaskStatus[] = [\"not_decided\", \"todo\", \"doing\", \"done\"];\r\n\r\nexport const PRIORITY_LABEL: Record<TaskPriority, string> = {\r\n    p0: \"P0\",\r\n    p1: \"P1\",\r\n    p2: \"P2\",\r\n};\r\n\r\nexport const STATUS_LABEL: Record<TaskStatus, string> = {\r\n    not_decided: \"Êú™Ê±∫ÂÆö\",\r\n    todo: \"Êú™ÁùÄÊâã\",\r\n    doing: \"ÈÄ≤Ë°å‰∏≠\",\r\n    done: \"ÂÆå‰∫Ü\",\r\n};\r\n\r\n// ... existing constants ...\r\n\r\n// --- Utility Functions ---\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n    return twMerge(clsx(inputs));\r\n}\r\n\r\n// ... existing functions (getWeekRange, formatWeekRangeTitle, formatDate, sortReportsDesc, safeTagLabel, formatHMFromSecondsSimple, clamp) ...\r\n\r\n/** ÂÆå‰∫ÜÊôÇ„ÅÆnormalizeÁî®ÔºàË©≥Á¥∞„Éö„Éº„Ç∏„Åß‰Ωø„ÅÜÔºâ */\r\nexport function normalizeTask(t: any): Task {\r\n    return {\r\n        id: t?.id ?? crypto.randomUUID(),\r\n        title: typeof t?.title === \"string\" ? t.title : \"\",\r\n        status: (STATUS_ORDER as string[]).includes(t?.status)\r\n            ? (t.status as TaskStatus)\r\n            : \"todo\",\r\n        tag: typeof t?.tag === \"string\" ? t.tag : null,\r\n\r\n        priority: (PRIORITY_ORDER as string[]).includes(t?.priority)\r\n            ? (t.priority as TaskPriority)\r\n            : \"p1\",\r\n        isToday: typeof t?.isToday === \"boolean\" ? t.isToday : false,\r\n\r\n        estimatedMinutes: typeof t?.estimatedMinutes === \"number\" ? t.estimatedMinutes : null,\r\n        actualSeconds: typeof t?.actualSeconds === \"number\" ? t.actualSeconds : 0,\r\n\r\n        isRunning: false, // „É≠„Éº„ÉâÊôÇ„ÅØÂÅúÊ≠¢\r\n        startedAt: null,\r\n    };\r\n}\r\n\r\nexport function getRunningExtraSeconds(task: Task, now: number) {\r\n    if (!task.isRunning || !task.startedAt) return 0;\r\n    return Math.max(0, Math.floor((now - task.startedAt) / 1000));\r\n}\r\n\r\nexport function getTotalActualSeconds(task: Task, now: number) {\r\n    return task.actualSeconds + getRunningExtraSeconds(task, now);\r\n}\r\n\r\nexport function formatJPDateTime(ms: number) {\r\n    const d = new Date(ms);\r\n    const y = d.getFullYear();\r\n    const m = String(d.getMonth() + 1).padStart(2, \"0\");\r\n    const day = String(d.getDate()).padStart(2, \"0\");\r\n    const hh = String(d.getHours()).padStart(2, \"0\");\r\n    const mm = String(d.getMinutes()).padStart(2, \"0\");\r\n    return `${y}/${m}/${day} ${hh}:${mm}`;\r\n}\r\n\r\nexport function pickTopBySeconds(tasks: Task[], now: number, n: number) {\r\n    const arr = tasks\r\n        .map((t) => ({ t, sec: getTotalActualSeconds(t, now) }))\r\n        .filter((x) => x.sec > 0)\r\n        .sort((a, b) => b.sec - a.sec)\r\n        .slice(0, n);\r\n    return arr;\r\n}\r\n\r\nexport function pickTopTagsBySeconds(tasks: Task[], now: number, n: number) {\r\n    const map = new Map<string, number>();\r\n    for (const t of tasks) {\r\n        const tag = safeTagLabel(t.tag ?? \"\");\r\n        map.set(tag, (map.get(tag) ?? 0) + getTotalActualSeconds(t, now));\r\n    }\r\n    return Array.from(map.entries())\r\n        .map(([tag, sec]) => ({ tag, sec }))\r\n        .filter((x) => x.sec > 0)\r\n        .sort((a, b) => b.sec - a.sec)\r\n        .slice(0, n);\r\n}\r\n\r\nexport function calcEstimateInsights(tasks: Task[], now: number) {\r\n    const withEst = tasks.filter((t) => t.estimatedMinutes != null && t.estimatedMinutes >= 0);\r\n\r\n    const diffs = withEst.map((t) => {\r\n        const actualMin = Math.floor(getTotalActualSeconds(t, now) / 60);\r\n        const estMin = t.estimatedMinutes ?? 0;\r\n        const diff = actualMin - estMin;\r\n        return { t, actualMin, estMin, diff };\r\n    });\r\n\r\n    const overruns = diffs\r\n        .filter((x) => x.estMin > 0 && x.diff > 0)\r\n        .sort((a, b) => b.diff - a.diff);\r\n\r\n    const underruns = diffs\r\n        .filter((x) => x.estMin > 0 && x.diff < 0)\r\n        .sort((a, b) => a.diff - b.diff);\r\n\r\n    const avgDiff =\r\n        diffs.length > 0 ? diffs.reduce((sum, x) => sum + x.diff, 0) / diffs.length : null;\r\n\r\n    return { withEstCount: diffs.length, avgDiff, overruns, underruns };\r\n}\r\n\r\nexport function generateReflectionText(tasks: Task[], now: number, topN = 5) {\r\n    const done = tasks.filter((t) => t.status === \"done\");\r\n    const notDone = tasks.filter((t) => t.status !== \"done\");\r\n\r\n    const totalSec = tasks.reduce((sum, t) => sum + getTotalActualSeconds(t, now), 0);\r\n    const doneSec = done.reduce((sum, t) => sum + getTotalActualSeconds(t, now), 0);\r\n    const notDoneSec = notDone.reduce((sum, t) => sum + getTotalActualSeconds(t, now), 0);\r\n\r\n    const topTasks = pickTopBySeconds(tasks, now, 3);\r\n    const topTags = pickTopTagsBySeconds(tasks, now, 5);\r\n\r\n    // High Priority Done\r\n    const doneP0 = done.filter(t => t.priority === \"p0\");\r\n\r\n    // Low Priority but time consuming (Potential Problem)\r\n    const timeWasters = done\r\n        .filter(t => t.priority === \"p2\" && getTotalActualSeconds(t, now) > 30 * 60) // > 30 mins\r\n        .sort((a, b) => getTotalActualSeconds(b, now) - getTotalActualSeconds(a, now));\r\n\r\n    const todayNotDone = tasks\r\n        .filter((t) => t.isToday && t.status !== \"done\")\r\n        .sort((a, b) => {\r\n            const pr: Record<TaskPriority, number> = { p0: 0, p1: 1, p2: 2 };\r\n            return pr[a.priority] - pr[b.priority];\r\n        });\r\n\r\n    const { withEstCount, avgDiff, overruns } = calcEstimateInsights(tasks, now);\r\n\r\n    const lines: string[] = [];\r\n    lines.push(`„Äêü§ñ Ëá™ÂãïÁîüÊàê„Çµ„Éû„É™„Éº ${formatJPDateTime(now)}„Äë`);\r\n    lines.push(\"\");\r\n\r\n    // 1. Overview\r\n    lines.push(\"üìä 1. ÂÆöÈáè„Éá„Éº„Çø\");\r\n    lines.push(`- Á®ºÂÉçÊôÇÈñìÔºö${formatHMFromSecondsSimple(totalSec)}ÔºàÂÆå‰∫Ü ${formatHMFromSecondsSimple(doneSec)} / Êú™ÂÆå‰∫Ü ${formatHMFromSecondsSimple(notDoneSec)}Ôºâ`);\r\n    lines.push(`- „Çø„Çπ„ÇØÊ∂àÂåñÁéáÔºö${Math.round((done.length / Math.max(tasks.length, 1)) * 100)}%ÔºàÂÆå‰∫Ü ${done.length} / ÂÖ® ${tasks.length}Ôºâ`);\r\n    if (doneP0.length > 0) {\r\n        lines.push(`- ‚òÖÈáçË¶Å„Çø„Çπ„ÇØ(P0)ÈÅîÊàêÊï∞Ôºö${doneP0.length}‰ª∂`);\r\n    }\r\n    lines.push(\"\");\r\n\r\n    // 2. Focus Area (Tags)\r\n    lines.push(\"üé® 2. ÊôÇÈñì„ÅÆ‰Ωø„ÅÑÊñπÔºà„Çø„Ç∞ÂàÜÊûêÔºâ\");\r\n    if (topTags.length > 0) {\r\n        topTags.forEach(row => {\r\n            const pct = Math.round((row.sec / Math.max(totalSec, 1)) * 100);\r\n            lines.push(`- ${row.tag}Ôºö${formatHMFromSecondsSimple(row.sec)} (${pct}%)`);\r\n        });\r\n    } else {\r\n        lines.push(\"- „Éá„Éº„Çø„Å™„Åó\");\r\n    }\r\n    lines.push(\"\");\r\n\r\n    // 3. Highlights\r\n    lines.push(\"üèÜ 3. ‰∏ª„Å™ÊàêÊûú\");\r\n    if (done.length === 0) {\r\n        lines.push(\"- ÂÆå‰∫Ü„Çø„Çπ„ÇØ„Å™„Åó\");\r\n    } else {\r\n        // List P0 first\r\n        if (doneP0.length > 0) {\r\n            lines.push(\"„ÄêP0ÔºöÈáçË¶Å„ÄëÂç≥Êà¶Âäõ„Å®„Åó„Å¶ÂÆå‰∫ÜÔºÅ\");\r\n            doneP0.forEach(t => lines.push(`  ‚úì ${t.title} (${formatHMFromSecondsSimple(getTotalActualSeconds(t, now))})`));\r\n        }\r\n        // Others (Top 5 by time)\r\n        const otherDone = done.filter(t => t.priority !== \"p0\")\r\n            .sort((a, b) => getTotalActualSeconds(b, now) - getTotalActualSeconds(a, now))\r\n            .slice(0, 5);\r\n\r\n        if (otherDone.length > 0) {\r\n            if (doneP0.length > 0) lines.push(\"„Äê„Åù„ÅÆ‰ªñÔºö‰∏ªË¶Å„Å™ÂÆå‰∫Ü„Äë\");\r\n            otherDone.forEach(t => lines.push(`  ‚úì ${t.title} (${formatHMFromSecondsSimple(getTotalActualSeconds(t, now))})`));\r\n        }\r\n    }\r\n    lines.push(\"\");\r\n\r\n    // 4. Issues / Next Actions\r\n    lines.push(\"‚ö†Ô∏è 4. Ë™≤È°å„Éª„Éç„ÇØ„Çπ„Éà„Ç¢„ÇØ„Ç∑„Éß„É≥\");\r\n    if (overruns.length > 0) {\r\n        lines.push(\"- ‚è∞ ÊôÇÈñìË∂ÖÈÅéÔºàË¶ãÁ©ç„ÇÇ„Çä„Å®„ÅÆ„Ç∫„É¨Â§ßÔºâ\");\r\n        overruns.slice(0, 3).forEach(x => {\r\n            lines.push(`  ! ${x.t.title}Ôºö‰∫à +${Math.round(x.diff)}ÂàÜ„Ç™„Éº„Éê„Éº`);\r\n        });\r\n    }\r\n    if (timeWasters.length > 0) {\r\n        lines.push(\"- üê¢ ÂÑ™ÂÖàÂ∫¶‰Ωé„Å†„ÅåÊôÇÈñìÊ∂àË≤ªÂ§ßÔºàË¶ÅË¶ãÁõ¥„ÅóÔºüÔºâ\");\r\n        timeWasters.slice(0, 3).forEach(t => {\r\n            lines.push(`  ? ${t.title} (P2)Ôºö${formatHMFromSecondsSimple(getTotalActualSeconds(t, now))}`);\r\n        });\r\n    }\r\n    if (todayNotDone.length > 0) {\r\n        lines.push(\"- üî• Êú¨Êó•„ÅÆÁ©ç„ÅøÊÆã„Åó\");\r\n        todayNotDone.slice(0, 3).forEach(t => {\r\n            lines.push(`  -> ${t.title} (${PRIORITY_LABEL[t.priority]})`);\r\n        });\r\n    }\r\n    if (overruns.length === 0 && timeWasters.length === 0 && todayNotDone.length === 0) {\r\n        lines.push(\"- Áâπ„Å´„Å™„Åó„ÄÇÈ†ÜË™ø„Åß„ÅôÔºÅüéâ\");\r\n    }\r\n\r\n    return lines.join(\"\\n\");\r\n}\r\n\r\nexport function generateCsvText(tasks: Task[], now: number) {\r\n    if (tasks.length === 0) return \"\";\r\n\r\n    const escapeCsv = (value: string): string => {\r\n        const escaped = value.replace(/\"/g, '\"\"');\r\n        return `\"${escaped}\"`;\r\n    };\r\n\r\n    const header = \"„Çø„Çπ„ÇØÂêç,„Çø„Ç∞,ÂÑ™ÂÖàÂ∫¶,Today,„Çπ„ÉÜ„Éº„Çø„Çπ,Ë¶ãÁ©ç„ÇÇ„Çä(ÂàÜ),ÂÆüÁ∏æ(ÂàÜ),Â∑ÆÂàÜ(ÂàÜ)\";\r\n\r\n    const lines = tasks.map((task) => {\r\n        const totalSeconds = getTotalActualSeconds(task, now);\r\n        const actualMinutes = Math.floor(totalSeconds / 60);\r\n        const est = task.estimatedMinutes;\r\n\r\n        let diffStr = \"\";\r\n        if (est != null) {\r\n            const diff = actualMinutes - est;\r\n            if (diff > 0) diffStr = `+${diff}`;\r\n            else if (diff === 0) diffStr = \"0\";\r\n            else diffStr = `${diff}`;\r\n        }\r\n\r\n        const title = escapeCsv(task.title);\r\n        const tagStr = escapeCsv(task.tag ?? \"\");\r\n        const priorityStr = escapeCsv(PRIORITY_LABEL[task.priority]);\r\n        const todayStr = task.isToday ? \"1\" : \"0\";\r\n        const statusStr = escapeCsv(STATUS_LABEL[task.status]);\r\n        const estStr = est != null ? String(est) : \"\";\r\n        const actualStr = String(actualMinutes);\r\n\r\n        return [title, tagStr, priorityStr, todayStr, statusStr, estStr, actualStr, diffStr].join(\",\");\r\n    });\r\n\r\n    return [header, ...lines].join(\"\\n\");\r\n}\r\n\r\n\r\n\r\n\r\nexport type ReportStats = {\r\n    totalCount: number;\r\n    doneCount: number;\r\n    todayRemaining: number;\r\n\r\n    totalActualSeconds: number;\r\n\r\n    estimatedCount: number;\r\n    avgDiffMinutes: number | null;\r\n\r\n    topTags: { tag: string; seconds: number }[];\r\n    highlights: Task[];\r\n    noteSummary?: string;\r\n};\r\n\r\n// --- Constants ---\r\n\r\nexport const STORAGE_KEY = \"weekly-report-list\";\r\nexport const TASKS_KEY_PREFIX = \"weekly-report-tasks-\";\r\nexport const TAG_STORAGE_KEY = \"weekly-report-tags\";\r\nexport const DEFAULT_TAG_LABEL = \"(Êú™Ë®≠ÂÆö)\";\r\nexport const DEFAULT_TAGS = [\"ÈñãÁô∫\", \"Â≠¶Áøí\", \"Â∞±Ê¥ª\", \"‰∫ãÂãô\", \"ÁîüÊ¥ª\"];\r\n\r\n// --- Utility Functions ---\r\n\r\nexport function loadStoredTags(): string[] {\r\n    if (typeof window === \"undefined\") return DEFAULT_TAGS;\r\n\r\n    const raw = window.localStorage.getItem(TAG_STORAGE_KEY);\r\n    if (!raw) {\r\n        // If empty, initialize with defaults\r\n        window.localStorage.setItem(TAG_STORAGE_KEY, JSON.stringify(DEFAULT_TAGS));\r\n        return DEFAULT_TAGS;\r\n    }\r\n\r\n    try {\r\n        const parsed = JSON.parse(raw);\r\n        if (!Array.isArray(parsed)) return DEFAULT_TAGS;\r\n        return parsed;\r\n    } catch {\r\n        return DEFAULT_TAGS;\r\n    }\r\n}\r\n\r\nexport function saveStoredTags(tags: string[]) {\r\n    if (typeof window === \"undefined\") return;\r\n    window.localStorage.setItem(TAG_STORAGE_KEY, JSON.stringify(tags));\r\n}\r\n\r\n/** ÈÄ±„ÅÆÈñãÂßã„ÉªÁµÇ‰∫ÜÔºàÊúàÊõú„ÅØ„Åò„Åæ„Çä„ÄÅÊó•Êõú„Åä„Çè„ÇäÔºâ */\r\nexport function getWeekRange(date: Date): { start: Date; end: Date } {\r\n    const d = new Date(date);\r\n    d.setHours(0, 0, 0, 0);\r\n\r\n    const day = d.getDay(); // 0:Êó•, 1:Êúà, ... 6:Âúü\r\n    const diffFromMonday = (day + 6) % 7; // ÊúàÊõú„Çí0„Å´„Åô„Çã\r\n\r\n    const start = new Date(d);\r\n    start.setDate(d.getDate() - diffFromMonday);\r\n    start.setHours(0, 0, 0, 0);\r\n\r\n    const end = new Date(start);\r\n    end.setDate(start.getDate() + 6);\r\n    end.setHours(23, 59, 59, 999);\r\n\r\n    return { start, end };\r\n}\r\n\r\n/** „Çø„Ç§„Éà„É´Áî®Ôºö„ÄåM/DÔΩûM/D„ÅÆÈÄ±Â†±„Äç */\r\nexport function formatWeekRangeTitle(startIso: string, endIso: string): string {\r\n    const s = new Date(startIso);\r\n    const e = new Date(endIso);\r\n    if (Number.isNaN(s.getTime()) || Number.isNaN(e.getTime())) return \"ÈÄ±Â†±\";\r\n\r\n    const sStr = s.toLocaleDateString(\"ja-JP\", { month: \"numeric\", day: \"numeric\" });\r\n    const eStr = e.toLocaleDateString(\"ja-JP\", { month: \"numeric\", day: \"numeric\" });\r\n    return `${sStr}ÔΩû${eStr}„ÅÆÈÄ±Â†±`;\r\n}\r\n\r\n/** ‰ΩúÊàêÊó•„ÅÆË°®Á§∫Áî®Ôºà‰æã: 2025/12/13Ôºâ */\r\nexport function formatDate(iso: string): string {\r\n    const d = new Date(iso);\r\n    if (Number.isNaN(d.getTime())) return \"\";\r\n    return d.toLocaleDateString(\"ja-JP\", { year: \"numeric\", month: \"2-digit\", day: \"2-digit\" });\r\n}\r\n\r\n/** ‰∏ÄË¶ß„Çí„ÄåÊñ∞„Åó„ÅÑÈ†Ü„Äç„Å´‰∏¶„ÅπÊõø„Åà„ÇãÔºàcreatedAt ‚Üí id „ÅÆÈ†ÜÔºâ */\r\nexport function sortReportsDesc(reports: Report[]): Report[] {\r\n    return [...reports].sort((a, b) => {\r\n        const ta = new Date(a.createdAt).getTime();\r\n        const tb = new Date(b.createdAt).getTime();\r\n        if (!Number.isNaN(ta) && !Number.isNaN(tb) && ta !== tb) return tb - ta;\r\n\r\n        const na = Number(a.id);\r\n        const nb = Number(b.id);\r\n        if (!Number.isNaN(na) && !Number.isNaN(nb)) return nb - na;\r\n\r\n        return 0;\r\n    });\r\n}\r\n\r\nexport function safeTagLabel(tag: unknown): string {\r\n    if (typeof tag !== \"string\") return DEFAULT_TAG_LABEL;\r\n    const t = tag.trim();\r\n    return t ? t : DEFAULT_TAG_LABEL;\r\n}\r\n\r\nexport function formatHMFromSecondsSimple(totalSeconds: number) {\r\n    const totalMinutes = Math.floor(totalSeconds / 60);\r\n    const h = Math.floor(totalMinutes / 60);\r\n    const m = totalMinutes % 60;\r\n    if (h <= 0) return `${m}ÂàÜ`;\r\n    if (m === 0) return `${h}ÊôÇÈñì`;\r\n    return `${h}ÊôÇÈñì${m}ÂàÜ`;\r\n}\r\n\r\nexport function clamp(n: number, min: number, max: number) {\r\n    return Math.max(min, Math.min(max, n));\r\n}\r\n\r\n/** „Çø„Çπ„ÇØÈÖçÂàó„ÇíÂÆâÂÖ®„Å´Ë™≠„ÇÄÔºàÂ£ä„Çå„Å¶„Å¶„ÇÇËêΩ„Å°„Å™„ÅÑÔºâ */\r\nexport function loadTasks(reportId: string, nowMs: number): Task[] {\r\n    if (typeof window === \"undefined\") return [];\r\n\r\n    const raw = window.localStorage.getItem(`${TASKS_KEY_PREFIX}${reportId}`);\r\n    if (!raw) return [];\r\n\r\n    try {\r\n        const parsed = JSON.parse(raw);\r\n        if (!Array.isArray(parsed)) return [];\r\n\r\n        return parsed.map((t: any) => {\r\n            const baseActual = typeof t?.actualSeconds === \"number\" ? t.actualSeconds : 0;\r\n            const isRunning = !!t?.isRunning;\r\n            const startedAt = typeof t?.startedAt === \"number\" ? t.startedAt : null;\r\n\r\n            // ‰∏ÄË¶ß„Éö„Éº„Ç∏„Åß„ÅØ„Äå„Åì„ÅÆÁû¨Èñì„ÅÆÁµåÈÅéÂàÜ„Äç„ÇíÂä†ÁÆó„Åó„Å¶Ë°®Á§∫„Å†„ÅëÊõ¥Êñ∞Ôºà„É™„Ç¢„É´„Çø„Ç§„É†Êõ¥Êñ∞„ÅØ„Åó„Å™„ÅÑÔºâ\r\n            const extra =\r\n                isRunning && startedAt ? Math.max(0, Math.floor((nowMs - startedAt) / 1000)) : 0;\r\n\r\n            const status: TaskStatus =\r\n                t?.status === \"not_decided\" || t?.status === \"todo\" || t?.status === \"doing\" || t?.status === \"done\"\r\n                    ? t.status\r\n                    : \"todo\";\r\n\r\n            return {\r\n                id: typeof t?.id === \"string\" ? t.id : crypto.randomUUID(),\r\n                title: typeof t?.title === \"string\" ? t.title : \"\",\r\n                status,\r\n                tag: typeof t?.tag === \"string\" ? t.tag : null,\r\n\r\n                priority: (PRIORITY_ORDER as string[]).includes(t?.priority) ? (t.priority as TaskPriority) : \"p1\",\r\n\r\n                estimatedMinutes:\r\n                    typeof t?.estimatedMinutes === \"number\" && t.estimatedMinutes >= 0 ? Math.floor(t.estimatedMinutes) : null,\r\n\r\n                actualSeconds: baseActual + extra,\r\n                isToday: typeof t?.isToday === \"boolean\" ? t.isToday : false,\r\n\r\n                isRunning,\r\n                startedAt,\r\n            };\r\n        });\r\n    } catch {\r\n        return [];\r\n    }\r\n}\r\n\r\nexport function buildStats(tasks: Task[]): ReportStats {\r\n    const totalCount = tasks.length;\r\n    const doneCount = tasks.filter((t) => t.status === \"done\").length;\r\n    const todayRemaining = tasks.filter((t) => t.isToday && t.status !== \"done\").length;\r\n\r\n    const totalActualSeconds = tasks.reduce((sum, t) => sum + (t.actualSeconds ?? 0), 0);\r\n\r\n    // Ë¶ãÁ©çÁ≤æÂ∫¶ÔºàÂπ≥ÂùáÂ∑ÆÂàÜ = ÂÆüÁ∏æ(ÂàÜ) - Ë¶ãÁ©ç(ÂàÜ)Ôºâ\r\n    const withEst = tasks.filter((t) => t.estimatedMinutes != null);\r\n    const estimatedCount = withEst.length;\r\n\r\n    let avgDiffMinutes: number | null = null;\r\n    if (estimatedCount > 0) {\r\n        const diffs = withEst.map((t) => {\r\n            const actualMin = Math.floor((t.actualSeconds ?? 0) / 60);\r\n            const estMin = t.estimatedMinutes ?? 0;\r\n            return actualMin - estMin;\r\n        });\r\n        avgDiffMinutes = diffs.reduce((a, b) => a + b, 0) / diffs.length;\r\n    }\r\n\r\n    // „Çø„Ç∞Âà•Ôºà‰∏ä‰Ωç3Ôºâ\r\n    const map = new Map<string, number>();\r\n    for (const t of tasks) {\r\n        const key = safeTagLabel(t.tag);\r\n        map.set(key, (map.get(key) ?? 0) + (t.actualSeconds ?? 0));\r\n    }\r\n\r\n    const topTags = Array.from(map.entries())\r\n        .map(([tag, seconds]) => ({ tag, seconds }))\r\n        .filter((x) => x.seconds > 0)\r\n        .sort((a, b) => b.seconds - a.seconds)\r\n        .slice(0, 3);\r\n\r\n    // „Éè„Ç§„É©„Ç§„ÉàÊäΩÂá∫: P0„ÅÆÂÆå‰∫Ü„Çø„Çπ„ÇØ„ÄÅ„Åæ„Åü„ÅØÊôÇÈñì„Åå„Åã„Åã„Å£„ÅüÂÆå‰∫Ü„Çø„Çπ„ÇØ‰∏ä‰Ωç\r\n    const highlights = tasks\r\n        .filter(t => t.status === \"done\")\r\n        .sort((a, b) => {\r\n            // Priority first (p0 < p1 < p2)\r\n            const pRank = { p0: 0, p1: 1, p2: 2 };\r\n            if (a.priority !== b.priority) return pRank[a.priority] - pRank[b.priority];\r\n            // Then duration desc\r\n            return Math.abs(getTotalActualSeconds(b, 0)) - Math.abs(getTotalActualSeconds(a, 0));\r\n        })\r\n        .slice(0, 3);\r\n\r\n    return {\r\n        totalCount,\r\n        doneCount,\r\n        todayRemaining,\r\n        totalActualSeconds,\r\n        estimatedCount,\r\n        avgDiffMinutes,\r\n        topTags,\r\n        highlights,\r\n    };\r\n}\r\n\r\nexport function findThisWeekReport(reports: Report[]): Report | null {\r\n    const nowMs = Date.now();\r\n\r\n    const candidates = reports.filter((r) => {\r\n        const s = new Date(r.weekStart).getTime();\r\n        const e = new Date(r.weekEnd).getTime();\r\n        if (Number.isNaN(s) || Number.isNaN(e)) return false;\r\n        return s <= nowMs && nowMs <= e;\r\n    });\r\n\r\n    if (candidates.length === 0) return null;\r\n\r\n    // createdAt„ÅåÊñ∞„Åó„ÅÑ„ÇÇ„ÅÆ„ÇíÂÑ™ÂÖà\r\n    return [...candidates].sort((a, b) => {\r\n        const ta = new Date(a.createdAt).getTime();\r\n        const tb = new Date(b.createdAt).getTime();\r\n        return (Number.isNaN(tb) ? 0 : tb) - (Number.isNaN(ta) ? 0 : ta);\r\n    })[0];\r\n}\r\n\r\nexport function formatAvgDiff(avg: number | null) {\r\n    if (avg == null) return { label: \"‚Äî\", className: \"text-slate-500\" };\r\n    const rounded = Math.round(avg * 10) / 10;\r\n    if (rounded === 0) return { label: \"¬±0ÂàÜ\", className: \"text-slate-700\" };\r\n    if (rounded > 0) return { label: `+${rounded}ÂàÜ`, className: \"text-red-600\" };\r\n    return { label: `${rounded}ÂàÜ`, className: \"text-emerald-600\" };\r\n}\r\n\r\n/** „Çø„Ç∞„ÅÆÊñáÂ≠óÂàó„Åã„ÇâËâ≤„ÇíÁîüÊàê„Åô„ÇãÔºà„Éë„Çπ„ÉÜ„É´„Ç´„É©„ÉºÔºâ */\r\nexport function getTagColor(tag: string | null): string {\r\n    if (!tag) return \"bg-slate-100 text-slate-600 border-slate-200\";\r\n\r\n    // Simple hash\r\n    let hash = 0;\r\n    for (let i = 0; i < tag.length; i++) {\r\n        hash = tag.charCodeAt(i) + ((hash << 5) - hash);\r\n    }\r\n\r\n    // Predefined Tailwind classes for badges\r\n    const colors = [\r\n        \"bg-red-50 text-red-700 border-red-100\",\r\n        \"bg-orange-50 text-orange-700 border-orange-100\",\r\n        \"bg-amber-50 text-amber-700 border-amber-100\",\r\n        \"bg-yellow-50 text-yellow-700 border-yellow-100\",\r\n        \"bg-lime-50 text-lime-700 border-lime-100\",\r\n        \"bg-green-50 text-green-700 border-green-100\",\r\n        \"bg-emerald-50 text-emerald-700 border-emerald-100\",\r\n        \"bg-teal-50 text-teal-700 border-teal-100\",\r\n        \"bg-cyan-50 text-cyan-700 border-cyan-100\",\r\n        \"bg-sky-50 text-sky-700 border-sky-100\",\r\n        \"bg-blue-50 text-blue-700 border-blue-100\",\r\n        \"bg-indigo-50 text-indigo-700 border-indigo-100\",\r\n        \"bg-violet-50 text-violet-700 border-violet-100\",\r\n        \"bg-purple-50 text-purple-700 border-purple-100\",\r\n        \"bg-fuchsia-50 text-fuchsia-700 border-fuchsia-100\",\r\n        \"bg-pink-50 text-pink-700 border-pink-100\",\r\n        \"bg-rose-50 text-rose-700 border-rose-100\",\r\n    ];\r\n\r\n    const index = Math.abs(hash) % colors.length;\r\n    return colors[index];\r\n}\r\n\r\n// --- Trend Analysis Data Loading ---\r\nexport type TrendData = {\r\n    id: string;\r\n    label: string;\r\n    focusTime: number; // in hours (or minutes, depending on display)\r\n    doneCount: number;\r\n    completionRate: number; // 0-100\r\n};\r\n\r\nexport function loadAllReportsStats(reports: Report[]): TrendData[] {\r\n    const data: TrendData[] = [];\r\n    const now = Date.now();\r\n\r\n    // Sort reports by date asc (Oldest -> Newest) for the chart\r\n    const sorted = [...reports].sort((a, b) => a.createdAt.localeCompare(b.createdAt));\r\n\r\n    for (const r of sorted) {\r\n        const tasks = loadTasks(r.id, now);\r\n\r\n        // Calculate stats\r\n        const total = tasks.length;\r\n        const done = tasks.filter(t => t.status === \"done\").length;\r\n        const rate = total > 0 ? Math.round((done / total) * 100) : 0;\r\n\r\n        let totalSec = 0;\r\n        tasks.forEach(t => {\r\n            totalSec += getTotalActualSeconds(t, now);\r\n        });\r\n        const hours = parseFloat((totalSec / 3600).toFixed(1));\r\n\r\n        // Label: Short date range e.g. \"12/29\"\r\n        const d = new Date(r.createdAt);\r\n        const label = !Number.isNaN(d.getTime()) ? `${d.getMonth() + 1}/${d.getDate()}` : \"N/A\";\r\n\r\n        data.push({\r\n            id: r.id,\r\n            label,\r\n            focusTime: hours,\r\n            doneCount: done,\r\n            completionRate: rate,\r\n        });\r\n    }\r\n    return data;\r\n}\r\n\r\n// --- Smart Copy Generators ---\r\n\r\nexport function generateSlackText(report: Report, tasks: Task[], note: string): string {\r\n    const doneTasks = tasks.filter(t => t.status === \"done\");\r\n    const doingTasks = tasks.filter(t => t.status === \"doing\");\r\n    // Removed wipTasks as it duplicated doingTasks or used wrong status\r\n    const todoTasks = tasks.filter(t => t.status === \"todo\");\r\n\r\n    const formatTask = (t: Task) => {\r\n        const time = formatHMFromSecondsSimple(getTotalActualSeconds(t, 0));\r\n        const est = t.estimatedMinutes ? ` (‰∫à${t.estimatedMinutes}ÂàÜ)` : \"\";\r\n        return `‚Ä¢ ${t.title} [${time}${est}]`;\r\n    };\r\n\r\n    return `*${report.title}*\r\n${report.description ? `_${report.description}_` : \"\"}\r\n\r\n*‚úÖ ÂÆå‰∫Ü (${doneTasks.length})*\r\n${doneTasks.map(formatTask).join(\"\\n\") || \"„Å™„Åó\"}\r\n\r\n*üöß ÈÄ≤Ë°å‰∏≠ (${doingTasks.length})*\r\n${doingTasks.map(formatTask).join(\"\\n\") || \"„Å™„Åó\"}\r\n\r\n*üìÖ „Éà„Ç•„Éâ„Ç• (${todoTasks.length})*\r\n${todoTasks.map(formatTask).join(\"\\n\") || \"„Å™„Åó\"}\r\n\r\n*üí≠ ÊåØ„ÇäËøî„Çä*\r\n${note || \"Ë®òËø∞„Å™„Åó\"}\r\n`;\r\n}\r\n\r\nexport function generateNotionText(report: Report, tasks: Task[], note: string): string {\r\n    const doneTasks = tasks.filter(t => t.status === \"done\");\r\n    const doingTasks = tasks.filter(t => t.status === \"doing\");\r\n    const todoTasks = tasks.filter(t => t.status === \"todo\");\r\n\r\n    const formatTask = (t: Task) => {\r\n        const time = formatHMFromSecondsSimple(getTotalActualSeconds(t, 0));\r\n        return `- [ ] ${t.title} #time(${time})`;\r\n    };\r\n\r\n    // Notion uses markdown-like structure\r\n    return `# ${report.title}\r\n${report.description}\r\n\r\n## ‰ªäÈÄ±„ÅÆÈÄ≤Êçó\r\n### ÂÆå‰∫Ü\r\n${doneTasks.map(formatTask).join(\"\\n\") || \"„Å™„Åó\"}\r\n\r\n### ÈÄ≤Ë°å‰∏≠\r\n${doingTasks.map(formatTask).join(\"\\n\") || \"„Å™„Åó\"}\r\n\r\n### ‰ªäÂæå„ÅÆ‰∫àÂÆö\r\n${todoTasks.map(formatTask).join(\"\\n\") || \"„Å™„Åó\"}\r\n\r\n## ÊåØ„ÇäËøî„Çä\r\n${note}\r\n`;\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 630, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hinat/projects/weekly-report-app/src/components/gamification/UserLevelCard.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { LevelInfo } from \"@/lib/gamification\";\r\n\r\ntype Props = {\r\n    levelInfo: LevelInfo;\r\n};\r\n\r\nexport function UserLevelCard({ levelInfo }: Props) {\r\n    const { level, rank, currentLevelXP, nextLevelXP, progressPercent, totalXP } = levelInfo;\r\n\r\n    return (\r\n        <div className=\"relative overflow-hidden rounded-2xl bg-white/60 backdrop-blur-md border border-white/40 shadow-sm p-4 w-full max-w-sm\">\r\n            {/* Rank Background Glow */}\r\n            <div className={`absolute -top-10 -right-10 w-32 h-32 rounded-full opacity-10 bg-current ${rank.color}`} />\r\n\r\n            <div className=\"relative z-10 flex items-center justify-between mb-2\">\r\n                <div>\r\n                    <span className={`text-xs font-bold tracking-wider uppercase opacity-70 ${rank.color}`}>\r\n                        {rank.name}\r\n                    </span>\r\n                    <div className=\"flex items-baseline gap-1\">\r\n                        <span className=\"text-sm font-medium text-slate-500\">Lv.</span>\r\n                        <span className=\"text-3xl font-black text-slate-800 tracking-tight\">{level}</span>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"text-right\">\r\n                    <div className=\"text-[10px] uppercase tracking-widest text-slate-400 font-bold\">Total XP</div>\r\n                    <div className=\"text-sm font-mono font-medium text-slate-600\">{totalXP.toLocaleString()}</div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Progress Bar */}\r\n            <div className=\"relative h-3 w-full bg-slate-100 rounded-full overflow-hidden border border-slate-200/50\">\r\n                <motion.div\r\n                    initial={{ width: 0 }}\r\n                    animate={{ width: `${progressPercent}%` }}\r\n                    transition={{ duration: 1, ease: \"easeOut\" }}\r\n                    className={`absolute inset-y-0 left-0 rounded-full bg-gradient-to-r from-indigo-500 to-purple-500`}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"flex justify-between mt-1 text-[10px] font-medium text-slate-400\">\r\n                <span>{currentLevelXP} XP</span>\r\n                <span>NEXT: {nextLevelXP - currentLevelXP} XP</span>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport function MiniUserLevelBadge({ levelInfo }: Props) {\r\n    const { level, rank } = levelInfo;\r\n    return (\r\n        <div className=\"inline-flex items-center gap-2 px-3 py-1 bg-white/50 backdrop-blur-sm rounded-full border border-white/60 shadow-sm\">\r\n            <span className={`text-[10px] font-bold uppercase tracking-wider ${rank.color}`}>\r\n                {rank.name}\r\n            </span>\r\n            <div className=\"w-px h-3 bg-slate-300\" />\r\n            <span className=\"text-xs font-bold text-slate-700\">Lv.{level}</span>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAGA;AAHA;;;AAUO,SAAS,cAAc,EAAE,SAAS,EAAS;IAC9C,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,cAAc,EAAE,WAAW,EAAE,eAAe,EAAE,OAAO,EAAE,GAAG;IAE/E,qBACI,8OAAC;QAAI,WAAU;;0BAEX,8OAAC;gBAAI,WAAW,CAAC,wEAAwE,EAAE,KAAK,KAAK,EAAE;;;;;;0BAEvG,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;;0CACG,8OAAC;gCAAK,WAAW,CAAC,sDAAsD,EAAE,KAAK,KAAK,EAAE;0CACjF,KAAK,IAAI;;;;;;0CAEd,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCAAK,WAAU;kDAAqC;;;;;;kDACrD,8OAAC;wCAAK,WAAU;kDAAqD;;;;;;;;;;;;;;;;;;kCAI7E,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAI,WAAU;0CAAiE;;;;;;0CAChF,8OAAC;gCAAI,WAAU;0CAAgD,QAAQ,cAAc;;;;;;;;;;;;;;;;;;0BAK7F,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC,oMAAM,CAAC,GAAG;oBACP,SAAS;wBAAE,OAAO;oBAAE;oBACpB,SAAS;wBAAE,OAAO,GAAG,gBAAgB,CAAC,CAAC;oBAAC;oBACxC,YAAY;wBAAE,UAAU;wBAAG,MAAM;oBAAU;oBAC3C,WAAW,CAAC,qFAAqF,CAAC;;;;;;;;;;;0BAI1G,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;;4BAAM;4BAAe;;;;;;;kCACtB,8OAAC;;4BAAK;4BAAO,cAAc;4BAAe;;;;;;;;;;;;;;;;;;;AAI1D;AAEO,SAAS,mBAAmB,EAAE,SAAS,EAAS;IACnD,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG;IACxB,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAK,WAAW,CAAC,+CAA+C,EAAE,KAAK,KAAK,EAAE;0BAC1E,KAAK,IAAI;;;;;;0BAEd,8OAAC;gBAAI,WAAU;;;;;;0BACf,8OAAC;gBAAK,WAAU;;oBAAmC;oBAAI;;;;;;;;;;;;;AAGnE"}},
    {"offset": {"line": 831, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hinat/projects/weekly-report-app/src/components/ReportDetailHeader.tsx"],"sourcesContent":["import Link from \"next/link\";\r\nimport React from \"react\";\r\nimport { Report, type TaskStatus } from \"@/lib/reportUtils\";\r\nimport { LevelInfo } from \"@/lib/gamification\";\r\nimport { MiniUserLevelBadge } from \"@/components/gamification/UserLevelCard\";\r\n\r\ntype Props = {\r\n    id: string;\r\n    loaded: boolean;\r\n    savedMessage: string;\r\n    totalCount: number;\r\n    countsByStatus: Record<TaskStatus, number>;\r\n    levelInfo?: LevelInfo;\r\n};\r\n\r\nexport function ReportDetailHeader({\r\n    id,\r\n    loaded,\r\n    savedMessage,\r\n    totalCount,\r\n    countsByStatus,\r\n    levelInfo,\r\n}: Props) {\r\n    return (\r\n        <header className=\"flex flex-col gap-4 md:flex-row md:items-start md:justify-between\">\r\n            <div className=\"space-y-2\">\r\n                <Link\r\n                    href=\"/reports\"\r\n                    className=\"inline-flex items-center gap-1 text-xs font-medium text-slate-500 hover:text-slate-900 transition-colors\"\r\n                >\r\n                    <span aria-hidden>‚Üê</span> ÈÄ±Â†±‰∏ÄË¶ß„Å´Êàª„Çã\r\n                </Link>\r\n                <h1 className=\"text-2xl md:text-3xl font-bold text-slate-900 tracking-tight flex items-center gap-3 flex-wrap\">\r\n                    ÈÄ±Â†±„Çø„Çπ„ÇØÁÆ°ÁêÜ <span className=\"text-lg font-normal text-slate-400\">#{id}</span>\r\n                    {levelInfo && <MiniUserLevelBadge levelInfo={levelInfo} />}\r\n                </h1>\r\n                <p className=\"text-sm text-slate-500 max-w-2xl leading-relaxed\">\r\n                    ‰ªäÈÄ±„ÇÑ„Çã„Åì„Å®„ÇíÁÆáÊù°Êõ∏„Åç„ÅßÊ¥ó„ÅÑÂá∫„Åó„Å¶„ÄÅ„Çπ„ÉÜ„Éº„Çø„Çπ„ÉªË¶ãÁ©ç„ÇÇ„ÇäÊôÇÈñì„ÉªÂÆüÁ∏æÊôÇÈñì„ÇíÁÆ°ÁêÜ„Åó„Åæ„Åô„ÄÇ<br className=\"hidden md:block\" />\r\n                    ÂÖ•ÂäõÂÜÖÂÆπ„ÅØ„Åô„Åπ„Å¶„Äå„Éñ„É©„Ç¶„Ç∂Ôºà„Åì„ÅÆÁ´ØÊú´Ôºâ„Äç„Å´Ëá™Âãï‰øùÂ≠ò„Åï„Çå„Åæ„Åô„ÄÇ\r\n                </p>\r\n                {!loaded && <p className=\"text-xs text-slate-400 animate-pulse\">Ë™≠„ÅøËæº„Åø‰∏≠...</p>}\r\n            </div>\r\n\r\n            <div className=\"flex flex-col items-end gap-3 pt-1\">\r\n                <div className=\"flex flex-wrap items-center justify-end gap-2 text-[10px] md:text-xs\">\r\n                    <Badge label=\"ÂêàË®à\" value={totalCount} color=\"slate\" />\r\n                    <Badge label=\"ÂÆå‰∫Ü\" value={countsByStatus.done} color=\"emerald\" />\r\n                    <Badge label=\"ÈÄ≤Ë°å‰∏≠\" value={countsByStatus.doing} color=\"blue\" />\r\n                    <Badge label=\"Êú™ÁùÄÊâã\" value={countsByStatus.todo} color=\"amber\" />\r\n                </div>\r\n\r\n                <div className=\"h-4 flex items-center\">\r\n                    {savedMessage && (\r\n                        <p className=\"text-[11px] font-medium text-emerald-600 animate-fade-in-out\">\r\n                            {savedMessage}\r\n                        </p>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </header>\r\n    );\r\n}\r\n\r\nfunction Badge({\r\n    label,\r\n    value,\r\n    color,\r\n}: {\r\n    label: string;\r\n    value: number;\r\n    color: \"slate\" | \"emerald\" | \"blue\" | \"amber\";\r\n}) {\r\n    const styles = {\r\n        slate: \"bg-slate-100 text-slate-700\",\r\n        emerald: \"bg-emerald-50 text-emerald-700 border-emerald-100\",\r\n        blue: \"bg-blue-50 text-blue-700 border-blue-100\",\r\n        amber: \"bg-amber-50 text-amber-700 border-amber-100\",\r\n    };\r\n\r\n    return (\r\n        <span\r\n            className={`inline-flex items-center rounded-full border border-transparent px-2.5 py-1 ${styles[color]}`}\r\n        >\r\n            {label}: <span className=\"ml-1 font-bold\">{value}</span>\r\n        </span>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AAIA;;;;AAWO,SAAS,mBAAmB,EAC/B,EAAE,EACF,MAAM,EACN,YAAY,EACZ,UAAU,EACV,cAAc,EACd,SAAS,EACL;IACJ,qBACI,8OAAC;QAAO,WAAU;;0BACd,8OAAC;gBAAI,WAAU;;kCACX,8OAAC,uKAAI;wBACD,MAAK;wBACL,WAAU;;0CAEV,8OAAC;gCAAK,aAAW;0CAAC;;;;;;4BAAQ;;;;;;;kCAE9B,8OAAC;wBAAG,WAAU;;4BAAiG;0CACnG,8OAAC;gCAAK,WAAU;;oCAAqC;oCAAE;;;;;;;4BAC9D,2BAAa,8OAAC,yKAAkB;gCAAC,WAAW;;;;;;;;;;;;kCAEjD,8OAAC;wBAAE,WAAU;;4BAAmD;0CAClB,8OAAC;gCAAG,WAAU;;;;;;4BAAoB;;;;;;;oBAG/E,CAAC,wBAAU,8OAAC;wBAAE,WAAU;kCAAuC;;;;;;;;;;;;0BAGpE,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAM,OAAM;gCAAK,OAAO;gCAAY,OAAM;;;;;;0CAC3C,8OAAC;gCAAM,OAAM;gCAAK,OAAO,eAAe,IAAI;gCAAE,OAAM;;;;;;0CACpD,8OAAC;gCAAM,OAAM;gCAAM,OAAO,eAAe,KAAK;gCAAE,OAAM;;;;;;0CACtD,8OAAC;gCAAM,OAAM;gCAAM,OAAO,eAAe,IAAI;gCAAE,OAAM;;;;;;;;;;;;kCAGzD,8OAAC;wBAAI,WAAU;kCACV,8BACG,8OAAC;4BAAE,WAAU;sCACR;;;;;;;;;;;;;;;;;;;;;;;AAO7B;AAEA,SAAS,MAAM,EACX,KAAK,EACL,KAAK,EACL,KAAK,EAKR;IACG,MAAM,SAAS;QACX,OAAO;QACP,SAAS;QACT,MAAM;QACN,OAAO;IACX;IAEA,qBACI,8OAAC;QACG,WAAW,CAAC,4EAA4E,EAAE,MAAM,CAAC,MAAM,EAAE;;YAExG;YAAM;0BAAE,8OAAC;gBAAK,WAAU;0BAAkB;;;;;;;;;;;;AAGvD"}},
    {"offset": {"line": 1034, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hinat/projects/weekly-report-app/src/components/task/TaskInput.tsx"],"sourcesContent":["import React, { useState } from \"react\";\r\n\r\ntype Props = {\r\n    onAdd: (title: string) => void;\r\n};\r\n\r\nexport function TaskInput({ onAdd }: Props) {\r\n    const [title, setTitle] = useState(\"\");\r\n\r\n    const handleSubmit = (e?: React.FormEvent) => {\r\n        e?.preventDefault();\r\n        const trimmed = title.trim();\r\n        if (!trimmed) return;\r\n        onAdd(trimmed);\r\n        setTitle(\"\");\r\n    };\r\n\r\n    return (\r\n        <section className=\"rounded-xl border border-slate-200 bg-white shadow-sm p-4 md:p-5 hover:border-slate-300 transition-colors\">\r\n            <div className=\"flex flex-col gap-2 mb-3\">\r\n                <h2 className=\"text-base font-bold text-slate-800 flex items-center gap-2\">\r\n                    ‚úèÔ∏è Êñ∞„Åó„ÅÑ„Çø„Çπ„ÇØ„ÇíËøΩÂä†\r\n                </h2>\r\n            </div>\r\n\r\n            <form onSubmit={handleSubmit} className=\"flex flex-col md:flex-row gap-3\">\r\n                <input\r\n                    type=\"text\"\r\n                    className=\"flex-1 rounded-lg border border-slate-300 px-4 py-2.5 text-sm placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all\"\r\n                    placeholder=\"‰æãÔºöReact„ÅÆÂÖ¨Âºè„Éâ„Ç≠„É•„É°„É≥„Éà„ÇíË™≠„ÇÄ„ÄÅAÁ§æ„ÅÆË≥áÊñô‰ΩúÊàê...\"\r\n                    value={title}\r\n                    onChange={(e) => setTitle(e.target.value)}\r\n                />\r\n                <button\r\n                    type=\"submit\"\r\n                    className=\"w-full md:w-auto inline-flex justify-center items-center gap-2 rounded-lg bg-slate-900 px-6 py-2.5 text-sm font-bold text-white shadow-md hover:bg-slate-800 hover:shadow-lg transition-all active:scale-95 focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-2\"\r\n                >\r\n                    <span>Ôºã</span> ËøΩÂä†\r\n                </button>\r\n            </form>\r\n        </section>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;;AAMO,SAAS,UAAU,EAAE,KAAK,EAAS;IACtC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IAEnC,MAAM,eAAe,CAAC;QAClB,GAAG;QACH,MAAM,UAAU,MAAM,IAAI;QAC1B,IAAI,CAAC,SAAS;QACd,MAAM;QACN,SAAS;IACb;IAEA,qBACI,8OAAC;QAAQ,WAAU;;0BACf,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;oBAAG,WAAU;8BAA6D;;;;;;;;;;;0BAK/E,8OAAC;gBAAK,UAAU;gBAAc,WAAU;;kCACpC,8OAAC;wBACG,MAAK;wBACL,WAAU;wBACV,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;;;;;;kCAE5C,8OAAC;wBACG,MAAK;wBACL,WAAU;;0CAEV,8OAAC;0CAAK;;;;;;4BAAQ;;;;;;;;;;;;;;;;;;;AAKlC"}},
    {"offset": {"line": 1119, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hinat/projects/weekly-report-app/src/components/task/TaskItem.tsx"],"sourcesContent":["import React from \"react\";\r\nimport { useSortable } from \"@dnd-kit/sortable\";\r\nimport { CSS } from \"@dnd-kit/utilities\";\r\nimport { Bars3Icon } from \"@heroicons/react/24/outline\"; // Grip Icon\r\nimport {\r\n    type Task,\r\n    type TaskStatus,\r\n    type TaskPriority,\r\n    PRIORITY_LABEL,\r\n    PRIORITY_ORDER,\r\n    STATUS_LABEL,\r\n    STATUS_ORDER,\r\n    getTotalActualSeconds,\r\n    cn,\r\n} from \"@/lib/reportUtils\";\r\n\r\ntype Props = {\r\n    task: Task;\r\n    now: number;\r\n    tags: string[];\r\n    onChangeStatus: (id: string, status: TaskStatus) => void;\r\n    onChangeTag: (id: string, tag: string) => void;\r\n    onChangePriority: (id: string, priority: string) => void;\r\n    onChangeEstimated: (id: string, value: string) => void;\r\n    onToggleToday: (id: string) => void;\r\n    onStartTimer: (id: string) => void;\r\n    onStopTimer: (id: string) => void;\r\n    onDelete: (id: string) => void;\r\n};\r\n\r\nexport function TaskItem({\r\n    task,\r\n    now,\r\n    tags,\r\n    onChangeStatus,\r\n    onChangeTag,\r\n    onChangePriority,\r\n    onChangeEstimated,\r\n    onToggleToday,\r\n    onStartTimer,\r\n    onStopTimer,\r\n    onDelete,\r\n}: Props) {\r\n    // Sortable Hooks\r\n    const {\r\n        attributes,\r\n        listeners,\r\n        setNodeRef,\r\n        transform,\r\n        transition,\r\n        isDragging,\r\n    } = useSortable({ id: task.id });\r\n\r\n    const style = {\r\n        transform: CSS.Transform.toString(transform),\r\n        transition,\r\n        zIndex: isDragging ? 50 : \"auto\",\r\n        position: isDragging ? \"relative\" as const : undefined,\r\n    };\r\n\r\n    const totalSeconds = getTotalActualSeconds(task, now);\r\n    const minutes = Math.floor(totalSeconds / 60);\r\n    const seconds = totalSeconds % 60;\r\n    const timeStr = `${minutes}ÂàÜ${seconds.toString().padStart(2, \"0\")}Áßí`;\r\n\r\n    // Ë¶ãÁ©ç„ÇÇ„ÇäÂ∑ÆÂàÜ\r\n    const est = task.estimatedMinutes;\r\n    let diffLabel = \"\";\r\n    let diffClass = \"text-slate-500\";\r\n    if (est != null) {\r\n        const diff = minutes - est;\r\n        if (diff === 0) diffLabel = \"¬±0\";\r\n        else if (diff > 0) {\r\n            diffLabel = `+${diff}`;\r\n            diffClass = \"text-red-500 font-medium\";\r\n        } else {\r\n            diffLabel = `${diff}`; // negative\r\n            diffClass = \"text-emerald-600 font-medium\";\r\n        }\r\n    }\r\n\r\n    // running state decoration\r\n    const isRunning = task.isRunning;\r\n    const containerClass = cn(\r\n        \"rounded-xl border p-3 sm:p-4 transition-all duration-200 flex flex-col gap-3 group relative\",\r\n        isRunning\r\n            ? \"border-indigo-500 bg-white ring-4 ring-indigo-500/20 shadow-2xl scale-[1.05] md:scale-110 z-20 my-4\"\r\n            : \"border-slate-200 bg-white/70 hover:bg-white hover:shadow-md hover:border-indigo-200\", // Glassy default\r\n        isDragging && \"shadow-xl ring-2 ring-indigo-500 opacity-80 cursor-grabbing bg-indigo-50\"\r\n    );\r\n\r\n    // priority badge style\r\n    const getPriorityStyle = (p: TaskPriority) => {\r\n        switch (p) {\r\n            case \"p0\": return \"bg-slate-900 text-white border-slate-900\";\r\n            case \"p1\": return \"bg-white text-slate-700 border-slate-300\";\r\n            case \"p2\": return \"bg-white text-slate-400 border-slate-200\";\r\n            default: return \"\";\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div ref={setNodeRef} style={style} className={containerClass}>\r\n\r\n            {/* Top Row: Main Info */}\r\n            <div className=\"flex flex-col sm:flex-row gap-2 sm:items-start justify-between pl-6 sm:pl-0\">\r\n                {/* Drag Handle (Absolute Positioned for mobile/desktop unification) */}\r\n                <div\r\n                    {...attributes}\r\n                    {...listeners}\r\n                    className=\"absolute left-2 top-4 sm:top-5 p-1 text-slate-300 hover:text-indigo-500 cursor-grab active:cursor-grabbing touch-none\"\r\n                    title=\"„Éâ„É©„ÉÉ„Ç∞„Åó„Å¶‰∏¶„Å≥Êõø„Åà\"\r\n                >\r\n                    <Bars3Icon className=\"w-5 h-5\" />\r\n                </div>\r\n\r\n                <div className=\"flex-1 space-y-2 min-w-0 pl-1\">\r\n                    <div className=\"flex items-start gap-2\">\r\n                        <div className=\"pt-0.5 shrink-0\">\r\n                            <span className={cn(\"inline-flex items-center justify-center rounded px-1.5 py-0.5 text-[10px] font-bold uppercase tracking-wider border\", getPriorityStyle(task.priority))}>\r\n                                {PRIORITY_LABEL[task.priority]}\r\n                            </span>\r\n                        </div>\r\n                        <p className={cn(\"text-base font-semibold leading-relaxed break-words text-slate-800\", task.status === \"done\" && \"text-slate-400 line-through decoration-slate-300\")}>\r\n                            {task.title}\r\n                        </p>\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-wrap items-center gap-3\">\r\n                        {/* Tag Selector */}\r\n                        <div className=\"flex items-center gap-1.5 bg-slate-100/50 rounded-md px-2 py-0.5 border border-transparent hover:border-slate-200 transition-colors\">\r\n                            <span className=\"text-[10px] text-slate-500\">TAG</span>\r\n                            <select\r\n                                className=\"text-[11px] bg-transparent border-none p-0 pr-4 focus:ring-0 text-slate-700 font-medium cursor-pointer\"\r\n                                value={task.tag ?? \"\"}\r\n                                onChange={(e) => onChangeTag(task.id, e.target.value)}\r\n                            >\r\n                                <option value=\"\">(Êú™Ë®≠ÂÆö)</option>\r\n                                {tags.map((t) => (\r\n                                    <option key={t} value={t}>{t}</option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n\r\n                        {/* Priority Selector */}\r\n                        <div className=\"flex items-center gap-1.5 bg-slate-100/50 rounded-md px-2 py-0.5 border border-transparent hover:border-slate-200 transition-colors\">\r\n                            <span className=\"text-[10px] text-slate-500\">PRIORITY</span>\r\n                            <select\r\n                                className=\"text-[11px] bg-transparent border-none p-0 pr-4 focus:ring-0 text-slate-700 font-medium cursor-pointer\"\r\n                                value={task.priority}\r\n                                onChange={(e) => onChangePriority(task.id, e.target.value)}\r\n                            >\r\n                                {PRIORITY_ORDER.map((p) => (\r\n                                    <option key={p} value={p}>{p.toUpperCase()}</option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n\r\n                        {/* Today Toggle */}\r\n                        <label className=\"flex items-center gap-1.5 cursor-pointer bg-slate-100/50 rounded-md px-2 py-0.5 hover:bg-indigo-50 hover:border-indigo-100 border border-transparent transition-colors\">\r\n                            <input\r\n                                type=\"checkbox\"\r\n                                className=\"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 h-3 w-3\"\r\n                                checked={task.isToday}\r\n                                onChange={() => onToggleToday(task.id)}\r\n                            />\r\n                            <span className={cn(\"text-[11px] font-medium transition-colors\", task.isToday ? \"text-indigo-600\" : \"text-slate-500\")}>Today</span>\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Status Buttons */}\r\n                <div className=\"flex sm:flex-col items-center sm:items-end gap-1 overflow-x-auto pb-1 sm:pb-0 scrollbar-hide\">\r\n                    <div className=\"flex rounded-lg bg-slate-100/80 p-0.5 backdrop-blur-sm\">\r\n                        {STATUS_ORDER.map((s) => {\r\n                            const isActive = task.status === s;\r\n                            return (\r\n                                <button\r\n                                    key={s}\r\n                                    type=\"button\"\r\n                                    onClick={() => onChangeStatus(task.id, s)}\r\n                                    className={cn(\r\n                                        \"px-2.5 py-1 text-[10px] font-medium rounded-md transition-all whitespace-nowrap\",\r\n                                        isActive ? \"bg-white text-indigo-600 shadow-sm ring-1 ring-black/5\" : \"text-slate-500 hover:text-slate-700\"\r\n                                    )}\r\n                                >\r\n                                    {STATUS_LABEL[s]}\r\n                                </button>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Bottom Row: Time Management */}\r\n            {isRunning ? (\r\n                // Running Layout: Centered Big Timer\r\n                <div className=\"mt-2 flex flex-col items-center justify-center gap-3 py-4 bg-indigo-50/50 rounded-xl border border-indigo-100 backdrop-blur-sm\">\r\n                    <div className=\"flex flex-col items-center\">\r\n                        <span className=\"text-xs font-bold text-indigo-400 uppercase tracking-widest mb-1 animate-pulse\">RUNNING</span>\r\n                        <span className=\"font-mono text-4xl md:text-5xl font-black text-indigo-600 tabular-nums tracking-tight drop-shadow-sm\">\r\n                            {minutes}<span className=\"text-xl md:text-2xl text-indigo-400 font-bold ml-1\">m</span>\r\n                            {seconds.toString().padStart(2, \"0\")}<span className=\"text-xl md:text-2xl text-indigo-400 font-bold ml-1\">s</span>\r\n                        </span>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center gap-6 mt-2\">\r\n                        {/* Estimation (Small) */}\r\n                        <div className=\"flex items-center gap-2 text-xs text-slate-500 bg-white/80 px-3 py-1.5 rounded-full border border-slate-200\">\r\n                            <span>Ë¶ãÁ©ç:</span>\r\n                            <input\r\n                                type=\"number\"\r\n                                min=\"0\"\r\n                                className=\"w-8 text-center font-bold text-slate-700 bg-transparent focus:outline-none border-b border-slate-300 focus:border-indigo-500 p-0\"\r\n                                placeholder=\"0\"\r\n                                value={est ?? \"\"}\r\n                                onChange={(e) => onChangeEstimated(task.id, e.target.value)}\r\n                            />\r\n                            <span>ÂàÜ</span>\r\n                            {est != null && (\r\n                                <span className={cn(\"ml-1 font-bold\", diffClass)}>{diffLabel}</span>\r\n                            )}\r\n                        </div>\r\n\r\n                        <button\r\n                            onClick={() => onStopTimer(task.id)}\r\n                            className=\"flex items-center gap-2 bg-gradient-to-r from-red-500 to-pink-600 hover:from-red-600 hover:to-pink-700 text-white px-8 py-2.5 rounded-full text-sm font-bold shadow-lg shadow-red-500/30 transition-all hover:scale-105 active:scale-95 animate-pulse\"\r\n                        >\r\n                            <span className=\"w-2.5 h-2.5 rounded-full bg-white block\" />\r\n                            STOP TIMER\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            ) : (\r\n                // Standard Layout\r\n                <div className=\"mt-1 rounded-lg px-3 py-2 flex flex-col sm:flex-row sm:items-center justify-between gap-3 bg-slate-50/50 border border-slate-100 hover:bg-slate-50 transition-colors\">\r\n                    {/* Estimation */}\r\n                    <div className=\"flex items-center gap-4 text-xs pl-7 sm:pl-0\">\r\n                        <div className=\"flex items-center gap-1.5\">\r\n                            <span className=\"text-slate-500\">Ë¶ãÁ©ç</span>\r\n                            <div className=\"relative\">\r\n                                <input\r\n                                    type=\"number\"\r\n                                    min=\"0\"\r\n                                    className=\"w-14 rounded border border-slate-200/60 bg-white px-1.5 py-0.5 text-right font-medium focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500\"\r\n                                    placeholder=\"0\"\r\n                                    value={est ?? \"\"}\r\n                                    onChange={(e) => onChangeEstimated(task.id, e.target.value)}\r\n                                />\r\n                                <span className=\"ml-1 text-slate-400\">ÂàÜ</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {est != null && (\r\n                            <div className=\"flex items-center gap-1.5\">\r\n                                <span className=\"text-slate-400\">Â∑ÆÂàÜ</span>\r\n                                <span className={diffClass}>{diffLabel}</span>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Actual & Control */}\r\n                    <div className=\"flex items-center justify-between sm:justify-end gap-4 flex-1\">\r\n                        <div className=\"flex items-baseline gap-1.5\">\r\n                            <span className=\"text-xs text-slate-500\">ÂÆüÁ∏æ</span>\r\n                            <span className=\"font-mono text-base font-bold text-slate-700 tabular-nums\">\r\n                                {timeStr}\r\n                            </span>\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center gap-2\">\r\n                            {/* Focus Mode Button */}\r\n                            <a\r\n                                href={`/focus?reportId=${new URL(window.location.href).pathname.split(\"/\").pop()}&taskId=${task.id}`}\r\n                                className=\"flex items-center gap-1.5 bg-indigo-500 hover:bg-indigo-600 text-white px-2 py-1.5 rounded-md text-xs font-bold shadow-sm transition-all hover:scale-105 active:scale-95\"\r\n                                title=\"„Éï„Ç©„Éº„Ç´„Çπ„É¢„Éº„Éâ„ÅßÈõÜ‰∏≠\"\r\n                            >\r\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" className=\"w-4 h-4\">\r\n                                    <path fillRule=\"evenodd\" d=\"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm14.024-.983a1.125 1.125 0 0 1 0 1.966l-5.603 3.113A1.125 1.125 0 0 1 9 15.113V8.887c0-.857.921-1.4 1.671-.983l5.603 3.113Z\" clipRule=\"evenodd\" />\r\n                                </svg>\r\n                            </a>\r\n\r\n                            {/* Start Button */}\r\n                            <button\r\n                                onClick={() => onStartTimer(task.id)}\r\n                                className=\"flex items-center gap-1.5 bg-slate-900 hover:bg-slate-700 text-white px-3 py-1.5 rounded-md text-xs font-bold shadow-sm transition-all hover:scale-105 active:scale-95\"\r\n                            >\r\n                                <span className=\"w-0 h-0 border-l-[6px] border-l-white border-y-[4px] border-y-transparent block ml-0.5\" />\r\n                                START\r\n                            </button>\r\n\r\n                            <button\r\n                                onClick={() => onDelete(task.id)}\r\n                                className=\"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors ml-1\"\r\n                                title=\"ÂâäÈô§\"\r\n                            >\r\n                                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"></path></svg>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1734, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hinat/projects/weekly-report-app/src/components/task/TaskList.tsx"],"sourcesContent":["import React, { useMemo, useState } from \"react\";\r\nimport { type Task, type TaskStatus, type TaskPriority } from \"@/lib/reportUtils\";\r\nimport { TaskItem } from \"./TaskItem\";\r\nimport {\r\n    DndContext,\r\n    closestCenter,\r\n    KeyboardSensor,\r\n    PointerSensor,\r\n    useSensor,\r\n    useSensors,\r\n    DragEndEvent,\r\n} from '@dnd-kit/core';\r\nimport {\r\n    arrayMove,\r\n    SortableContext,\r\n    sortableKeyboardCoordinates,\r\n    verticalListSortingStrategy,\r\n} from '@dnd-kit/sortable';\r\n\r\ntype Props = {\r\n    tasks: Task[];\r\n    now: number;\r\n    tags: string[];\r\n\r\n    // Filters\r\n    showTodayOnly: boolean;\r\n    setShowTodayOnly: (v: boolean) => void;\r\n    showCompleted: boolean;\r\n    setShowCompleted: (v: boolean) => void;\r\n    tagFilter: string;\r\n    setTagFilter: (v: string) => void;\r\n\r\n    // Actions\r\n    actions: {\r\n        onChangeStatus: (id: string, status: TaskStatus) => void;\r\n        onChangeTag: (id: string, tag: string) => void;\r\n        onChangePriority: (id: string, priority: string) => void;\r\n        onChangeEstimated: (id: string, value: string) => void;\r\n        onToggleToday: (id: string) => void;\r\n        onStartTimer: (id: string) => void;\r\n        onStopTimer: (id: string) => void;\r\n        onDelete: (id: string) => void;\r\n        // New: Reorder callback\r\n        onReorder?: (newTasks: Task[]) => void;\r\n    };\r\n};\r\n\r\nexport function TaskList({\r\n    tasks,\r\n    now,\r\n    tags,\r\n    showTodayOnly,\r\n    setShowTodayOnly,\r\n    showCompleted,\r\n    setShowCompleted,\r\n    tagFilter,\r\n    setTagFilter,\r\n    actions,\r\n}: Props) {\r\n    const sensors = useSensors(\r\n        useSensor(PointerSensor, {\r\n            // Require slight movement to prevent drag when clicking inputs\r\n            activationConstraint: {\r\n                distance: 8,\r\n            },\r\n        }),\r\n        useSensor(KeyboardSensor, {\r\n            coordinateGetter: sortableKeyboardCoordinates,\r\n        })\r\n    );\r\n\r\n    // Filter tasks\r\n    const visibleTasks = useMemo(() => {\r\n        // NOTE: In DnD mode, we display tasks explicitly ordered by the user (the 'tasks' array order).\r\n        // We do *not* automatically sort by priority/status anymore to allow manual organization.\r\n\r\n        return tasks.filter((t) => {\r\n            if (showTodayOnly && !t.isToday) return false;\r\n            if (!showCompleted && t.status === \"done\") return false;\r\n            if (tagFilter !== \"all\" && t.tag !== tagFilter) return false;\r\n            return true;\r\n        });\r\n    }, [tasks, showTodayOnly, showCompleted, tagFilter]);\r\n\r\n    function handleDragEnd(event: DragEndEvent) {\r\n        const { active, over } = event;\r\n\r\n        if (over && active.id !== over.id) {\r\n            const oldIndex = tasks.findIndex((t) => t.id === active.id);\r\n            const newIndex = tasks.findIndex((t) => t.id === over.id);\r\n\r\n            if (oldIndex !== -1 && newIndex !== -1) {\r\n                const newTasks = arrayMove(tasks, oldIndex, newIndex);\r\n                actions.onReorder?.(newTasks);\r\n            }\r\n        }\r\n    }\r\n\r\n    if (tasks.length === 0) {\r\n        return (\r\n            <div className=\"rounded-xl border border-dashed border-slate-300 bg-slate-50/50 p-8 text-center backdrop-blur-sm\">\r\n                <p className=\"text-slate-500 font-medium\">„Åæ„Å†„Çø„Çπ„ÇØ„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</p>\r\n                <p className=\"text-sm text-slate-400 mt-1\">‰∏ä„ÅÆ„Éï„Ç©„Éº„É†„Åã„Çâ„ÄÅ‰ªäÈÄ±„ÇÑ„Çã„Åì„Å®„ÇíËøΩÂä†„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <section className=\"space-y-4\">\r\n            {/* Filters Header */}\r\n            <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-3 sticky top-0 z-10 bg-slate-50/80 backdrop-blur-md py-3 px-1 border-b border-slate-200/50 transition-all rounded-b-lg -mx-1\">\r\n                <div className=\"flex items-center gap-2 px-2\">\r\n                    <h2 className=\"text-lg font-bold text-slate-800 flex items-center gap-2\">\r\n                        üìã „Çø„Çπ„ÇØ‰∏ÄË¶ß\r\n                        <span className=\"text-xs font-normal text-slate-500 bg-slate-200/50 px-2 py-0.5 rounded-full\">\r\n                            {visibleTasks.length} / {tasks.length}\r\n                        </span>\r\n                    </h2>\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-2 overflow-x-auto pb-1 sm:pb-0 scrollbar-hide px-2\">\r\n                    {/* Tag Filter */}\r\n                    <select\r\n                        className=\"text-xs border border-slate-200 rounded-lg px-2 py-1.5 bg-white/80 text-slate-700 hover:border-indigo-300 cursor-pointer focus:outline-none focus:border-indigo-500 shadow-sm\"\r\n                        value={tagFilter}\r\n                        onChange={(e) => setTagFilter(e.target.value)}\r\n                    >\r\n                        <option value=\"all\">„Åô„Åπ„Å¶„ÅÆ„Çø„Ç∞</option>\r\n                        {tags.map(t => <option key={t} value={t}>{t}</option>)}\r\n                    </select>\r\n\r\n                    {/* Toggle Today */}\r\n                    <button\r\n                        onClick={() => setShowTodayOnly(!showTodayOnly)}\r\n                        className={`text-xs px-3 py-1.5 rounded-lg border transition-all whitespace-nowrap shadow-sm ${showTodayOnly\r\n                            ? \"bg-indigo-50 border-indigo-200 text-indigo-700 font-bold\"\r\n                            : \"bg-white/80 border-slate-200 text-slate-600 hover:bg-slate-50\"\r\n                            }`}\r\n                    >\r\n                        Today\r\n                    </button>\r\n\r\n                    {/* Toggle Completed */}\r\n                    <button\r\n                        onClick={() => setShowCompleted(!showCompleted)}\r\n                        className={`text-xs px-3 py-1.5 rounded-lg border transition-all whitespace-nowrap shadow-sm ${showCompleted\r\n                            ? \"bg-slate-100 border-slate-200 text-slate-700\"\r\n                            : \"bg-white/80 border-slate-200 text-slate-400 hover:text-slate-600\"\r\n                            }`}\r\n                    >\r\n                        {showCompleted ? \"ÂÆå‰∫Ü„ÇíÈö†„Åô\" : \"ÂÆå‰∫Ü„ÇíË°®Á§∫\"}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {visibleTasks.length === 0 ? (\r\n                <div className=\"py-12 text-center border rounded-xl bg-white/50 backdrop-blur-sm\">\r\n                    <p className=\"text-slate-400\">Ë°®Á§∫„Åô„Çã„Çø„Çπ„ÇØ„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</p>\r\n                    <p className=\"text-xs text-slate-400 mt-1\">„Éï„Ç£„É´„ÇøÊù°‰ª∂„ÇíÂ§âÊõ¥„Åó„Å¶„Åø„Å¶„Åè„Å†„Åï„ÅÑ</p>\r\n                </div>\r\n            ) : (\r\n                <DndContext\r\n                    sensors={sensors}\r\n                    collisionDetection={closestCenter}\r\n                    onDragEnd={handleDragEnd}\r\n                >\r\n                    <SortableContext\r\n                        items={visibleTasks.map(t => t.id)}\r\n                        strategy={verticalListSortingStrategy}\r\n                    >\r\n                        <div className=\"flex flex-col gap-3\">\r\n                            {visibleTasks.map(task => (\r\n                                <TaskItem\r\n                                    key={task.id}\r\n                                    task={task}\r\n                                    now={now}\r\n                                    tags={tags}\r\n                                    {...actions}\r\n                                />\r\n                            ))}\r\n                        </div>\r\n                    </SortableContext>\r\n                </DndContext>\r\n            )}\r\n        </section>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1975, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hinat/projects/weekly-report-app/src/components/report/ReportSummary.tsx"],"sourcesContent":["import React, { useMemo } from \"react\";\r\nimport {\r\n    Task,\r\n    TaskStatus,\r\n    STATUS_ORDER,\r\n    STATUS_LABEL,\r\n    getTotalActualSeconds,\r\n    formatHMFromSecondsSimple,\r\n    clamp,\r\n    formatAvgDiff,\r\n    pickTopTagsBySeconds,\r\n    getTagColor,\r\n    cn\r\n} from \"@/lib/reportUtils\";\r\n\r\ntype Props = {\r\n    tasks: Task[];\r\n    now: number;\r\n};\r\n\r\nexport function ReportSummary({ tasks, now }: Props) {\r\n    const summary = useMemo(() => {\r\n        let totalEst = 0;\r\n        let estCount = 0;\r\n        let totalActSec = 0;\r\n        let totalDiff = 0;\r\n        let diffCount = 0;\r\n\r\n        for (const t of tasks) {\r\n            const act = getTotalActualSeconds(t, now);\r\n            totalActSec += act;\r\n\r\n            if (t.estimatedMinutes != null) {\r\n                totalEst += t.estimatedMinutes;\r\n                estCount++;\r\n                const actMin = Math.floor(act / 60);\r\n                totalDiff += (actMin - t.estimatedMinutes);\r\n                diffCount++;\r\n            }\r\n        }\r\n\r\n        const avgDiff = diffCount > 0 ? totalDiff / diffCount : null;\r\n\r\n        return {\r\n            totalEst,\r\n            estCount,\r\n            totalActSec,\r\n            avgDiff\r\n        };\r\n    }, [tasks, now]);\r\n\r\n    const statusStats = useMemo(() => {\r\n        const res: Record<string, { count: number; sec: number }> = {};\r\n        STATUS_ORDER.forEach(s => res[s] = { count: 0, sec: 0 });\r\n\r\n        for (const t of tasks) {\r\n            if (!res[t.status]) continue; // safety\r\n            res[t.status].count++;\r\n            res[t.status].sec += getTotalActualSeconds(t, now);\r\n        }\r\n        return res;\r\n    }, [tasks, now]);\r\n\r\n    // Re-use logic from util or just do it here for tags\r\n    const topTags = useMemo(() => pickTopTagsBySeconds(tasks, now, 5), [tasks, now]);\r\n\r\n    const avgDiffData = formatAvgDiff(summary.avgDiff);\r\n\r\n    if (tasks.length === 0) return null;\r\n\r\n    // New stats object for the updated UI\r\n    const stats = useMemo(() => {\r\n        const totalCount = tasks.length;\r\n        const doneCount = statusStats.done.count;\r\n        const totalActualSeconds = summary.totalActSec;\r\n        const topTagsData = pickTopTagsBySeconds(tasks, now, 5); // Re-calculate or use existing topTags\r\n\r\n        return {\r\n            totalCount,\r\n            doneCount,\r\n            totalActualSeconds,\r\n            topTags: topTagsData,\r\n        };\r\n    }, [tasks, now, summary, statusStats]);\r\n\r\n    const avgDiffStyle = formatAvgDiff(summary.avgDiff);\r\n\r\n    return (\r\n        <div className=\"space-y-6 mt-6 pt-6 border-t border-slate-200\">\r\n            <section className=\"space-y-6\">\r\n                <div className=\"flex items-center gap-2\">\r\n                    <h2 className=\"text-lg font-bold text-slate-800\">üìä ‰ªäÈÄ±„ÅÆ„Çµ„Éû„É™„Éº</h2>\r\n                    <span className=\"text-xs text-slate-500 bg-slate-100 px-2 py-0.5 rounded-full\">Real-time</span>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    {/* Left: Overall Progress */}\r\n                    <div className=\"bg-white rounded-xl border border-slate-200 p-5 shadow-sm space-y-4\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <h3 className=\"text-sm font-bold text-slate-600\">„Çø„Çπ„ÇØÊ∂àÂåñÁä∂Ê≥Å</h3>\r\n                            <span className=\"text-2xl font-black text-slate-800\">\r\n                                {stats.doneCount}<span className=\"text-sm text-slate-400 font-medium ml-1\">/ {stats.totalCount}</span>\r\n                            </span>\r\n                        </div>\r\n\r\n                        {/* Progress Bar */}\r\n                        <div className=\"space-y-2\">\r\n                            <div className=\"h-3 w-full bg-slate-100 rounded-full overflow-hidden\">\r\n                                <div\r\n                                    className=\"h-full bg-indigo-500 rounded-full transition-all duration-1000 ease-out relative overflow-hidden\"\r\n                                    style={{ width: `${stats.totalCount > 0 ? (stats.doneCount / stats.totalCount) * 100 : 0}%` }}\r\n                                >\r\n                                    <div className=\"absolute inset-0 bg-white/20 animate-[shimmer_2s_infinite]\" />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"flex justify-between text-xs text-slate-500\">\r\n                                <span>{stats.totalCount > 0 ? Math.round((stats.doneCount / stats.totalCount) * 100) : 0}% Complete</span>\r\n                                <span>ÊÆã„Çä {stats.totalCount - stats.doneCount}‰ª∂</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"pt-4 border-t border-slate-100 grid grid-cols-2 gap-4\">\r\n                            <div>\r\n                                <p className=\"text-xs text-slate-400\">ÂêàË®àÁ®ºÂÉçÊôÇÈñì</p>\r\n                                <p className=\"text-lg font-bold text-slate-700 font-mono\">\r\n                                    {formatHMFromSecondsSimple(stats.totalActualSeconds)}\r\n                                </p>\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"text-xs text-slate-400\">Âπ≥ÂùáË¶ãÁ©çÂ∑ÆÂàÜ</p>\r\n                                <p className={cn(\"text-lg font-bold font-mono\", avgDiffStyle.className)}>\r\n                                    {avgDiffStyle.label}\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Right: Tag Distribution (Visual) */}\r\n                    <div className=\"bg-white rounded-xl border border-slate-200 p-5 shadow-sm space-y-4\">\r\n                        <h3 className=\"text-sm font-bold text-slate-600\">„Çø„Ç∞Âà•ÊôÇÈñì„ÅÆ‰Ωø„ÅÑÊñπ</h3>\r\n                        {stats.topTags.length === 0 ? (\r\n                            <div className=\"h-32 flex items-center justify-center text-slate-400 text-xs text-center border-2 border-dashed border-slate-100 rounded-lg\">\r\n                                „Éá„Éº„Çø„Åå„ÅÇ„Çä„Åæ„Åõ„Çì<br />„Çø„Ç§„Éû„Éº„Çí‰Ωø„Å£„Å¶Ë®àÊ∏¨„Åó„Åæ„Åó„Çá„ÅÜ\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"space-y-3\">\r\n                                {stats.topTags.slice(0, 4).map((row, i) => {\r\n                                    const pct = Math.round((row.sec / Math.max(stats.totalActualSeconds, 1)) * 100);\r\n                                    return (\r\n                                        <div key={row.tag} className=\"space-y-1\">\r\n                                            <div className=\"flex justify-between text-xs\">\r\n                                                <span className=\"font-medium text-slate-700\">{row.tag}</span>\r\n                                                <span className=\"text-slate-500\">{formatHMFromSecondsSimple(row.sec)} ({pct}%)</span>\r\n                                            </div>\r\n                                            <div className=\"h-2 w-full bg-slate-50 rounded-full overflow-hidden\">\r\n                                                <div\r\n                                                    className={cn(\"h-full rounded-full opacity-80\", getTagColor(row.tag).replace(\"bg-\", \"bg-\").replace(\"text-\", \"\").replace(\"border-\", \"\"))}\r\n                                                    style={{\r\n                                                        width: `${pct}%`,\r\n                                                        backgroundColor: 'currentColor',\r\n                                                        color: 'inherit'\r\n                                                    }}\r\n                                                >\r\n                                                    <div className={cn(\"w-full h-full\", getTagColor(row.tag).split(\" \")[0].replace(\"bg-\", \"bg-\"))} />\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </section>\r\n\r\n            <div className=\"grid md:grid-cols-2 gap-4\">\r\n                {/* Status Table */}\r\n                <div className=\"rounded-xl border border-slate-200 bg-white p-4\">\r\n                    <h3 className=\"text-sm font-bold text-slate-700 mb-3\">„Çπ„ÉÜ„Éº„Çø„ÇπÂà•</h3>\r\n                    <table className=\"w-full text-sm text-left\">\r\n                        <thead className=\"text-xs text-slate-400 border-b\">\r\n                            <tr>\r\n                                <th className=\"pb-2 font-medium\">Status</th>\r\n                                <th className=\"pb-2 font-medium\">Count</th>\r\n                                <th className=\"pb-2 font-medium\">Time</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"divide-y divide-slate-50\">\r\n                            {STATUS_ORDER.map(s => (\r\n                                <tr key={s}>\r\n                                    <td className=\"py-2 text-slate-700\">{STATUS_LABEL[s]}</td>\r\n                                    <td className=\"py-2 text-slate-600 font-medium\">{statusStats[s].count}</td>\r\n                                    <td className=\"py-2 text-slate-500 tabular-nums\">\r\n                                        {statusStats[s].sec > 0 ? formatHMFromSecondsSimple(statusStats[s].sec) : \"‚Äî\"}\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n\r\n                {/* Tag Table */}\r\n                <div className=\"rounded-xl border border-slate-200 bg-white p-4\">\r\n                    <h3 className=\"text-sm font-bold text-slate-700 mb-3\">„Çø„Ç∞Âà•ÔºàTop 5Ôºâ</h3>\r\n                    {topTags.length === 0 ? (\r\n                        <div className=\"h-24 flex items-center justify-center text-xs text-slate-400\">ÂÆüÁ∏æ„Éá„Éº„Çø„Å™„Åó</div>\r\n                    ) : (\r\n                        <table className=\"w-full text-sm text-left\">\r\n                            <thead className=\"text-xs text-slate-400 border-b\">\r\n                                <tr>\r\n                                    <th className=\"pb-2 font-medium\">Tag</th>\r\n                                    <th className=\"pb-2 font-medium\">Time</th>\r\n                                    <th className=\"pb-2 font-medium\">Share</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody className=\"divide-y divide-slate-50\">\r\n                                {topTags.map(row => {\r\n                                    const percent = summary.totalActSec > 0 ? Math.round((row.sec / summary.totalActSec) * 100) : 0;\r\n                                    return (\r\n                                        <tr key={row.tag}>\r\n                                            <td className=\"py-2 text-slate-700\">{row.tag}</td>\r\n                                            <td className=\"py-2 text-slate-600 tabular-nums\">{formatHMFromSecondsSimple(row.sec)}</td>\r\n                                            <td className=\"py-2\">\r\n                                                <div className=\"flex items-center gap-2\">\r\n                                                    <div className=\"w-12 h-1.5 bg-slate-100 rounded-full overflow-hidden\">\r\n                                                        <div className=\"h-full bg-indigo-500\" style={{ width: `${percent}%` }} />\r\n                                                    </div>\r\n                                                    <span className=\"text-xs text-slate-400 tabular-nums\">{percent}%</span>\r\n                                                </div>\r\n                                            </td>\r\n                                        </tr>\r\n                                    );\r\n                                })}\r\n                            </tbody>\r\n                        </table>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2650, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hinat/projects/weekly-report-app/src/components/report/ReportReflection.tsx"],"sourcesContent":["import React from \"react\";\r\nimport { generateReflectionText, Task } from \"@/lib/reportUtils\";\r\n\r\ntype Props = {\r\n    weeklyNote: string;\r\n    setWeeklyNote: React.Dispatch<React.SetStateAction<string>>;\r\n    noteSavedMessage: string;\r\n    tasks: Task[];\r\n    now: number;\r\n};\r\n\r\nconst NOTE_TEMPLATE =\r\n    \"## üéØ ‰ªäÈÄ±„ÅÆÁõÆÊ®ô„Éª„ÉÜ„Éº„Éû\\n\\n\\n\" +\r\n    \"## üôå KPT - Keep (ËâØ„Åã„Å£„Åü„Åì„Å®„ÉªÁ∂ö„Åë„Åü„ÅÑ„Åì„Å®)\\n\\n\\n\" +\r\n    \"## üí¶ KPT - Problem (Âõ∞„Å£„Åü„Åì„Å®„ÉªË™≤È°å)\\n\\n\\n\" +\r\n    \"## üöÄ KPT - Try (Ê¨°ÈÄ±„ÇÑ„Çã„Åì„Å®„ÉªÊîπÂñÑÁ≠ñ)\\n\\n\\n\" +\r\n    \"## üìù „Åù„ÅÆ‰ªñ„Éª„Éï„É™„Éº„É°„É¢\\n\";\r\n\r\nexport function ReportReflection({ weeklyNote, setWeeklyNote, noteSavedMessage, tasks, now }: Props) {\r\n\r\n    const handleInsertTemplate = () => {\r\n        const trimmed = weeklyNote.trim();\r\n        if (trimmed === \"\") {\r\n            setWeeklyNote(NOTE_TEMPLATE);\r\n        } else {\r\n            const sep = weeklyNote.endsWith(\"\\n\") ? \"\\n\\n\" : \"\\n\\n\\n\";\r\n            setWeeklyNote((prev) => prev + sep + NOTE_TEMPLATE);\r\n        }\r\n    };\r\n\r\n    const handleAppendAutoReflection = () => {\r\n        const snippet = generateReflectionText(tasks, now, 5);\r\n        setWeeklyNote((prev) => {\r\n            const trimmed = prev.trim();\r\n            if (!trimmed) return snippet + \"\\n\";\r\n            const sep = prev.endsWith(\"\\n\") ? \"\\n\\n\" : \"\\n\\n\";\r\n            return prev + sep + snippet + \"\\n\";\r\n        });\r\n    };\r\n\r\n    return (\r\n        <section className=\"space-y-3 pt-6 border-t border-slate-200\">\r\n            <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                    <h2 className=\"text-lg font-bold text-slate-800\">üìù ÈÄ±Ê¨°„Åµ„Çä„Åã„Åà„Çä„É°„É¢</h2>\r\n                    <p className=\"text-xs text-slate-500\">ÂÖ•ÂäõÂÜÖÂÆπ„ÅØËá™Âãï‰øùÂ≠ò„Åï„Çå„Åæ„Åô„ÄÇ</p>\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={handleInsertTemplate}\r\n                        className=\"text-xs font-medium text-slate-600 hover:bg-slate-100 border border-slate-300 px-3 py-1.5 rounded-lg transition-colors\"\r\n                    >\r\n                        „ÉÜ„É≥„Éó„É¨ÊåøÂÖ•\r\n                    </button>\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={handleAppendAutoReflection}\r\n                        disabled={tasks.length === 0}\r\n                        className=\"text-xs font-medium text-indigo-700 bg-indigo-50 hover:bg-indigo-100 border border-indigo-200 px-3 py-1.5 rounded-lg transition-colors disabled:opacity-50\"\r\n                    >\r\n                        ‚ú® Ëá™ÂãïÁîüÊàê„ÇíËøΩË®ò\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"relative\">\r\n                <textarea\r\n                    className=\"w-full min-h-[400px] rounded-xl border border-slate-300 px-4 py-3 text-sm leading-relaxed text-slate-800 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 resize-y\"\r\n                    value={weeklyNote}\r\n                    onChange={(e) => setWeeklyNote(e.target.value)}\r\n                    placeholder=\"„Åì„Åì„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶„ÄÅ‰ªäÈÄ±„ÅÆÊåØ„ÇäËøî„Çä„ÇÑ„É°„É¢„ÇíËá™Áî±„Å´Ë®òËø∞„Åó„Å¶„Åè„Å†„Åï„ÅÑ...\"\r\n                />\r\n                <div className=\"absolute bottom-3 right-3\">\r\n                    {noteSavedMessage && (\r\n                        <span className=\"text-xs font-medium text-emerald-600 bg-white/80 px-2 py-1 rounded shadow-sm\">\r\n                            {noteSavedMessage}\r\n                        </span>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;;;AAUA,MAAM,gBACF,0BACA,2CACA,yCACA,uCACA;AAEG,SAAS,iBAAiB,EAAE,UAAU,EAAE,aAAa,EAAE,gBAAgB,EAAE,KAAK,EAAE,GAAG,EAAS;IAE/F,MAAM,uBAAuB;QACzB,MAAM,UAAU,WAAW,IAAI;QAC/B,IAAI,YAAY,IAAI;YAChB,cAAc;QAClB,OAAO;YACH,MAAM,MAAM,WAAW,QAAQ,CAAC,QAAQ,SAAS;YACjD,cAAc,CAAC,OAAS,OAAO,MAAM;QACzC;IACJ;IAEA,MAAM,6BAA6B;QAC/B,MAAM,UAAU,IAAA,mJAAsB,EAAC,OAAO,KAAK;QACnD,cAAc,CAAC;YACX,MAAM,UAAU,KAAK,IAAI;YACzB,IAAI,CAAC,SAAS,OAAO,UAAU;YAC/B,MAAM,MAAM,KAAK,QAAQ,CAAC,QAAQ,SAAS;YAC3C,OAAO,OAAO,MAAM,UAAU;QAClC;IACJ;IAEA,qBACI,8OAAC;QAAQ,WAAU;;0BACf,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;;0CACG,8OAAC;gCAAG,WAAU;0CAAmC;;;;;;0CACjD,8OAAC;gCAAE,WAAU;0CAAyB;;;;;;;;;;;;kCAE1C,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCACG,MAAK;gCACL,SAAS;gCACT,WAAU;0CACb;;;;;;0CAGD,8OAAC;gCACG,MAAK;gCACL,SAAS;gCACT,UAAU,MAAM,MAAM,KAAK;gCAC3B,WAAU;0CACb;;;;;;;;;;;;;;;;;;0BAMT,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBACG,WAAU;wBACV,OAAO;wBACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;wBAC7C,aAAY;;;;;;kCAEhB,8OAAC;wBAAI,WAAU;kCACV,kCACG,8OAAC;4BAAK,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAO7B"}},
    {"offset": {"line": 2789, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hinat/projects/weekly-report-app/src/components/report/ReportActions.tsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { generateCsvText, Task, generateSlackText, generateNotionText, Report } from \"@/lib/reportUtils\";\r\n\r\ntype Props = {\r\n    id: string; // Report ID\r\n    report: Report; // We need the full report object for smart copy\r\n    tasks: Task[];\r\n    now: number;\r\n    weeklyNote: string;\r\n    onRestore: (tasks: unknown[], note: string) => void;\r\n    onDeleteAllTasks: () => void;\r\n};\r\n\r\nexport function ReportActions({ id, report, tasks, now, weeklyNote, onRestore, onDeleteAllTasks }: Props) {\r\n    const [csvCopied, setCsvCopied] = useState(false);\r\n    const [backupJson, setBackupJson] = useState(\"\");\r\n    const [backupMsg, setBackupMsg] = useState(\"\");\r\n    const [copyStatus, setCopyStatus] = useState<\"idle\" | \"slack\" | \"notion\">(\"idle\");\r\n\r\n    const handleCopy = async (target: \"slack\" | \"notion\") => {\r\n        const text = target === \"slack\"\r\n            ? generateSlackText(report, tasks, weeklyNote)\r\n            : generateNotionText(report, tasks, weeklyNote);\r\n\r\n        try {\r\n            await navigator.clipboard.writeText(text);\r\n            setCopyStatus(target);\r\n            setTimeout(() => setCopyStatus(\"idle\"), 2000);\r\n        } catch (err) {\r\n            console.error(\"Failed to copy\", err);\r\n            alert(\"„Ç≥„Éî„Éº„Å´Â§±Êïó„Åó„Åæ„Åó„Åü\");\r\n        }\r\n    };\r\n\r\n    // CSV\r\n    const csvText = React.useMemo(() => generateCsvText(tasks, now), [tasks, now]);\r\n\r\n    const handleCopyCsv = async () => {\r\n        if (!csvText) return;\r\n        try {\r\n            await navigator.clipboard.writeText(csvText);\r\n            setCsvCopied(true);\r\n            setTimeout(() => setCsvCopied(false), 2000);\r\n        } catch {\r\n            alert(\"„Ç≥„Éî„Éº„Å´Â§±Êïó„Åó„Åæ„Åó„Åü\");\r\n        }\r\n    };\r\n\r\n    // Backup\r\n    const handleExportBackup = async () => {\r\n        const payload = {\r\n            version: 1,\r\n            reportId: id,\r\n            exportedAt: new Date().toISOString(),\r\n            tasks,\r\n            weeklyNote\r\n        };\r\n        const text = JSON.stringify(payload, null, 2);\r\n        setBackupJson(text);\r\n        try {\r\n            await navigator.clipboard.writeText(text);\r\n            setBackupMsg(\"JSON„Çí‰ΩúÊàê„Åó„Å¶„Ç≥„Éî„Éº„Åó„Åæ„Åó„Åü\");\r\n        } catch {\r\n            setBackupMsg(\"JSON„Çí‰ΩúÊàê„Åó„Åæ„Åó„ÅüÔºà„Ç≥„Éî„ÉºÂ§±ÊïóÔºâ\");\r\n        }\r\n    };\r\n\r\n    const handleImportBackup = () => {\r\n        if (!backupJson.trim()) return;\r\n        try {\r\n            const parsed = JSON.parse(backupJson);\r\n            if (!parsed || !Array.isArray(parsed.tasks)) throw new Error(\"Invalid format\");\r\n\r\n            const ok = confirm(\"„ÉÜ„Ç≠„Çπ„Éà„Ç®„É™„Ç¢„ÅÆJSONÂÜÖÂÆπ„Åß„Çø„Çπ„ÇØ„Å®„É°„É¢„Çí‰∏äÊõ∏„Åç„Åó„Å¶ËâØ„ÅÑ„Åß„Åô„ÅãÔºü\");\r\n            if (ok) {\r\n                onRestore(parsed.tasks, parsed.weeklyNote || \"\");\r\n                setBackupMsg(\"Âæ©ÂÖÉ„Åó„Åæ„Åó„Åü\");\r\n            }\r\n        } catch {\r\n            setBackupMsg(\"JSONÂΩ¢Âºè„ÅåÊ≠£„Åó„Åè„ÅÇ„Çä„Åæ„Åõ„Çì\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <section className=\"space-y-8 pt-8 mt-4 border-t border-slate-200 pb-20\">\r\n            {/* CSV Export */}\r\n            <div className=\"space-y-2\">\r\n                <h2 className=\"text-sm font-bold text-slate-800 flex items-center gap-2\">\r\n                    üìã CSV„Ç®„ÇØ„Çπ„Éù„Éº„Éà\r\n                    <span className=\"text-xs font-normal text-slate-500 bg-slate-100 px-2 py-0.5 rounded\">„Ç≥„Éî„ÉöÁî®</span>\r\n                </h2>\r\n                <div className=\"flex gap-2\">\r\n                    <textarea\r\n                        className=\"flex-1 h-24 text-[11px] font-mono border rounded-lg p-2 bg-slate-50 text-slate-600 focus:outline-none\"\r\n                        readOnly\r\n                        value={csvText}\r\n                        placeholder=\"„Çø„Çπ„ÇØ„ÇíËøΩÂä†„Åô„Çã„Å®CSV„ÅåÁîüÊàê„Åï„Çå„Åæ„Åô\"\r\n                    />\r\n                    <button\r\n                        onClick={handleCopyCsv}\r\n                        className=\"self-start px-4 py-2 bg-white border border-slate-300 text-slate-700 text-xs font-medium rounded-lg hover:bg-slate-50 active:bg-slate-100 transition-colors\"\r\n                    >\r\n                        {csvCopied ? \"„Ç≥„Éî„ÉºÊ∏à\" : \"„Ç≥„Éî„Éº\"}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Slack / Notion Copy and Delete All Tasks */}\r\n            <div className=\"flex flex-col sm:flex-row items-center justify-between gap-4 bg-white/50 p-4 rounded-xl border border-slate-100 backdrop-blur-sm\">\r\n                <div className=\"flex items-center gap-2\">\r\n                    {/* Slack Copy */}\r\n                    <button\r\n                        onClick={() => handleCopy(\"slack\")}\r\n                        className=\"flex items-center gap-2 px-4 py-2 rounded-lg bg-white border border-slate-200 text-slate-600 text-sm font-bold hovering-scale shadow-sm hover:border-[#4A154B] hover:text-[#4A154B] transition-colors\"\r\n                    >\r\n                        {copyStatus === \"slack\" ? (\r\n                            <span className=\"text-emerald-600 flex items-center gap-1\">\r\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n                                    <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\r\n                                </svg>\r\n                                COPIED\r\n                            </span>\r\n                        ) : (\r\n                            <>\r\n                                <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                                    <path d=\"M5.042 15.165a2.528 2.528 0 0 1-2.52 2.523A2.528 2.528 0 0 1 0 15.165a2.527 2.527 0 0 1 2.522-2.52h2.52v2.52zM6.313 15.165a2.527 2.527 0 0 1 2.521-2.52 2.527 2.527 0 0 1 2.521 2.52v6.313A2.528 2.528 0 0 1 8.834 24a2.528 2.528 0 0 1-2.521-2.52v-6.315zm8.853-8.887a2.528 2.528 0 0 1 2.521-2.521A2.528 2.528 0 0 1 20.208 6.278a2.528 2.528 0 0 1-2.52 2.52h-2.522V6.278zm-1.26 0a2.528 2.528 0 0 1-2.521 2.521 2.527 2.527 0 0 1-2.52-2.521V0a2.528 2.528 0 0 1 2.52 2.521v6.313zM6.313 6.313a2.528 2.528 0 0 1-2.521 2.521 2.528 2.528 0 0 1-2.52 0 2.528 2.528 0 0 1 2.52-2.52H6.313v2.52zm0 2.52h6.313a2.528 2.528 0 0 1 2.521 2.521 2.528 2.528 0 0 1-2.521 2.521H6.313A2.528 2.528 0 0 1 3.792 11.374a2.528 2.528 0 0 1 2.521-2.541zM20.208 17.688a2.528 2.528 0 0 1-2.52 2.52h-6.313a2.528 2.528 0 0 1-2.521-2.52 2.528 2.528 0 0 1 2.521-2.521h6.313a2.528 2.528 0 0 1 2.52 2.521z\" />\r\n                                </svg>\r\n                                Slack Copy\r\n                            </>\r\n                        )}\r\n                    </button>\r\n\r\n                    {/* Notion Copy */}\r\n                    <button\r\n                        onClick={() => handleCopy(\"notion\")}\r\n                        className=\"flex items-center gap-2 px-4 py-2 rounded-lg bg-white border border-slate-200 text-slate-600 text-sm font-bold hovering-scale shadow-sm hover:border-slate-800 hover:text-slate-800 transition-colors\"\r\n                    >\r\n                        {copyStatus === \"notion\" ? (\r\n                            <span className=\"text-emerald-600 flex items-center gap-1\">\r\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n                                    <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\r\n                                </svg>\r\n                                COPIED\r\n                            </span>\r\n                        ) : (\r\n                            <>\r\n                                <svg className=\"w-4 h-4\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                                    <path d=\"M4.459 4.208c.746-3.167 3.226-4.208 7.426-4.208 4.2 0 6.679 1.041 7.426 4.208.157.665.23 1.636.23 2.929v10.709c0 3.385-1.936 6.154-7.656 6.154-5.721 0-7.656-2.769-7.656-6.154V7.137c0-1.293.073-2.264.23-2.929zm12.35 2.951c.148 0 .27-.119.27-.272a27.18 27.18 0 0 0-.175-3.074c-.234-2.029-2.03-2.7-4.998-2.7-2.969 0-4.764.671-4.998 2.7-.091.772-.15 1.794-.175 3.074a.273.273 0 0 0 .27.272h9.807z\" />\r\n                                </svg>\r\n                                Notion Copy\r\n                            </>\r\n                        )}\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"flex gap-2\">\r\n                    <button\r\n                        onClick={() => {\r\n                            if (confirm(\"ÂÖ®„Å¶„ÅÆ„Çø„Çπ„ÇØ„ÇíÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü„Åì„ÅÆÊìç‰Ωú„ÅØÂèñ„ÇäÊ∂à„Åõ„Åæ„Åõ„Çì„ÄÇ\")) {\r\n                                onDeleteAllTasks();\r\n                            }\r\n                        }}\r\n                        className=\"flex items-center gap-2 px-4 py-2 rounded-lg text-rose-500 hover:bg-rose-50 hover:text-rose-600 transition-colors text-xs font-bold\"\r\n                    >\r\n                        üóëÔ∏è ÂÖ®„Çø„Çπ„ÇØÂâäÈô§\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Backup / Restore */}\r\n            <div className=\"space-y-2\">\r\n                <h2 className=\"text-sm font-bold text-slate-800 flex items-center gap-2\">\r\n                    üì¶ „Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó / Âæ©ÂÖÉ\r\n                </h2>\r\n                <p className=\"text-xs text-slate-500\">\r\n                    „Åì„ÅÆÈÄ±Â†±„Éá„Éº„Çø„ÇíJSON„ÉÜ„Ç≠„Çπ„Éà„Å®„Åó„Å¶‰øùÂ≠ò„ÉªÂæ©ÂÖÉ„Åß„Åç„Åæ„Åô„ÄÇ\r\n                </p>\r\n\r\n                <div className=\"bg-slate-50 p-3 rounded-xl border border-slate-200\">\r\n                    <div className=\"flex gap-2 mb-2\">\r\n                        <button\r\n                            onClick={handleExportBackup}\r\n                            className=\"text-xs bg-slate-800 text-white px-3 py-1.5 rounded-md hover:bg-slate-700\"\r\n                        >\r\n                            „Éê„ÉÉ„ÇØ„Ç¢„ÉÉ„Éó‰ΩúÊàêÔºà„Ç≥„Éî„ÉºÔºâ\r\n                        </button>\r\n                        <button\r\n                            onClick={handleImportBackup}\r\n                            className=\"text-xs bg-white border border-slate-300 text-slate-700 px-3 py-1.5 rounded-md hover:bg-slate-50\"\r\n                        >\r\n                            JSON„Åã„ÇâÂæ©ÂÖÉÔºàImportÔºâ\r\n                        </button>\r\n                        <span className=\"text-xs text-emerald-600 flex items-center\">{backupMsg}</span>\r\n                    </div>\r\n                    <textarea\r\n                        className=\"w-full h-24 text-[11px] font-mono border border-slate-200 rounded-lg p-2 focus:outline-none focus:border-indigo-500\"\r\n                        value={backupJson}\r\n                        onChange={(e) => setBackupJson(e.target.value)}\r\n                        placeholder=\"„Åì„Åì„Å´JSON„ÅåË°®Á§∫„Åï„Çå„Åæ„Åô„ÄÇÂæ©ÂÖÉ„Åô„ÇãÂ†¥Âêà„ÅØ„ÄÅ‰øùÂ≠ò„Åó„Å¶„Åä„ÅÑ„ÅüJSON„Çí„Åì„Åì„Å´Ë≤º„Çä‰ªò„Åë„Å¶„ÄåImport„Äç„ÇíÊäº„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\"\r\n                    />\r\n                </div>\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}