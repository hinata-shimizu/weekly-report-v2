{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hinat/projects/weekly-report-app/src/app/reports/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { useParams } from \"next/navigation\";\r\n\r\ntype TaskStatus = \"not_decided\" | \"todo\" | \"doing\" | \"done\";\r\n\r\ntype Task = {\r\n  id: string;\r\n  title: string;\r\n  status: TaskStatus;\r\n  estimatedMinutes: number | null; // 見積もり（分）\r\n  actualSeconds: number; // 実績の累計秒\r\n  isRunning: boolean; // タイマー動作中か\r\n  startedAt: number | null; // タイマー開始時刻（Date.now()）\r\n};\r\n\r\nconst STATUS_LABEL: Record<TaskStatus, string> = {\r\n  not_decided: \"未決定\",\r\n  todo: \"未着手\",\r\n  doing: \"進行中\",\r\n  done: \"完了\",\r\n};\r\n\r\nconst STATUS_ORDER: TaskStatus[] = [\"not_decided\", \"todo\", \"doing\", \"done\"];\r\n\r\nexport default function ReportDetailPage() {\r\n  const params = useParams<{ id: string }>();\r\n  const id = String(params.id);\r\n\r\n  const storageKey = `weekly-report-tasks-${id}`;\r\n  const noteStorageKey = `weekly-report-note-${id}`;\r\n\r\n  const [newTitle, setNewTitle] = useState(\"\");\r\n  const [tasks, setTasks] = useState<Task[]>([]);\r\n  const [loaded, setLoaded] = useState(false);\r\n  const [savedMessage, setSavedMessage] = useState(\"\");\r\n  const [now, setNow] = useState<number>(Date.now());\r\n\r\n  const [weeklyNote, setWeeklyNote] = useState(\"\");\r\n  const [noteSavedMessage, setNoteSavedMessage] = useState(\"\");\r\n  const [csvCopiedMessage, setCsvCopiedMessage] = useState(\"\");\r\n\r\n  // 完了タスク表示 ON/OFF\r\n  const [showCompleted, setShowCompleted] = useState(true);\r\n\r\n  // 初回＋ID変化時に localStorage から読み込み\r\n  useEffect(() => {\r\n    if (typeof window === \"undefined\") return;\r\n\r\n    // タスク読み込み\r\n    const raw = window.localStorage.getItem(storageKey);\r\n\r\n    if (!raw) {\r\n      setTasks([]);\r\n    } else {\r\n      try {\r\n        const parsed = JSON.parse(raw) as any[];\r\n        if (Array.isArray(parsed)) {\r\n          const normalized: Task[] = parsed.map((t) => ({\r\n            id: t.id ?? crypto.randomUUID(),\r\n            title: t.title ?? \"\",\r\n            status: (STATUS_ORDER as string[]).includes(t.status)\r\n              ? (t.status as TaskStatus)\r\n              : \"todo\",\r\n            estimatedMinutes:\r\n              typeof t.estimatedMinutes === \"number\" ? t.estimatedMinutes : null,\r\n            actualSeconds:\r\n              typeof t.actualSeconds === \"number\" ? t.actualSeconds : 0,\r\n            isRunning: !!t.isRunning,\r\n            startedAt: typeof t.startedAt === \"number\" ? t.startedAt : null,\r\n          }));\r\n          setTasks(normalized);\r\n        } else {\r\n          setTasks([]);\r\n        }\r\n      } catch (e) {\r\n        console.error(\"failed to parse tasks from localStorage\", e);\r\n        setTasks([]);\r\n      }\r\n    }\r\n\r\n    // メモ読み込み\r\n    const noteRaw = window.localStorage.getItem(noteStorageKey);\r\n    if (typeof noteRaw === \"string\") {\r\n      setWeeklyNote(noteRaw);\r\n    } else {\r\n      setWeeklyNote(\"\");\r\n    }\r\n\r\n    setLoaded(true);\r\n  }, [storageKey, noteStorageKey]);\r\n\r\n  // どれかのタスクが動いている時だけ1秒ごとに now を更新\r\n  useEffect(() => {\r\n    const hasRunning = tasks.some((t) => t.isRunning);\r\n    if (!hasRunning) return;\r\n\r\n    const timerId = setInterval(() => {\r\n      setNow(Date.now());\r\n    }, 1000);\r\n\r\n    return () => clearInterval(timerId);\r\n  }, [tasks]);\r\n\r\n  // tasks が変わるたびに自動保存\r\n  useEffect(() => {\r\n    if (!loaded) return;\r\n    if (typeof window === \"undefined\") return;\r\n\r\n    window.localStorage.setItem(storageKey, JSON.stringify(tasks));\r\n\r\n    if (tasks.length === 0) {\r\n      setSavedMessage(\"\");\r\n      return;\r\n    }\r\n    setSavedMessage(\"自動保存しました\");\r\n    const timer = setTimeout(() => setSavedMessage(\"\"), 1500);\r\n    return () => clearTimeout(timer);\r\n  }, [tasks, loaded, storageKey]);\r\n\r\n  // 週次メモの自動保存\r\n  useEffect(() => {\r\n    if (!loaded) return;\r\n    if (typeof window === \"undefined\") return;\r\n\r\n    window.localStorage.setItem(noteStorageKey, weeklyNote);\r\n\r\n    if (weeklyNote.trim() === \"\") {\r\n      setNoteSavedMessage(\"\");\r\n      return;\r\n    }\r\n    setNoteSavedMessage(\"メモを保存しました\");\r\n    const timer = setTimeout(() => setNoteSavedMessage(\"\"), 1500);\r\n    return () => clearTimeout(timer);\r\n  }, [weeklyNote, loaded, noteStorageKey]);\r\n\r\n  const handleAddTask = () => {\r\n    const trimmed = newTitle.trim();\r\n    if (!trimmed) return;\r\n\r\n    const newTask: Task = {\r\n      id: crypto.randomUUID(),\r\n      title: trimmed,\r\n      status: \"todo\",\r\n      estimatedMinutes: null,\r\n      actualSeconds: 0,\r\n      isRunning: false,\r\n      startedAt: null,\r\n    };\r\n\r\n    setTasks((prev) => [newTask, ...prev]);\r\n    setNewTitle(\"\");\r\n  };\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n    if (e.key === \"Enter\") {\r\n      e.preventDefault();\r\n      handleAddTask();\r\n    }\r\n  };\r\n\r\n  const handleChangeStatus = (taskId: string, status: TaskStatus) => {\r\n    setTasks((prev) =>\r\n      prev.map((task) =>\r\n        task.id === taskId\r\n          ? {\r\n              ...task,\r\n              status,\r\n            }\r\n          : task\r\n      )\r\n    );\r\n  };\r\n\r\n  const handleDelete = (taskId: string) => {\r\n    setTasks((prev) => prev.filter((task) => task.id !== taskId));\r\n  };\r\n\r\n  const handleChangeEstimated = (taskId: string, value: string) => {\r\n    setTasks((prev) =>\r\n      prev.map((task) => {\r\n        if (task.id !== taskId) return task;\r\n        if (value === \"\") {\r\n          return { ...task, estimatedMinutes: null };\r\n        }\r\n        const num = Number(value);\r\n        if (Number.isNaN(num) || num < 0) {\r\n          return task;\r\n        }\r\n        return { ...task, estimatedMinutes: Math.floor(num) };\r\n      })\r\n    );\r\n  };\r\n\r\n  // タイマー開始\r\n  const handleStartTimer = (taskId: string) => {\r\n    const nowTs = Date.now();\r\n    setTasks((prev) =>\r\n      prev.map((task) =>\r\n        task.id === taskId\r\n          ? {\r\n              ...task,\r\n              isRunning: true,\r\n              startedAt: task.startedAt ?? nowTs,\r\n              status: task.status === \"done\" ? task.status : \"doing\",\r\n            }\r\n          : task\r\n      )\r\n    );\r\n  };\r\n\r\n  // タイマー停止\r\n  const handleStopTimer = (taskId: string) => {\r\n    const nowTs = Date.now();\r\n    setTasks((prev) =>\r\n      prev.map((task) => {\r\n        if (task.id !== taskId) return task;\r\n        if (!task.isRunning || !task.startedAt) {\r\n          return { ...task, isRunning: false, startedAt: null };\r\n        }\r\n        const diffSeconds = Math.max(\r\n          0,\r\n          Math.floor((nowTs - task.startedAt) / 1000)\r\n        );\r\n        return {\r\n          ...task,\r\n          isRunning: false,\r\n          startedAt: null,\r\n          actualSeconds: task.actualSeconds + diffSeconds,\r\n        };\r\n      })\r\n    );\r\n  };\r\n\r\n  const formatDuration = (totalSeconds: number): string => {\r\n    const minutes = Math.floor(totalSeconds / 60);\r\n    const seconds = totalSeconds % 60;\r\n    return `${minutes}分${seconds.toString().padStart(2, \"0\")}秒`;\r\n  };\r\n\r\n  const formatHMFromSeconds = (totalSeconds: number): string => {\r\n    const totalMinutes = Math.floor(totalSeconds / 60);\r\n    const hours = Math.floor(totalMinutes / 60);\r\n    const minutes = totalMinutes % 60;\r\n    if (hours > 0) {\r\n      return `${hours}時間${minutes}分`;\r\n    }\r\n    return `${minutes}分`;\r\n  };\r\n\r\n  const countsByStatus: Record<TaskStatus, number> = {\r\n    not_decided: tasks.filter((t) => t.status === \"not_decided\").length,\r\n    todo: tasks.filter((t) => t.status === \"todo\").length,\r\n    doing: tasks.filter((t) => t.status === \"doing\").length,\r\n    done: tasks.filter((t) => t.status === \"done\").length,\r\n  };\r\n\r\n  // 週全体サマリー計算\r\n  const summary = React.useMemo(() => {\r\n    let totalEstimatedMinutes = 0;\r\n    let estimatedTaskCount = 0;\r\n    let totalActualSeconds = 0;\r\n    let totalDiffMinutes = 0;\r\n    let diffCount = 0;\r\n\r\n    for (const task of tasks) {\r\n      const runningExtra =\r\n        task.isRunning && task.startedAt\r\n          ? Math.max(0, Math.floor((now - task.startedAt) / 1000))\r\n          : 0;\r\n      const totalSeconds = task.actualSeconds + runningExtra;\r\n      totalActualSeconds += totalSeconds;\r\n\r\n      if (task.estimatedMinutes != null) {\r\n        totalEstimatedMinutes += task.estimatedMinutes;\r\n        estimatedTaskCount += 1;\r\n\r\n        const minutes = Math.floor(totalSeconds / 60);\r\n        const diff = minutes - task.estimatedMinutes;\r\n        totalDiffMinutes += diff;\r\n        diffCount += 1;\r\n      }\r\n    }\r\n\r\n    const totalActualMinutes = Math.floor(totalActualSeconds / 60);\r\n    const totalActualHours = Math.floor(totalActualMinutes / 60);\r\n    const remainingMinutes = totalActualMinutes % 60;\r\n\r\n    const avgDiffMinutes =\r\n      diffCount > 0 ? totalDiffMinutes / diffCount : null;\r\n\r\n    return {\r\n      totalEstimatedMinutes,\r\n      estimatedTaskCount,\r\n      totalActualSeconds,\r\n      totalActualMinutes,\r\n      totalActualHours,\r\n      remainingMinutes,\r\n      avgDiffMinutes,\r\n    };\r\n  }, [tasks, now]);\r\n\r\n  const formatAvgDiff = (\r\n    avg: number | null\r\n  ): { label: string; color: string } => {\r\n    if (avg === null) {\r\n      return { label: \"—\", color: \"text-slate-500\" };\r\n    }\r\n    const rounded = Math.round(avg * 10) / 10; // 小数1桁\r\n    if (rounded === 0) {\r\n      return { label: \"±0分\", color: \"text-slate-700\" };\r\n    }\r\n    if (rounded > 0) {\r\n      return { label: `+${rounded}分（見積もりより遅い）`, color: \"text-red-600\" };\r\n    }\r\n    return { label: `${rounded}分（見積もりより早い）`, color: \"text-emerald-600\" };\r\n  };\r\n\r\n  const avgDiff = formatAvgDiff(summary.avgDiffMinutes ?? null);\r\n\r\n  // ステータスごとの集計\r\n  const statusSummary = React.useMemo(() => {\r\n    const base: Record<\r\n      TaskStatus,\r\n      {\r\n        count: number;\r\n        totalSeconds: number;\r\n      }\r\n    > = {\r\n      not_decided: { count: 0, totalSeconds: 0 },\r\n      todo: { count: 0, totalSeconds: 0 },\r\n      doing: { count: 0, totalSeconds: 0 },\r\n      done: { count: 0, totalSeconds: 0 },\r\n    };\r\n\r\n    for (const task of tasks) {\r\n      const runningExtra =\r\n        task.isRunning && task.startedAt\r\n          ? Math.max(0, Math.floor((now - task.startedAt) / 1000))\r\n          : 0;\r\n      const totalSeconds = task.actualSeconds + runningExtra;\r\n\r\n      base[task.status].count += 1;\r\n      base[task.status].totalSeconds += totalSeconds;\r\n    }\r\n\r\n    return base;\r\n  }, [tasks, now]);\r\n\r\n  // CSV用テキスト生成\r\n  const csvText = React.useMemo(() => {\r\n    if (tasks.length === 0) return \"\";\r\n\r\n    const escapeCsv = (value: string): string => {\r\n      const escaped = value.replace(/\"/g, '\"\"');\r\n      return `\"${escaped}\"`;\r\n    };\r\n\r\n    const header =\r\n      \"タスク名,ステータス,見積もり(分),実績(分),差分(分)\";\r\n\r\n    const lines = tasks.map((task) => {\r\n      const runningExtra =\r\n        task.isRunning && task.startedAt\r\n          ? Math.max(0, Math.floor((now - task.startedAt) / 1000))\r\n          : 0;\r\n      const totalSeconds = task.actualSeconds + runningExtra;\r\n\r\n      const actualMinutes = Math.floor(totalSeconds / 60);\r\n      const est = task.estimatedMinutes;\r\n\r\n      let diffStr = \"\";\r\n      if (est != null) {\r\n        const diff = actualMinutes - est;\r\n        if (diff > 0) {\r\n          diffStr = `+${diff}`;\r\n        } else if (diff === 0) {\r\n          diffStr = \"0\";\r\n        } else {\r\n          diffStr = `${diff}`;\r\n        }\r\n      }\r\n\r\n      const title = escapeCsv(task.title);\r\n      const statusLabel = STATUS_LABEL[task.status];\r\n      const estStr = est != null ? String(est) : \"\";\r\n      const actualStr = String(actualMinutes);\r\n\r\n      return [title, statusLabel, estStr, actualStr, diffStr].join(\",\");\r\n    });\r\n\r\n    return [header, ...lines].join(\"\\n\");\r\n  }, [tasks, now]);\r\n\r\n  const handleCopyCsv = async () => {\r\n    if (!csvText.trim()) return;\r\n\r\n    try {\r\n      if (typeof navigator !== \"undefined\" && navigator.clipboard) {\r\n        await navigator.clipboard.writeText(csvText);\r\n      } else if (typeof document !== \"undefined\") {\r\n        const textarea = document.createElement(\"textarea\");\r\n        textarea.value = csvText;\r\n        document.body.appendChild(textarea);\r\n        textarea.select();\r\n        document.execCommand(\"copy\");\r\n        document.body.removeChild(textarea);\r\n      }\r\n      setCsvCopiedMessage(\"CSV形式のテキストをコピーしました\");\r\n    } catch (e) {\r\n      console.error(\"failed to copy csv\", e);\r\n      setCsvCopiedMessage(\"コピーに失敗しました…\");\r\n    }\r\n    setTimeout(() => setCsvCopiedMessage(\"\"), 2000);\r\n  };\r\n\r\n  // 表示順：未完了タスク → 完了タスク（下に寄せる）\r\n  const sortedTasks = React.useMemo(() => {\r\n    const notDone = tasks.filter((t) => t.status !== \"done\");\r\n    const done = tasks.filter((t) => t.status === \"done\");\r\n    return [...notDone, ...done];\r\n  }, [tasks]);\r\n\r\n  // 完了タスクの表示／非表示\r\n  const visibleTasks = React.useMemo(\r\n    () =>\r\n      sortedTasks.filter(\r\n        (t) => showCompleted || t.status !== \"done\"\r\n      ),\r\n    [sortedTasks, showCompleted]\r\n  );\r\n\r\n  return (\r\n    <main className=\"min-h-screen bg-slate-50\">\r\n      <div className=\"mx-auto max-w-6xl py-6 px-4 md:px-8 space-y-6\">\r\n        {/* ヘッダー */}\r\n        <header className=\"flex flex-col gap-3 md:flex-row md:items-center md:justify-between\">\r\n          <div className=\"space-y-1.5\">\r\n            <Link\r\n              href=\"/reports\"\r\n              className=\"inline-flex items-center text-[11px] md:text-xs text-slate-600 hover:text-slate-900\"\r\n            >\r\n              ← 週報一覧に戻る\r\n            </Link>\r\n            <h1 className=\"text-xl md:text-3xl font-bold\">\r\n              週報タスク管理（ID: {id}）\r\n            </h1>\r\n            <p className=\"text-xs md:text-sm text-slate-600 max-w-3xl\">\r\n              今週やることを箇条書きで洗い出して、ステータス・見積もり時間・実績時間を管理します。\r\n              タスクとメモは「週報IDごとに」ブラウザへ自動保存されます。\r\n            </p>\r\n            {!loaded && (\r\n              <p className=\"text-[11px] text-slate-500\">読み込み中...</p>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"flex flex-col items-end gap-2\">\r\n            <div className=\"flex flex-wrap gap-1.5 text-[11px] md:text-xs\">\r\n              <span className=\"inline-flex items-center rounded-full bg-slate-100 px-2.5 py-1\">\r\n                合計:{\" \"}\r\n                <span className=\"ml-1 font-semibold text-slate-800\">\r\n                  {tasks.length}\r\n                </span>\r\n              </span>\r\n              <span className=\"inline-flex items-center rounded-full bg-emerald-50 px-2.5 py-1\">\r\n                完了:{\" \"}\r\n                <span className=\"ml-1 font-semibold text-emerald-700\">\r\n                  {countsByStatus.done}\r\n                </span>\r\n              </span>\r\n              <span className=\"inline-flex items-center rounded-full bg-blue-50 px-2.5 py-1\">\r\n                進行中:{\" \"}\r\n                <span className=\"ml-1 font-semibold text-blue-700\">\r\n                  {countsByStatus.doing}\r\n                </span>\r\n              </span>\r\n              <span className=\"inline-flex items-center rounded-full bg-amber-50 px-2.5 py-1\">\r\n                未着手:{\" \"}\r\n                <span className=\"ml-1 font-semibold text-amber-700\">\r\n                  {countsByStatus.todo}\r\n                </span>\r\n              </span>\r\n            </div>\r\n            {savedMessage && (\r\n              <p className=\"text-[11px] text-emerald-600\">{savedMessage}</p>\r\n            )}\r\n          </div>\r\n        </header>\r\n\r\n        {/* タスク追加 */}\r\n        <section className=\"rounded-xl border bg-white shadow-sm p-4 md:p-5 space-y-3\">\r\n          <h2 className=\"text-base md:text-lg font-semibold\">タスクを追加</h2>\r\n          <div className=\"flex flex-col md:flex-row gap-3\">\r\n            <input\r\n              type=\"text\"\r\n              className=\"flex-1 rounded-lg border border-slate-300 px-3 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-slate-400 focus:border-slate-400\"\r\n              placeholder=\"タスク内容を入力\"\r\n              value={newTitle}\r\n              onChange={(e) => setNewTitle(e.target.value)}\r\n              onKeyDown={handleKeyDown}\r\n            />\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleAddTask}\r\n              className=\"w-full md:w-auto inline-flex justify-center items-center rounded-lg px-5 py-2.5 text-sm font-medium border border-slate-800 bg-slate-900 text-white hover:bg-slate-800 transition\"\r\n            >\r\n              ＋ 追加\r\n            </button>\r\n          </div>\r\n        </section>\r\n\r\n        {/* タスク一覧 */}\r\n        <section className=\"space-y-3\">\r\n          <div className=\"flex items-center justify-between gap-2\">\r\n            <h2 className=\"text-base md:text-lg font-semibold\">タスク一覧</h2>\r\n\r\n            {/* 完了タスク表示切り替え */}\r\n            {tasks.length > 0 && (\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setShowCompleted((prev) => !prev)}\r\n                className=\"inline-flex items-center rounded-full border border-slate-400 px-3 py-1 text-[11px] md:text-xs text-slate-700 hover:bg-slate-100\"\r\n              >\r\n                {showCompleted ? \"完了タスクを隠す\" : \"完了タスクを表示\"}\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {tasks.length === 0 ? (\r\n            <div className=\"rounded-xl border border-dashed border-slate-300 bg-white p-6 text-center space-y-2\">\r\n              <p className=\"text-sm text-slate-600\">まだタスクがありません。</p>\r\n              <p className=\"text-[11px] md:text-xs text-slate-500\">\r\n                上の入力欄から「今週やること」を1行ずつ追加してみてください。\r\n              </p>\r\n            </div>\r\n          ) : visibleTasks.length === 0 ? (\r\n            <div className=\"rounded-xl border bg-white p-4 text-center space-y-1\">\r\n              <p className=\"text-sm text-slate-600\">\r\n                表示中のタスクはありません。\r\n              </p>\r\n              <p className=\"text-[11px] md:text-xs text-slate-500\">\r\n                完了タスクを非表示にしている場合は、右上のボタンから表示に切り替えられます。\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <ul className=\"space-y-3\">\r\n              {visibleTasks.map((task) => {\r\n                const runningExtra =\r\n                  task.isRunning && task.startedAt\r\n                    ? Math.max(0, Math.floor((now - task.startedAt) / 1000))\r\n                    : 0;\r\n                const totalSeconds = task.actualSeconds + runningExtra;\r\n\r\n                const est = task.estimatedMinutes;\r\n                const totalMinutes = Math.floor(totalSeconds / 60);\r\n                let diffLabel = \"\";\r\n                let diffClass = \"text-slate-700\";\r\n                if (est != null) {\r\n                  const diff = totalMinutes - est;\r\n                  if (diff === 0) {\r\n                    diffLabel = \"±0分\";\r\n                  } else if (diff > 0) {\r\n                    diffLabel = `+${diff}分`;\r\n                    diffClass = \"text-red-600\";\r\n                  } else {\r\n                    diffLabel = `${diff}分`;\r\n                    diffClass = \"text-emerald-600\";\r\n                  }\r\n                }\r\n\r\n                const isHighlighted = task.isRunning;\r\n\r\n                const baseItemClass =\r\n                  \"rounded-xl border bg-white shadow-sm px-3 md:px-4 py-2 md:py-2.5 flex flex-col gap-2\";\r\n                const highlightClass = isHighlighted\r\n                  ? \"border-blue-500 ring-2 ring-blue-200 bg-blue-50/80\"\r\n                  : \"\";\r\n\r\n                return (\r\n                  <li\r\n                    key={task.id}\r\n                    className={`${baseItemClass} ${highlightClass}`}\r\n                  >\r\n                    {/* 1行目：タイトル＋ステータス＋「実行中」バッジ */}\r\n                    <div className=\"flex items-start gap-3\">\r\n                      <div className=\"flex-1 min-w-0 space-y-1\">\r\n                        <p className=\"text-sm md:text-base text-slate-900 break-words\">\r\n                          {task.title}\r\n                        </p>\r\n                        {isHighlighted && (\r\n                          <span className=\"inline-flex items-center rounded-full bg-blue-600 px-2 py-[2px] text-[11px] font-medium text-white\">\r\n                            ▶ 実行中のタスク\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                      <div className=\"flex flex-col items-end gap-1 min-w-[190px]\">\r\n                        <div className=\"flex flex-wrap justify-end gap-1\">\r\n                          {STATUS_ORDER.map((status) => {\r\n                            const active = task.status === status;\r\n                            const base =\r\n                              \"px-2 py-[2px] rounded-full text-[11px] border transition focus:outline-none whitespace-nowrap\";\r\n                            const activeStyleByStatus: Record<\r\n                              TaskStatus,\r\n                              string\r\n                            > = {\r\n                              not_decided:\r\n                                \"bg-slate-800 border-slate-800 text-white\",\r\n                              todo: \"bg-amber-500 border-amber-500 text-white\",\r\n                              doing: \"bg-blue-600 border-blue-600 text-white\",\r\n                              done: \"bg-emerald-600 border-emerald-600 text-white\",\r\n                            };\r\n                            const inactiveStyleByStatus: Record<\r\n                              TaskStatus,\r\n                              string\r\n                            > = {\r\n                              not_decided:\r\n                                \"bg-slate-50 border-slate-300 text-slate-700 hover:bg-slate-100\",\r\n                              todo: \"bg-amber-50 border-amber-300 text-amber-700 hover:bg-amber-100\",\r\n                              doing: \"bg-blue-50 border-blue-300 text-blue-700 hover:bg-blue-100\",\r\n                              done: \"bg-emerald-50 border-emerald-300 text-emerald-700 hover:bg-emerald-100\",\r\n                            };\r\n\r\n                            return (\r\n                              <button\r\n                                key={status}\r\n                                type=\"button\"\r\n                                onClick={() =>\r\n                                  handleChangeStatus(task.id, status)\r\n                                }\r\n                                className={\r\n                                  base +\r\n                                  \" \" +\r\n                                  (active\r\n                                    ? activeStyleByStatus[status]\r\n                                    : inactiveStyleByStatus[status])\r\n                                }\r\n                              >\r\n                                {STATUS_LABEL[status]}\r\n                              </button>\r\n                            );\r\n                          })}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* 2行目：時間まわり */}\r\n                    {isHighlighted ? (\r\n                      // 実行中タスク：大きめパネル\r\n                      <div className=\"rounded-lg bg-slate-50 px-3 py-2.5 flex flex-col gap-2 md:flex-row md:items-center md:justify-between\">\r\n                        {/* 左：見積もり */}\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <span className=\"text-xs md:text-sm text-slate-600\">\r\n                            見積もり\r\n                          </span>\r\n                          <input\r\n                            type=\"number\"\r\n                            min={0}\r\n                            className=\"w-20 rounded-md border border-slate-300 px-2 py-1 text-sm md:text-base font-medium text-slate-900 focus:outline-none focus:ring-2 focus:ring-slate-400\"\r\n                            value={est ?? \"\"}\r\n                            onChange={(e) =>\r\n                              handleChangeEstimated(task.id, e.target.value)\r\n                            }\r\n                          />\r\n                          <span className=\"text-xs md:text-sm text-slate-600\">\r\n                            分\r\n                          </span>\r\n                        </div>\r\n\r\n                        {/* 中央：実績時間（大きく） */}\r\n                        <div className=\"flex flex-col items-start md:items-center gap-0.5\">\r\n                          <span className=\"text-xs md:text-sm text-slate-600\">\r\n                            実績\r\n                          </span>\r\n                          <span className=\"text-base md:text-xl font-semibold text-slate-900\">\r\n                            {formatDuration(totalSeconds)}\r\n                          </span>\r\n                        </div>\r\n\r\n                        {/* 右：差分＋タイマーボタン */}\r\n                        <div className=\"flex flex-col items-end gap-1.5\">\r\n                          {est != null && (\r\n                            <div className=\"text-xs md:text-sm\">\r\n                              <span className=\"text-slate-500 mr-1\">\r\n                                差分\r\n                              </span>\r\n                              <span className={`font-semibold ${diffClass}`}>\r\n                                {diffLabel}\r\n                              </span>\r\n                            </div>\r\n                          )}\r\n\r\n                          <div className=\"flex items-center gap-1.5\">\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={() => handleStopTimer(task.id)}\r\n                              className=\"px-3 py-1.5 rounded-md border border-red-500 text-xs md:text-sm font-medium text-red-600 hover:bg-red-50\"\r\n                            >\r\n                              ⏹ 停止\r\n                            </button>\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={() => handleDelete(task.id)}\r\n                              className=\"text-xs md:text-sm text-red-500 hover:text-red-600 hover:underline\"\r\n                            >\r\n                              削除\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ) : (\r\n                      // 非実行中タスク：コンパクト表示\r\n                      <div className=\"flex flex-wrap items-center gap-2 text-[11px] md:text-xs text-slate-600\">\r\n                        <div className=\"flex items-center gap-1.5\">\r\n                          <span>見積もり</span>\r\n                          <input\r\n                            type=\"number\"\r\n                            min={0}\r\n                            className=\"w-16 rounded-md border border-slate-300 px-1.5 py-[2px] text-[11px] md:text-xs font-medium text-slate-900 focus:outline-none focus:ring-1 focus:ring-slate-400\"\r\n                            value={est ?? \"\"}\r\n                            onChange={(e) =>\r\n                              handleChangeEstimated(task.id, e.target.value)\r\n                            }\r\n                          />\r\n                          <span>分</span>\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center gap-1.5\">\r\n                          <span>実績</span>\r\n                          <span className=\"font-medium text-slate-800 text-[11px] md:text-xs\">\r\n                            {formatDuration(totalSeconds)}\r\n                          </span>\r\n                        </div>\r\n\r\n                        {est != null && (\r\n                          <div className=\"flex items-center gap-1.5\">\r\n                            <span>差分</span>\r\n                            <span className={`font-medium ${diffClass}`}>\r\n                              {diffLabel}\r\n                            </span>\r\n                          </div>\r\n                        )}\r\n\r\n                        <div className=\"flex items-center gap-1.5 ml-auto\">\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={() => handleStartTimer(task.id)}\r\n                            className=\"px-2 py-[2px] rounded-md border border-slate-700 text-[10px] md:text-xs font-medium text-slate-800 hover:bg-slate-100\"\r\n                          >\r\n                            ▶ 開始\r\n                          </button>\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={() => handleDelete(task.id)}\r\n                            className=\"text-[10px] md:text-xs text-red-500 hover:text-red-600 hover:underline\"\r\n                          >\r\n                            削除\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </li>\r\n                );\r\n              })}\r\n            </ul>\r\n          )}\r\n        </section>\r\n\r\n        {/* 週全体のサマリー ＋ ステータス別集計 */}\r\n        <section className=\"space-y-3 pt-2 border-t border-slate-200\">\r\n          <h2 className=\"text-sm md:text-base font-semibold text-slate-800\">\r\n            週全体のサマリー\r\n          </h2>\r\n\r\n          {tasks.length === 0 ? (\r\n            <div className=\"rounded-lg border border-dashed border-slate-300 bg-white px-4 py-3 text-[11px] md:text-xs text-slate-500\">\r\n              タスクを追加すると、この週の合計時間や見積もり精度のサマリーが表示されます。\r\n            </div>\r\n          ) : (\r\n            <>\r\n              {/* 上段：全体サマリー3カード */}\r\n              <div className=\"grid gap-3 md:grid-cols-3\">\r\n                {/* 合計実績時間 */}\r\n                <div className=\"rounded-lg border bg-white px-4 py-3 flex flex-col justify-between\">\r\n                  <p className=\"text-[11px] md:text-xs text-slate-500\">\r\n                    合計実績時間\r\n                  </p>\r\n                  <p className=\"mt-1 text-base md:text-xl font-semibold text-slate-900\">\r\n                    {summary.totalActualHours}時間{summary.remainingMinutes}分\r\n                  </p>\r\n                  <p className=\"mt-1 text-[10px] md:text-[11px] text-slate-500\">\r\n                    （全タスクの実績時間の合計）\r\n                  </p>\r\n                </div>\r\n\r\n                {/* 合計見積もり時間 */}\r\n                <div className=\"rounded-lg border bg-white px-4 py-3 flex flex-col justify-between\">\r\n                  <p className=\"text-[11px] md:text-xs text-slate-500\">\r\n                    合計見積もり時間\r\n                  </p>\r\n                  <p className=\"mt-1 text-base md:text-xl font-semibold text-slate-900\">\r\n                    {summary.totalEstimatedMinutes}分\r\n                  </p>\r\n                  <p className=\"mt-1 text-[10px] md:text-[11px] text-slate-500\">\r\n                    見積もり入力済みタスク:{\" \"}\r\n                    <span className=\"font-medium\">\r\n                      {summary.estimatedTaskCount}件\r\n                    </span>\r\n                  </p>\r\n                </div>\r\n\r\n                {/* 平均見積もり誤差 */}\r\n                <div className=\"rounded-lg border bg白 px-4 py-3 flex flex-col justify-between\">\r\n                  <p className=\"text-[11px] md:text-xs text-slate-500\">\r\n                    平均見積もり誤差\r\n                  </p>\r\n                  <p\r\n                    className={`mt-1 text-sm md:text-lg font-semibold ${avgDiff.color}`}\r\n                  >\r\n                    {avgDiff.label}\r\n                  </p>\r\n                  <p className=\"mt-1 text-[10px] md:text-[11px] text-slate-500\">\r\n                    （実績 − 見積もりの平均値。プラスは見積もりより時間がかかっている状態です）\r\n                  </p>\r\n                </div>\r\n              </div>\r\n\r\n              {/* 下段：ステータスごとの集計 */}\r\n              <div className=\"rounded-lg border bg-white px-4 py-3 space-y-2\">\r\n                <p className=\"text-[11px] md:text-xs font-semibold text-slate-700\">\r\n                  ステータスごとの集計\r\n                </p>\r\n\r\n                <div className=\"overflow-x-auto\">\r\n                  <table className=\"min-w-full text-[11px] md:text-xs text-left text-slate-700\">\r\n                    <thead>\r\n                      <tr className=\"border-b border-slate-200\">\r\n                        <th className=\"py-1.5 pr-4 font-medium\">ステータス</th>\r\n                        <th className=\"py-1.5 pr-4 font-medium\">タスク数</th>\r\n                        <th className=\"py-1.5 pr-4 font-medium\">合計実績時間</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {STATUS_ORDER.map((status) => {\r\n                        const s = statusSummary[status];\r\n                        return (\r\n                          <tr\r\n                            key={status}\r\n                            className=\"border-b border-slate-100 last:border-0\"\r\n                          >\r\n                            <td className=\"py-1.5 pr-4\">\r\n                              {STATUS_LABEL[status]}\r\n                            </td>\r\n                            <td className=\"py-1.5 pr-4\">{s.count}件</td>\r\n                            <td className=\"py-1.5 pr-4\">\r\n                              {s.count === 0\r\n                                ? \"—\"\r\n                                : formatHMFromSeconds(s.totalSeconds)}\r\n                            </td>\r\n                          </tr>\r\n                        );\r\n                      })}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n\r\n                <p className=\"text-[10px] md:text-[11px] text-slate-500\">\r\n                  実績時間には、現在タイマーが動いているタスクの経過時間も含まれます。\r\n                </p>\r\n              </div>\r\n            </>\r\n          )}\r\n        </section>\r\n\r\n        {/* CSVエクスポート（コピペ用） */}\r\n        <section className=\"space-y-2 pt-3 border-t border-slate-200\">\r\n          <div className=\"flex items-center justify-between gap-2\">\r\n            <h2 className=\"text-sm md:text-base font-semibold text-slate-800\">\r\n              CSV形式でエクスポート（コピペ用）\r\n            </h2>\r\n            {tasks.length > 0 && (\r\n              <button\r\n                type=\"button\"\r\n                onClick={handleCopyCsv}\r\n                className=\"inline-flex items-center rounded-md border border-slate-700 px-3 py-1.5 text-[11px] md:text-xs font-medium text-slate-800 hover:bg-slate-100\"\r\n              >\r\n                コピー\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {tasks.length === 0 ? (\r\n            <div className=\"rounded-lg border border-dashed border-slate-300 bg-white px-4 py-3 text-[11px] md:text-xs text-slate-500\">\r\n              タスクを追加すると、この週の内容をCSV形式で出力できます。\r\n            </div>\r\n          ) : (\r\n            <div className=\"rounded-lg border bg-white px-3 py-3 md:px-4 md:py-4 space-y-2\">\r\n              <p className=\"text-[11px] md:text-xs text-slate-500\">\r\n                下のテキストをコピーして、Excel / Googleスプレッドシート / 会社の週報フォーマットなどに貼り付けて使えます。\r\n              </p>\r\n              <textarea\r\n                className=\"w-full min-h-[120px] rounded-md border border-slate-200 px-3 py-2 text-[11px] md:text-xs font-mono text-slate-900 bg-slate-50 focus:outline-none focus:ring-2 focus:ring-slate-300 focus:border-slate-300 resize-vertical\"\r\n                value={csvText}\r\n                readOnly\r\n              />\r\n              <div className=\"flex items-center justify-between\">\r\n                <p className=\"text-[10px] md:text-[11px] text-slate-500\">\r\n                  列: タスク名 / ステータス / 見積もり(分) / 実績(分) / 差分(分)\r\n                </p>\r\n                {csvCopiedMessage && (\r\n                  <p className=\"text-[10px] md:text-[11px] text-emerald-600\">\r\n                    {csvCopiedMessage}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </section>\r\n\r\n        {/* 週次ふりかえりメモ */}\r\n        <section className=\"space-y-2 pt-3\">\r\n          <h2 className=\"text-sm md:text-base font-semibold text-slate-800\">\r\n            週次ふりかえりメモ\r\n          </h2>\r\n          <p className=\"text-[11px] md:text-xs text-slate-500\">\r\n            今週の振り返りや来週に向けたメモを書いておくスペースです。\r\n          </p>\r\n\r\n          <div className=\"rounded-lg border bg-white px-3 py-3 md:px-4 md:py-4 space-y-2\">\r\n            <textarea\r\n              className=\"w-full min-h-[120px] rounded-md border border-slate-300 px-3 py-2 text-sm md:text-[15px] text-slate-900 focus:outline-none focus:ring-2 focus:ring-slate-400 focus:border-slate-400 resize-vertical\"\r\n              value={weeklyNote}\r\n              onChange={(e) => setWeeklyNote(e.target.value)}\r\n            />\r\n            <div className=\"flex items-center justify-between\">\r\n              <p className=\"text-[10px] md:text-[11px] text-slate-500\">\r\n                入力内容は自動で保存されます（ブラウザごと／週報IDごと）。\r\n              </p>\r\n              {noteSavedMessage && (\r\n                <p className=\"text-[10px] md:text-[11px] text-emerald-600\">\r\n                  {noteSavedMessage}\r\n                </p>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </section>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}