{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hinat/projects/weekly-report-app/src/lib/reportUtils.ts"],"sourcesContent":["import { type ClassValue, clsx } from \"clsx\";\r\nimport { twMerge } from \"tailwind-merge\";\r\n\r\n// --- Types ---\r\n\r\nexport type Report = {\r\n    id: string;\r\n    title: string; // „ÄåM/DÔΩûM/D„ÅÆÈÄ±Â†±„Äç\r\n    description: string; // Ë™¨Êòé\r\n    createdAt: string; // ISOÊñáÂ≠óÂàó\r\n    weekStart: string; // „Åù„ÅÆÈÄ±„ÅÆÈñãÂßãÊó•ÔºàISOÔºâ\r\n    weekEnd: string; // „Åù„ÅÆÈÄ±„ÅÆÁµÇ‰∫ÜÊó•ÔºàISOÔºâ\r\n};\r\n\r\nexport type TaskStatus = \"not_decided\" | \"todo\" | \"doing\" | \"done\";\r\n\r\nexport type TaskPriority = \"p0\" | \"p1\" | \"p2\";\r\n\r\nexport type Task = {\r\n    id: string;\r\n    title: string;\r\n    status: TaskStatus;\r\n    tag: string | null;\r\n\r\n    priority: TaskPriority; // existing code assumed \"todo\" priority but now we have explicit priority\r\n    isToday: boolean;\r\n\r\n    estimatedMinutes: number | null;\r\n    actualSeconds: number;\r\n\r\n    isRunning: boolean;\r\n    startedAt: number | null;\r\n};\r\n\r\n// ... existing types ... \r\n\r\nexport const PRIORITY_ORDER: TaskPriority[] = [\"p0\", \"p1\", \"p2\"];\r\nexport const STATUS_ORDER: TaskStatus[] = [\"not_decided\", \"todo\", \"doing\", \"done\"];\r\n\r\nexport const PRIORITY_LABEL: Record<TaskPriority, string> = {\r\n    p0: \"P0\",\r\n    p1: \"P1\",\r\n    p2: \"P2\",\r\n};\r\n\r\nexport const STATUS_LABEL: Record<TaskStatus, string> = {\r\n    not_decided: \"Êú™Ê±∫ÂÆö\",\r\n    todo: \"Êú™ÁùÄÊâã\",\r\n    doing: \"ÈÄ≤Ë°å‰∏≠\",\r\n    done: \"ÂÆå‰∫Ü\",\r\n};\r\n\r\n// ... existing constants ...\r\n\r\n// --- Utility Functions ---\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n    return twMerge(clsx(inputs));\r\n}\r\n\r\n// ... existing functions (getWeekRange, formatWeekRangeTitle, formatDate, sortReportsDesc, safeTagLabel, formatHMFromSecondsSimple, clamp) ...\r\n\r\n/** ÂÆå‰∫ÜÊôÇ„ÅÆnormalizeÁî®ÔºàË©≥Á¥∞„Éö„Éº„Ç∏„Åß‰Ωø„ÅÜÔºâ */\r\nexport function normalizeTask(t: any): Task {\r\n    return {\r\n        id: t?.id ?? crypto.randomUUID(),\r\n        title: typeof t?.title === \"string\" ? t.title : \"\",\r\n        status: (STATUS_ORDER as string[]).includes(t?.status)\r\n            ? (t.status as TaskStatus)\r\n            : \"todo\",\r\n        tag: typeof t?.tag === \"string\" ? t.tag : null,\r\n\r\n        priority: (PRIORITY_ORDER as string[]).includes(t?.priority)\r\n            ? (t.priority as TaskPriority)\r\n            : \"p1\",\r\n        isToday: typeof t?.isToday === \"boolean\" ? t.isToday : false,\r\n\r\n        estimatedMinutes: typeof t?.estimatedMinutes === \"number\" ? t.estimatedMinutes : null,\r\n        actualSeconds: typeof t?.actualSeconds === \"number\" ? t.actualSeconds : 0,\r\n\r\n        isRunning: false, // „É≠„Éº„ÉâÊôÇ„ÅØÂÅúÊ≠¢\r\n        startedAt: null,\r\n    };\r\n}\r\n\r\nexport function getRunningExtraSeconds(task: Task, now: number) {\r\n    if (!task.isRunning || !task.startedAt) return 0;\r\n    return Math.max(0, Math.floor((now - task.startedAt) / 1000));\r\n}\r\n\r\nexport function getTotalActualSeconds(task: Task, now: number) {\r\n    return task.actualSeconds + getRunningExtraSeconds(task, now);\r\n}\r\n\r\nexport function formatJPDateTime(ms: number) {\r\n    const d = new Date(ms);\r\n    const y = d.getFullYear();\r\n    const m = String(d.getMonth() + 1).padStart(2, \"0\");\r\n    const day = String(d.getDate()).padStart(2, \"0\");\r\n    const hh = String(d.getHours()).padStart(2, \"0\");\r\n    const mm = String(d.getMinutes()).padStart(2, \"0\");\r\n    return `${y}/${m}/${day} ${hh}:${mm}`;\r\n}\r\n\r\nexport function pickTopBySeconds(tasks: Task[], now: number, n: number) {\r\n    const arr = tasks\r\n        .map((t) => ({ t, sec: getTotalActualSeconds(t, now) }))\r\n        .filter((x) => x.sec > 0)\r\n        .sort((a, b) => b.sec - a.sec)\r\n        .slice(0, n);\r\n    return arr;\r\n}\r\n\r\nexport function pickTopTagsBySeconds(tasks: Task[], now: number, n: number) {\r\n    const map = new Map<string, number>();\r\n    for (const t of tasks) {\r\n        const tag = safeTagLabel(t.tag ?? \"\");\r\n        map.set(tag, (map.get(tag) ?? 0) + getTotalActualSeconds(t, now));\r\n    }\r\n    return Array.from(map.entries())\r\n        .map(([tag, sec]) => ({ tag, sec }))\r\n        .filter((x) => x.sec > 0)\r\n        .sort((a, b) => b.sec - a.sec)\r\n        .slice(0, n);\r\n}\r\n\r\nexport function calcEstimateInsights(tasks: Task[], now: number) {\r\n    const withEst = tasks.filter((t) => t.estimatedMinutes != null && t.estimatedMinutes >= 0);\r\n\r\n    const diffs = withEst.map((t) => {\r\n        const actualMin = Math.floor(getTotalActualSeconds(t, now) / 60);\r\n        const estMin = t.estimatedMinutes ?? 0;\r\n        const diff = actualMin - estMin;\r\n        return { t, actualMin, estMin, diff };\r\n    });\r\n\r\n    const overruns = diffs\r\n        .filter((x) => x.estMin > 0 && x.diff > 0)\r\n        .sort((a, b) => b.diff - a.diff);\r\n\r\n    const underruns = diffs\r\n        .filter((x) => x.estMin > 0 && x.diff < 0)\r\n        .sort((a, b) => a.diff - b.diff);\r\n\r\n    const avgDiff =\r\n        diffs.length > 0 ? diffs.reduce((sum, x) => sum + x.diff, 0) / diffs.length : null;\r\n\r\n    return { withEstCount: diffs.length, avgDiff, overruns, underruns };\r\n}\r\n\r\nexport function generateReflectionText(tasks: Task[], now: number, topN = 5) {\r\n    const done = tasks.filter((t) => t.status === \"done\");\r\n    const notDone = tasks.filter((t) => t.status !== \"done\");\r\n\r\n    const totalSec = tasks.reduce((sum, t) => sum + getTotalActualSeconds(t, now), 0);\r\n    const doneSec = done.reduce((sum, t) => sum + getTotalActualSeconds(t, now), 0);\r\n    const notDoneSec = notDone.reduce((sum, t) => sum + getTotalActualSeconds(t, now), 0);\r\n\r\n    const topTasks = pickTopBySeconds(tasks, now, 3);\r\n    const topTags = pickTopTagsBySeconds(tasks, now, 5);\r\n\r\n    // High Priority Done\r\n    const doneP0 = done.filter(t => t.priority === \"p0\");\r\n\r\n    // Low Priority but time consuming (Potential Problem)\r\n    const timeWasters = done\r\n        .filter(t => t.priority === \"p2\" && getTotalActualSeconds(t, now) > 30 * 60) // > 30 mins\r\n        .sort((a, b) => getTotalActualSeconds(b, now) - getTotalActualSeconds(a, now));\r\n\r\n    const todayNotDone = tasks\r\n        .filter((t) => t.isToday && t.status !== \"done\")\r\n        .sort((a, b) => {\r\n            const pr: Record<TaskPriority, number> = { p0: 0, p1: 1, p2: 2 };\r\n            return pr[a.priority] - pr[b.priority];\r\n        });\r\n\r\n    const { withEstCount, avgDiff, overruns } = calcEstimateInsights(tasks, now);\r\n\r\n    const lines: string[] = [];\r\n    lines.push(`„Äêü§ñ Ëá™ÂãïÁîüÊàê„Çµ„Éû„É™„Éº ${formatJPDateTime(now)}„Äë`);\r\n    lines.push(\"\");\r\n\r\n    // 1. Overview\r\n    lines.push(\"üìä 1. ÂÆöÈáè„Éá„Éº„Çø\");\r\n    lines.push(`- Á®ºÂÉçÊôÇÈñìÔºö${formatHMFromSecondsSimple(totalSec)}ÔºàÂÆå‰∫Ü ${formatHMFromSecondsSimple(doneSec)} / Êú™ÂÆå‰∫Ü ${formatHMFromSecondsSimple(notDoneSec)}Ôºâ`);\r\n    lines.push(`- „Çø„Çπ„ÇØÊ∂àÂåñÁéáÔºö${Math.round((done.length / Math.max(tasks.length, 1)) * 100)}%ÔºàÂÆå‰∫Ü ${done.length} / ÂÖ® ${tasks.length}Ôºâ`);\r\n    if (doneP0.length > 0) {\r\n        lines.push(`- ‚òÖÈáçË¶Å„Çø„Çπ„ÇØ(P0)ÈÅîÊàêÊï∞Ôºö${doneP0.length}‰ª∂`);\r\n    }\r\n    lines.push(\"\");\r\n\r\n    // 2. Focus Area (Tags)\r\n    lines.push(\"üé® 2. ÊôÇÈñì„ÅÆ‰Ωø„ÅÑÊñπÔºà„Çø„Ç∞ÂàÜÊûêÔºâ\");\r\n    if (topTags.length > 0) {\r\n        topTags.forEach(row => {\r\n            const pct = Math.round((row.sec / Math.max(totalSec, 1)) * 100);\r\n            lines.push(`- ${row.tag}Ôºö${formatHMFromSecondsSimple(row.sec)} (${pct}%)`);\r\n        });\r\n    } else {\r\n        lines.push(\"- „Éá„Éº„Çø„Å™„Åó\");\r\n    }\r\n    lines.push(\"\");\r\n\r\n    // 3. Highlights\r\n    lines.push(\"üèÜ 3. ‰∏ª„Å™ÊàêÊûú\");\r\n    if (done.length === 0) {\r\n        lines.push(\"- ÂÆå‰∫Ü„Çø„Çπ„ÇØ„Å™„Åó\");\r\n    } else {\r\n        // List P0 first\r\n        if (doneP0.length > 0) {\r\n            lines.push(\"„ÄêP0ÔºöÈáçË¶Å„ÄëÂç≥Êà¶Âäõ„Å®„Åó„Å¶ÂÆå‰∫ÜÔºÅ\");\r\n            doneP0.forEach(t => lines.push(`  ‚úì ${t.title} (${formatHMFromSecondsSimple(getTotalActualSeconds(t, now))})`));\r\n        }\r\n        // Others (Top 5 by time)\r\n        const otherDone = done.filter(t => t.priority !== \"p0\")\r\n            .sort((a, b) => getTotalActualSeconds(b, now) - getTotalActualSeconds(a, now))\r\n            .slice(0, 5);\r\n\r\n        if (otherDone.length > 0) {\r\n            if (doneP0.length > 0) lines.push(\"„Äê„Åù„ÅÆ‰ªñÔºö‰∏ªË¶Å„Å™ÂÆå‰∫Ü„Äë\");\r\n            otherDone.forEach(t => lines.push(`  ‚úì ${t.title} (${formatHMFromSecondsSimple(getTotalActualSeconds(t, now))})`));\r\n        }\r\n    }\r\n    lines.push(\"\");\r\n\r\n    // 4. Issues / Next Actions\r\n    lines.push(\"‚ö†Ô∏è 4. Ë™≤È°å„Éª„Éç„ÇØ„Çπ„Éà„Ç¢„ÇØ„Ç∑„Éß„É≥\");\r\n    if (overruns.length > 0) {\r\n        lines.push(\"- ‚è∞ ÊôÇÈñìË∂ÖÈÅéÔºàË¶ãÁ©ç„ÇÇ„Çä„Å®„ÅÆ„Ç∫„É¨Â§ßÔºâ\");\r\n        overruns.slice(0, 3).forEach(x => {\r\n            lines.push(`  ! ${x.t.title}Ôºö‰∫à +${Math.round(x.diff)}ÂàÜ„Ç™„Éº„Éê„Éº`);\r\n        });\r\n    }\r\n    if (timeWasters.length > 0) {\r\n        lines.push(\"- üê¢ ÂÑ™ÂÖàÂ∫¶‰Ωé„Å†„ÅåÊôÇÈñìÊ∂àË≤ªÂ§ßÔºàË¶ÅË¶ãÁõ¥„ÅóÔºüÔºâ\");\r\n        timeWasters.slice(0, 3).forEach(t => {\r\n            lines.push(`  ? ${t.title} (P2)Ôºö${formatHMFromSecondsSimple(getTotalActualSeconds(t, now))}`);\r\n        });\r\n    }\r\n    if (todayNotDone.length > 0) {\r\n        lines.push(\"- üî• Êú¨Êó•„ÅÆÁ©ç„ÅøÊÆã„Åó\");\r\n        todayNotDone.slice(0, 3).forEach(t => {\r\n            lines.push(`  -> ${t.title} (${PRIORITY_LABEL[t.priority]})`);\r\n        });\r\n    }\r\n    if (overruns.length === 0 && timeWasters.length === 0 && todayNotDone.length === 0) {\r\n        lines.push(\"- Áâπ„Å´„Å™„Åó„ÄÇÈ†ÜË™ø„Åß„ÅôÔºÅüéâ\");\r\n    }\r\n\r\n    return lines.join(\"\\n\");\r\n}\r\n\r\nexport function generateCsvText(tasks: Task[], now: number) {\r\n    if (tasks.length === 0) return \"\";\r\n\r\n    const escapeCsv = (value: string): string => {\r\n        const escaped = value.replace(/\"/g, '\"\"');\r\n        return `\"${escaped}\"`;\r\n    };\r\n\r\n    const header = \"„Çø„Çπ„ÇØÂêç,„Çø„Ç∞,ÂÑ™ÂÖàÂ∫¶,Today,„Çπ„ÉÜ„Éº„Çø„Çπ,Ë¶ãÁ©ç„ÇÇ„Çä(ÂàÜ),ÂÆüÁ∏æ(ÂàÜ),Â∑ÆÂàÜ(ÂàÜ)\";\r\n\r\n    const lines = tasks.map((task) => {\r\n        const totalSeconds = getTotalActualSeconds(task, now);\r\n        const actualMinutes = Math.floor(totalSeconds / 60);\r\n        const est = task.estimatedMinutes;\r\n\r\n        let diffStr = \"\";\r\n        if (est != null) {\r\n            const diff = actualMinutes - est;\r\n            if (diff > 0) diffStr = `+${diff}`;\r\n            else if (diff === 0) diffStr = \"0\";\r\n            else diffStr = `${diff}`;\r\n        }\r\n\r\n        const title = escapeCsv(task.title);\r\n        const tagStr = escapeCsv(task.tag ?? \"\");\r\n        const priorityStr = escapeCsv(PRIORITY_LABEL[task.priority]);\r\n        const todayStr = task.isToday ? \"1\" : \"0\";\r\n        const statusStr = escapeCsv(STATUS_LABEL[task.status]);\r\n        const estStr = est != null ? String(est) : \"\";\r\n        const actualStr = String(actualMinutes);\r\n\r\n        return [title, tagStr, priorityStr, todayStr, statusStr, estStr, actualStr, diffStr].join(\",\");\r\n    });\r\n\r\n    return [header, ...lines].join(\"\\n\");\r\n}\r\n\r\n\r\n\r\n\r\nexport type ReportStats = {\r\n    totalCount: number;\r\n    doneCount: number;\r\n    todayRemaining: number;\r\n\r\n    totalActualSeconds: number;\r\n\r\n    estimatedCount: number;\r\n    avgDiffMinutes: number | null;\r\n\r\n    topTags: { tag: string; seconds: number }[];\r\n    highlights: Task[];\r\n    noteSummary?: string;\r\n};\r\n\r\n// --- Constants ---\r\n\r\nexport const STORAGE_KEY = \"weekly-report-list\";\r\nexport const TASKS_KEY_PREFIX = \"weekly-report-tasks-\";\r\nexport const TAG_STORAGE_KEY = \"weekly-report-tags\";\r\nexport const DEFAULT_TAG_LABEL = \"(Êú™Ë®≠ÂÆö)\";\r\nexport const DEFAULT_TAGS = [\"ÈñãÁô∫\", \"Â≠¶Áøí\", \"Â∞±Ê¥ª\", \"‰∫ãÂãô\", \"ÁîüÊ¥ª\"];\r\n\r\n// --- Utility Functions ---\r\n\r\nexport function loadStoredTags(): string[] {\r\n    if (typeof window === \"undefined\") return DEFAULT_TAGS;\r\n\r\n    const raw = window.localStorage.getItem(TAG_STORAGE_KEY);\r\n    if (!raw) {\r\n        // If empty, initialize with defaults\r\n        window.localStorage.setItem(TAG_STORAGE_KEY, JSON.stringify(DEFAULT_TAGS));\r\n        return DEFAULT_TAGS;\r\n    }\r\n\r\n    try {\r\n        const parsed = JSON.parse(raw);\r\n        if (!Array.isArray(parsed)) return DEFAULT_TAGS;\r\n        return parsed;\r\n    } catch {\r\n        return DEFAULT_TAGS;\r\n    }\r\n}\r\n\r\nexport function saveStoredTags(tags: string[]) {\r\n    if (typeof window === \"undefined\") return;\r\n    window.localStorage.setItem(TAG_STORAGE_KEY, JSON.stringify(tags));\r\n}\r\n\r\n/** ÈÄ±„ÅÆÈñãÂßã„ÉªÁµÇ‰∫ÜÔºàÊúàÊõú„ÅØ„Åò„Åæ„Çä„ÄÅÊó•Êõú„Åä„Çè„ÇäÔºâ */\r\nexport function getWeekRange(date: Date): { start: Date; end: Date } {\r\n    const d = new Date(date);\r\n    d.setHours(0, 0, 0, 0);\r\n\r\n    const day = d.getDay(); // 0:Êó•, 1:Êúà, ... 6:Âúü\r\n    const diffFromMonday = (day + 6) % 7; // ÊúàÊõú„Çí0„Å´„Åô„Çã\r\n\r\n    const start = new Date(d);\r\n    start.setDate(d.getDate() - diffFromMonday);\r\n    start.setHours(0, 0, 0, 0);\r\n\r\n    const end = new Date(start);\r\n    end.setDate(start.getDate() + 6);\r\n    end.setHours(23, 59, 59, 999);\r\n\r\n    return { start, end };\r\n}\r\n\r\n/** „Çø„Ç§„Éà„É´Áî®Ôºö„ÄåM/DÔΩûM/D„ÅÆÈÄ±Â†±„Äç */\r\nexport function formatWeekRangeTitle(startIso: string, endIso: string): string {\r\n    const s = new Date(startIso);\r\n    const e = new Date(endIso);\r\n    if (Number.isNaN(s.getTime()) || Number.isNaN(e.getTime())) return \"ÈÄ±Â†±\";\r\n\r\n    const sStr = s.toLocaleDateString(\"ja-JP\", { month: \"numeric\", day: \"numeric\" });\r\n    const eStr = e.toLocaleDateString(\"ja-JP\", { month: \"numeric\", day: \"numeric\" });\r\n    return `${sStr}ÔΩû${eStr}„ÅÆÈÄ±Â†±`;\r\n}\r\n\r\n/** ‰ΩúÊàêÊó•„ÅÆË°®Á§∫Áî®Ôºà‰æã: 2025/12/13Ôºâ */\r\nexport function formatDate(iso: string): string {\r\n    const d = new Date(iso);\r\n    if (Number.isNaN(d.getTime())) return \"\";\r\n    return d.toLocaleDateString(\"ja-JP\", { year: \"numeric\", month: \"2-digit\", day: \"2-digit\" });\r\n}\r\n\r\n/** ‰∏ÄË¶ß„Çí„ÄåÊñ∞„Åó„ÅÑÈ†Ü„Äç„Å´‰∏¶„ÅπÊõø„Åà„ÇãÔºàcreatedAt ‚Üí id „ÅÆÈ†ÜÔºâ */\r\nexport function sortReportsDesc(reports: Report[]): Report[] {\r\n    return [...reports].sort((a, b) => {\r\n        const ta = new Date(a.createdAt).getTime();\r\n        const tb = new Date(b.createdAt).getTime();\r\n        if (!Number.isNaN(ta) && !Number.isNaN(tb) && ta !== tb) return tb - ta;\r\n\r\n        const na = Number(a.id);\r\n        const nb = Number(b.id);\r\n        if (!Number.isNaN(na) && !Number.isNaN(nb)) return nb - na;\r\n\r\n        return 0;\r\n    });\r\n}\r\n\r\nexport function safeTagLabel(tag: unknown): string {\r\n    if (typeof tag !== \"string\") return DEFAULT_TAG_LABEL;\r\n    const t = tag.trim();\r\n    return t ? t : DEFAULT_TAG_LABEL;\r\n}\r\n\r\nexport function formatHMFromSecondsSimple(totalSeconds: number) {\r\n    const totalMinutes = Math.floor(totalSeconds / 60);\r\n    const h = Math.floor(totalMinutes / 60);\r\n    const m = totalMinutes % 60;\r\n    if (h <= 0) return `${m}ÂàÜ`;\r\n    if (m === 0) return `${h}ÊôÇÈñì`;\r\n    return `${h}ÊôÇÈñì${m}ÂàÜ`;\r\n}\r\n\r\nexport function clamp(n: number, min: number, max: number) {\r\n    return Math.max(min, Math.min(max, n));\r\n}\r\n\r\n/** „Çø„Çπ„ÇØÈÖçÂàó„ÇíÂÆâÂÖ®„Å´Ë™≠„ÇÄÔºàÂ£ä„Çå„Å¶„Å¶„ÇÇËêΩ„Å°„Å™„ÅÑÔºâ */\r\nexport function loadTasks(reportId: string, nowMs: number): Task[] {\r\n    if (typeof window === \"undefined\") return [];\r\n\r\n    const raw = window.localStorage.getItem(`${TASKS_KEY_PREFIX}${reportId}`);\r\n    if (!raw) return [];\r\n\r\n    try {\r\n        const parsed = JSON.parse(raw);\r\n        if (!Array.isArray(parsed)) return [];\r\n\r\n        return parsed.map((t: any) => {\r\n            const baseActual = typeof t?.actualSeconds === \"number\" ? t.actualSeconds : 0;\r\n            const isRunning = !!t?.isRunning;\r\n            const startedAt = typeof t?.startedAt === \"number\" ? t.startedAt : null;\r\n\r\n            // ‰∏ÄË¶ß„Éö„Éº„Ç∏„Åß„ÅØ„Äå„Åì„ÅÆÁû¨Èñì„ÅÆÁµåÈÅéÂàÜ„Äç„ÇíÂä†ÁÆó„Åó„Å¶Ë°®Á§∫„Å†„ÅëÊõ¥Êñ∞Ôºà„É™„Ç¢„É´„Çø„Ç§„É†Êõ¥Êñ∞„ÅØ„Åó„Å™„ÅÑÔºâ\r\n            const extra =\r\n                isRunning && startedAt ? Math.max(0, Math.floor((nowMs - startedAt) / 1000)) : 0;\r\n\r\n            const status: TaskStatus =\r\n                t?.status === \"not_decided\" || t?.status === \"todo\" || t?.status === \"doing\" || t?.status === \"done\"\r\n                    ? t.status\r\n                    : \"todo\";\r\n\r\n            return {\r\n                id: typeof t?.id === \"string\" ? t.id : crypto.randomUUID(),\r\n                title: typeof t?.title === \"string\" ? t.title : \"\",\r\n                status,\r\n                tag: typeof t?.tag === \"string\" ? t.tag : null,\r\n\r\n                priority: (PRIORITY_ORDER as string[]).includes(t?.priority) ? (t.priority as TaskPriority) : \"p1\",\r\n\r\n                estimatedMinutes:\r\n                    typeof t?.estimatedMinutes === \"number\" && t.estimatedMinutes >= 0 ? Math.floor(t.estimatedMinutes) : null,\r\n\r\n                actualSeconds: baseActual + extra,\r\n                isToday: typeof t?.isToday === \"boolean\" ? t.isToday : false,\r\n\r\n                isRunning,\r\n                startedAt,\r\n            };\r\n        });\r\n    } catch {\r\n        return [];\r\n    }\r\n}\r\n\r\nexport function buildStats(tasks: Task[]): ReportStats {\r\n    const totalCount = tasks.length;\r\n    const doneCount = tasks.filter((t) => t.status === \"done\").length;\r\n    const todayRemaining = tasks.filter((t) => t.isToday && t.status !== \"done\").length;\r\n\r\n    const totalActualSeconds = tasks.reduce((sum, t) => sum + (t.actualSeconds ?? 0), 0);\r\n\r\n    // Ë¶ãÁ©çÁ≤æÂ∫¶ÔºàÂπ≥ÂùáÂ∑ÆÂàÜ = ÂÆüÁ∏æ(ÂàÜ) - Ë¶ãÁ©ç(ÂàÜ)Ôºâ\r\n    const withEst = tasks.filter((t) => t.estimatedMinutes != null);\r\n    const estimatedCount = withEst.length;\r\n\r\n    let avgDiffMinutes: number | null = null;\r\n    if (estimatedCount > 0) {\r\n        const diffs = withEst.map((t) => {\r\n            const actualMin = Math.floor((t.actualSeconds ?? 0) / 60);\r\n            const estMin = t.estimatedMinutes ?? 0;\r\n            return actualMin - estMin;\r\n        });\r\n        avgDiffMinutes = diffs.reduce((a, b) => a + b, 0) / diffs.length;\r\n    }\r\n\r\n    // „Çø„Ç∞Âà•Ôºà‰∏ä‰Ωç3Ôºâ\r\n    const map = new Map<string, number>();\r\n    for (const t of tasks) {\r\n        const key = safeTagLabel(t.tag);\r\n        map.set(key, (map.get(key) ?? 0) + (t.actualSeconds ?? 0));\r\n    }\r\n\r\n    const topTags = Array.from(map.entries())\r\n        .map(([tag, seconds]) => ({ tag, seconds }))\r\n        .filter((x) => x.seconds > 0)\r\n        .sort((a, b) => b.seconds - a.seconds)\r\n        .slice(0, 3);\r\n\r\n    // „Éè„Ç§„É©„Ç§„ÉàÊäΩÂá∫: P0„ÅÆÂÆå‰∫Ü„Çø„Çπ„ÇØ„ÄÅ„Åæ„Åü„ÅØÊôÇÈñì„Åå„Åã„Åã„Å£„ÅüÂÆå‰∫Ü„Çø„Çπ„ÇØ‰∏ä‰Ωç\r\n    const highlights = tasks\r\n        .filter(t => t.status === \"done\")\r\n        .sort((a, b) => {\r\n            // Priority first (p0 < p1 < p2)\r\n            const pRank = { p0: 0, p1: 1, p2: 2 };\r\n            if (a.priority !== b.priority) return pRank[a.priority] - pRank[b.priority];\r\n            // Then duration desc\r\n            return Math.abs(getTotalActualSeconds(b, 0)) - Math.abs(getTotalActualSeconds(a, 0));\r\n        })\r\n        .slice(0, 3);\r\n\r\n    return {\r\n        totalCount,\r\n        doneCount,\r\n        todayRemaining,\r\n        totalActualSeconds,\r\n        estimatedCount,\r\n        avgDiffMinutes,\r\n        topTags,\r\n        highlights,\r\n    };\r\n}\r\n\r\nexport function findThisWeekReport(reports: Report[]): Report | null {\r\n    const nowMs = Date.now();\r\n\r\n    const candidates = reports.filter((r) => {\r\n        const s = new Date(r.weekStart).getTime();\r\n        const e = new Date(r.weekEnd).getTime();\r\n        if (Number.isNaN(s) || Number.isNaN(e)) return false;\r\n        return s <= nowMs && nowMs <= e;\r\n    });\r\n\r\n    if (candidates.length === 0) return null;\r\n\r\n    // createdAt„ÅåÊñ∞„Åó„ÅÑ„ÇÇ„ÅÆ„ÇíÂÑ™ÂÖà\r\n    return [...candidates].sort((a, b) => {\r\n        const ta = new Date(a.createdAt).getTime();\r\n        const tb = new Date(b.createdAt).getTime();\r\n        return (Number.isNaN(tb) ? 0 : tb) - (Number.isNaN(ta) ? 0 : ta);\r\n    })[0];\r\n}\r\n\r\nexport function formatAvgDiff(avg: number | null) {\r\n    if (avg == null) return { label: \"‚Äî\", className: \"text-slate-500\" };\r\n    const rounded = Math.round(avg * 10) / 10;\r\n    if (rounded === 0) return { label: \"¬±0ÂàÜ\", className: \"text-slate-700\" };\r\n    if (rounded > 0) return { label: `+${rounded}ÂàÜ`, className: \"text-red-600\" };\r\n    return { label: `${rounded}ÂàÜ`, className: \"text-emerald-600\" };\r\n}\r\n\r\n/** „Çø„Ç∞„ÅÆÊñáÂ≠óÂàó„Åã„ÇâËâ≤„ÇíÁîüÊàê„Åô„ÇãÔºà„Éë„Çπ„ÉÜ„É´„Ç´„É©„ÉºÔºâ */\r\nexport function getTagColor(tag: string | null): string {\r\n    if (!tag) return \"bg-slate-100 text-slate-600 border-slate-200\";\r\n\r\n    // Simple hash\r\n    let hash = 0;\r\n    for (let i = 0; i < tag.length; i++) {\r\n        hash = tag.charCodeAt(i) + ((hash << 5) - hash);\r\n    }\r\n\r\n    // Predefined Tailwind classes for badges\r\n    const colors = [\r\n        \"bg-red-50 text-red-700 border-red-100\",\r\n        \"bg-orange-50 text-orange-700 border-orange-100\",\r\n        \"bg-amber-50 text-amber-700 border-amber-100\",\r\n        \"bg-yellow-50 text-yellow-700 border-yellow-100\",\r\n        \"bg-lime-50 text-lime-700 border-lime-100\",\r\n        \"bg-green-50 text-green-700 border-green-100\",\r\n        \"bg-emerald-50 text-emerald-700 border-emerald-100\",\r\n        \"bg-teal-50 text-teal-700 border-teal-100\",\r\n        \"bg-cyan-50 text-cyan-700 border-cyan-100\",\r\n        \"bg-sky-50 text-sky-700 border-sky-100\",\r\n        \"bg-blue-50 text-blue-700 border-blue-100\",\r\n        \"bg-indigo-50 text-indigo-700 border-indigo-100\",\r\n        \"bg-violet-50 text-violet-700 border-violet-100\",\r\n        \"bg-purple-50 text-purple-700 border-purple-100\",\r\n        \"bg-fuchsia-50 text-fuchsia-700 border-fuchsia-100\",\r\n        \"bg-pink-50 text-pink-700 border-pink-100\",\r\n        \"bg-rose-50 text-rose-700 border-rose-100\",\r\n    ];\r\n\r\n    const index = Math.abs(hash) % colors.length;\r\n    return colors[index];\r\n}\r\n\r\nexport const TAG_COLORS: Record<string, string> = {\r\n    \"ÈñãÁô∫\": \"#6366f1\", // Indigo\r\n    \"Â≠¶Áøí\": \"#10b981\", // Emerald\r\n    \"‰∫ãÂãô\": \"#f59e0b\", // Amber\r\n    \"Â∞±Ê¥ª\": \"#ec4899\", // Pink\r\n    \"ÁîüÊ¥ª\": \"#3b82f6\", // Blue\r\n    \"„Åù„ÅÆ‰ªñ\": \"#94a3b8\", // Slate\r\n};\r\n\r\nexport function getTagColorHex(tag: string): string {\r\n    if (TAG_COLORS[tag]) return TAG_COLORS[tag];\r\n    // Randomish pastel\r\n    let hash = 0;\r\n    for (let i = 0; i < tag.length; i++) {\r\n        hash = tag.charCodeAt(i) + ((hash << 5) - hash);\r\n    }\r\n    const hue = Math.abs(hash) % 360;\r\n    return `hsl(${hue}, 70%, 60%)`;\r\n}\r\n\r\n// --- Trend Analysis Data Loading ---\r\nexport type TrendData = {\r\n    id: string;\r\n    label: string;\r\n    focusTime: number; // in hours\r\n    doneCount: number;\r\n    completionRate: number; // 0-100\r\n    // Dynamic tag usage: { \"ÈñãÁô∫\": 2.5, \"Â≠¶Áøí\": 1.0, ... }\r\n    [key: string]: string | number;\r\n};\r\n\r\nexport function loadAllReportsStats(reports: Report[]): TrendData[] {\r\n    const data: TrendData[] = [];\r\n    const now = Date.now();\r\n\r\n    // Sort reports by date asc (Oldest -> Newest)\r\n    const sorted = [...reports].sort((a, b) => a.createdAt.localeCompare(b.createdAt));\r\n\r\n    for (const r of sorted) {\r\n        const tasks = loadTasks(r.id, now);\r\n\r\n        // Stats\r\n        const total = tasks.length;\r\n        const done = tasks.filter(t => t.status === \"done\").length;\r\n        const rate = total > 0 ? Math.round((done / total) * 100) : 0;\r\n\r\n        let totalSec = 0;\r\n        const tagMap: Record<string, number> = {};\r\n\r\n        tasks.forEach(t => {\r\n            const sec = getTotalActualSeconds(t, now);\r\n            totalSec += sec;\r\n            const tag = safeTagLabel(t.tag);\r\n            tagMap[tag] = (tagMap[tag] ?? 0) + sec;\r\n        });\r\n\r\n        const hours = parseFloat((totalSec / 3600).toFixed(1));\r\n\r\n        // Label\r\n        const d = new Date(r.createdAt);\r\n        const label = !Number.isNaN(d.getTime()) ? `${d.getMonth() + 1}/${d.getDate()}` : \"N/A\";\r\n\r\n        const row: TrendData = {\r\n            id: r.id,\r\n            label,\r\n            focusTime: hours,\r\n            doneCount: done,\r\n            completionRate: rate,\r\n        };\r\n\r\n        // Add tags to row (converted to hours)\r\n        Object.keys(tagMap).forEach(tag => {\r\n            row[tag] = parseFloat((tagMap[tag] / 3600).toFixed(1));\r\n        });\r\n\r\n        data.push(row);\r\n    }\r\n    return data;\r\n}\r\n\r\n// --- Sample Data Generation ---\r\nexport function generateSampleReports(): Report[] {\r\n    const samples: Report[] = [];\r\n    const now = new Date();\r\n\r\n    // Generate last 8 weeks\r\n    for (let i = 8; i > 0; i--) {\r\n        const targetDate = new Date(now);\r\n        targetDate.setDate(now.getDate() - i * 7); // Go back i weeks\r\n\r\n        const { start, end } = getWeekRange(targetDate);\r\n        const id = crypto.randomUUID();\r\n        const weekStartIso = start.toISOString();\r\n        const weekEndIso = end.toISOString();\r\n\r\n        const report: Report = {\r\n            id,\r\n            title: formatWeekRangeTitle(weekStartIso, weekEndIso),\r\n            description: \"„Çµ„É≥„Éó„É´„Éá„Éº„ÇøÔºöÈÅéÂéª„ÅÆÊ¥ªÂãïÂ±•Ê≠¥„Åß„Åô„ÄÇ\",\r\n            createdAt: targetDate.toISOString(),\r\n            weekStart: weekStartIso,\r\n            weekEnd: weekEndIso,\r\n        };\r\n\r\n        samples.push(report);\r\n\r\n        // Generate Dummy Tasks\r\n        const tasks: Task[] = [];\r\n        const taskCount = 5 + Math.floor(Math.random() * 8); // 5-12 tasks\r\n\r\n        for (let j = 0; j < taskCount; j++) {\r\n            const isDone = Math.random() > 0.3;\r\n            const tag = DEFAULT_TAGS[Math.floor(Math.random() * DEFAULT_TAGS.length)];\r\n            const durationMin = 30 + Math.floor(Math.random() * 120); // 30-150 min\r\n\r\n            const task: Task = {\r\n                id: crypto.randomUUID(),\r\n                title: `${tag}„ÅÆ„Çø„Çπ„ÇØ„Çµ„É≥„Éó„É´ ${j + 1}`,\r\n                status: isDone ? \"done\" : \"todo\",\r\n                tag,\r\n                priority: Math.random() > 0.8 ? \"p0\" : Math.random() > 0.5 ? \"p1\" : \"p2\",\r\n                isToday: false,\r\n                estimatedMinutes: durationMin,\r\n                actualSeconds: isDone ? durationMin * 60 : 0,\r\n                isRunning: false,\r\n                startedAt: null,\r\n            };\r\n            tasks.push(task);\r\n        }\r\n\r\n        // Save tasks to localStorage directly here? \r\n        // No, utility functions should probably format data, but side-effect here is cleaner for \"One Button\" action.\r\n        if (typeof window !== \"undefined\") {\r\n            window.localStorage.setItem(`${TASKS_KEY_PREFIX}${id}`, JSON.stringify(tasks));\r\n        }\r\n    }\r\n    return samples;\r\n}\r\n\r\nexport function generateSlackText(report: Report, tasks: Task[], note: string): string {\r\n    const doneTasks = tasks.filter(t => t.status === \"done\");\r\n    const doingTasks = tasks.filter(t => t.status === \"doing\");\r\n    // Removed wipTasks as it duplicated doingTasks or used wrong status\r\n    const todoTasks = tasks.filter(t => t.status === \"todo\");\r\n\r\n    const formatTask = (t: Task) => {\r\n        const time = formatHMFromSecondsSimple(getTotalActualSeconds(t, 0));\r\n        const est = t.estimatedMinutes ? ` (‰∫à${t.estimatedMinutes}ÂàÜ)` : \"\";\r\n        return `‚Ä¢ ${t.title} [${time}${est}]`;\r\n    };\r\n\r\n    return `*${report.title}*\r\n${report.description ? `_${report.description}_` : \"\"}\r\n\r\n*‚úÖ ÂÆå‰∫Ü (${doneTasks.length})*\r\n${doneTasks.map(formatTask).join(\"\\n\") || \"„Å™„Åó\"}\r\n\r\n*üöß ÈÄ≤Ë°å‰∏≠ (${doingTasks.length})*\r\n${doingTasks.map(formatTask).join(\"\\n\") || \"„Å™„Åó\"}\r\n\r\n*üìÖ „Éà„Ç•„Éâ„Ç• (${todoTasks.length})*\r\n${todoTasks.map(formatTask).join(\"\\n\") || \"„Å™„Åó\"}\r\n\r\n*üí≠ ÊåØ„ÇäËøî„Çä*\r\n${note || \"Ë®òËø∞„Å™„Åó\"}\r\n`;\r\n}\r\n\r\nexport function generateNotionText(report: Report, tasks: Task[], note: string): string {\r\n    const doneTasks = tasks.filter(t => t.status === \"done\");\r\n    const doingTasks = tasks.filter(t => t.status === \"doing\");\r\n    const todoTasks = tasks.filter(t => t.status === \"todo\");\r\n\r\n    const formatTask = (t: Task) => {\r\n        const time = formatHMFromSecondsSimple(getTotalActualSeconds(t, 0));\r\n        return `- [ ] ${t.title} #time(${time})`;\r\n    };\r\n\r\n    // Notion uses markdown-like structure\r\n    return `# ${report.title}\r\n${report.description}\r\n\r\n## ‰ªäÈÄ±„ÅÆÈÄ≤Êçó\r\n### ÂÆå‰∫Ü\r\n${doneTasks.map(formatTask).join(\"\\n\") || \"„Å™„Åó\"}\r\n\r\n### ÈÄ≤Ë°å‰∏≠\r\n${doingTasks.map(formatTask).join(\"\\n\") || \"„Å™„Åó\"}\r\n\r\n### ‰ªäÂæå„ÅÆ‰∫àÂÆö\r\n${todoTasks.map(formatTask).join(\"\\n\") || \"„Å™„Åó\"}\r\n\r\n## ÊåØ„ÇäËøî„Çä\r\n${note}\r\n`;\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 728, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hinat/projects/weekly-report-app/src/components/gamification/UserLevelCard.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { LevelInfo } from \"@/lib/gamification\";\r\n\r\ntype Props = {\r\n    levelInfo: LevelInfo;\r\n};\r\n\r\nexport function UserLevelCard({ levelInfo }: Props) {\r\n    const { level, rank, currentLevelXP, nextLevelXP, progressPercent, totalXP } = levelInfo;\r\n\r\n    return (\r\n        <div className=\"relative overflow-hidden rounded-2xl bg-white/60 dark:bg-black/80 backdrop-blur-md border border-white/40 dark:border-[#2f3336] shadow-sm p-4 w-full max-w-sm\">\r\n            {/* Rank Background Glow */}\r\n            <div className={`absolute -top-10 -right-10 w-32 h-32 rounded-full opacity-10 bg-current ${rank.color}`} />\r\n\r\n            <div className=\"relative z-10 flex items-center justify-between mb-2\">\r\n                <div>\r\n                    <span className={`text-xs font-bold tracking-wider uppercase opacity-70 ${rank.color}`}>\r\n                        {rank.name}\r\n                    </span>\r\n                    <div className=\"flex items-baseline gap-1\">\r\n                        <span className=\"text-sm font-medium text-slate-500\">Lv.</span>\r\n                        <span className=\"text-3xl font-black text-slate-800 tracking-tight\">{level}</span>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"text-right\">\r\n                    <div className=\"text-[10px] uppercase tracking-widest text-slate-400 dark:text-[#71767b] font-bold\">Total XP</div>\r\n                    <div className=\"text-sm font-mono font-medium text-slate-600 dark:text-[#e7e9ea]\">{totalXP.toLocaleString()}</div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Progress Bar */}\r\n            <div className=\"relative h-3 w-full bg-slate-100 dark:bg-[#16181c] rounded-full overflow-hidden border border-slate-200/50 dark:border-[#2f3336]\">\r\n                <motion.div\r\n                    initial={{ width: 0 }}\r\n                    animate={{ width: `${progressPercent}%` }}\r\n                    transition={{ duration: 1, ease: \"easeOut\" }}\r\n                    className={`absolute inset-y-0 left-0 rounded-full bg-gradient-to-r from-indigo-500 to-purple-500`}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"flex justify-between mt-1 text-[10px] font-medium text-slate-400 dark:text-[#71767b]\">\r\n                <span>{currentLevelXP} XP</span>\r\n                <span>NEXT: {nextLevelXP - currentLevelXP} XP</span>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport function MiniUserLevelBadge({ levelInfo }: Props) {\r\n    const { level, rank } = levelInfo;\r\n    return (\r\n        <div className=\"inline-flex items-center gap-2 px-3 py-1 bg-white/50 dark:bg-[#16181c] backdrop-blur-sm rounded-full border border-white/60 dark:border-[#2f3336] shadow-sm\">\r\n            <span className={`text-[10px] font-bold uppercase tracking-wider ${rank.color}`}>\r\n                {rank.name}\r\n            </span>\r\n            <div className=\"w-px h-3 bg-slate-300 dark:bg-[#2f3336]\" />\r\n            <span className=\"text-xs font-bold text-slate-700 dark:text-[#e7e9ea]\">Lv.{level}</span>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAGA;AAHA;;;AAUO,SAAS,cAAc,EAAE,SAAS,EAAS;IAC9C,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,cAAc,EAAE,WAAW,EAAE,eAAe,EAAE,OAAO,EAAE,GAAG;IAE/E,qBACI,6LAAC;QAAI,WAAU;;0BAEX,6LAAC;gBAAI,WAAW,CAAC,wEAAwE,EAAE,KAAK,KAAK,EAAE;;;;;;0BAEvG,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;;0CACG,6LAAC;gCAAK,WAAW,CAAC,sDAAsD,EAAE,KAAK,KAAK,EAAE;0CACjF,KAAK,IAAI;;;;;;0CAEd,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAK,WAAU;kDAAqC;;;;;;kDACrD,6LAAC;wCAAK,WAAU;kDAAqD;;;;;;;;;;;;;;;;;;kCAI7E,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAI,WAAU;0CAAqF;;;;;;0CACpG,6LAAC;gCAAI,WAAU;0CAAoE,QAAQ,cAAc;;;;;;;;;;;;;;;;;;0BAKjH,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC,uMAAM,CAAC,GAAG;oBACP,SAAS;wBAAE,OAAO;oBAAE;oBACpB,SAAS;wBAAE,OAAO,GAAG,gBAAgB,CAAC,CAAC;oBAAC;oBACxC,YAAY;wBAAE,UAAU;wBAAG,MAAM;oBAAU;oBAC3C,WAAW,CAAC,qFAAqF,CAAC;;;;;;;;;;;0BAI1G,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;;4BAAM;4BAAe;;;;;;;kCACtB,6LAAC;;4BAAK;4BAAO,cAAc;4BAAe;;;;;;;;;;;;;;;;;;;AAI1D;KAzCgB;AA2CT,SAAS,mBAAmB,EAAE,SAAS,EAAS;IACnD,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG;IACxB,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAK,WAAW,CAAC,+CAA+C,EAAE,KAAK,KAAK,EAAE;0BAC1E,KAAK,IAAI;;;;;;0BAEd,6LAAC;gBAAI,WAAU;;;;;;0BACf,6LAAC;gBAAK,WAAU;;oBAAuD;oBAAI;;;;;;;;;;;;;AAGvF;MAXgB"}},
    {"offset": {"line": 937, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hinat/projects/weekly-report-app/src/components/ThemeToggle.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useTheme } from \"next-themes\";\r\nimport { SunIcon, MoonIcon, ComputerDesktopIcon } from \"@heroicons/react/24/outline\";\r\nimport { cn } from \"@/lib/reportUtils\";\r\n\r\nexport function ThemeToggle({ className }: { className?: string }) {\r\n    const { theme, setTheme } = useTheme();\r\n    const [mounted, setMounted] = useState(false);\r\n\r\n    useEffect(() => {\r\n        setMounted(true);\r\n    }, []);\r\n\r\n    if (!mounted) return null;\r\n\r\n    return (\r\n        <div className={cn(\"flex items-center gap-1 bg-slate-100/50 p-1 rounded-lg border border-slate-200 dark:bg-black dark:border-[#2f3336]\", className)}>\r\n            <button\r\n                type=\"button\"\r\n                onClick={() => setTheme(\"light\")}\r\n                className={cn(\r\n                    \"p-1.5 rounded transition-all\",\r\n                    theme === \"light\"\r\n                        ? \"bg-white text-yellow-500 shadow-sm dark:bg-[#16181c]\"\r\n                        : \"text-slate-400 hover:text-slate-600 dark:text-[#71767b] dark:hover:text-[#e7e9ea]\"\r\n                )}\r\n                title=\"Light Mode\"\r\n            >\r\n                <SunIcon className=\"w-4 h-4\" />\r\n            </button>\r\n            <button\r\n                type=\"button\"\r\n                onClick={() => setTheme(\"dark\")}\r\n                className={cn(\r\n                    \"p-1.5 rounded transition-all\",\r\n                    theme === \"dark\"\r\n                        ? \"bg-white text-indigo-500 shadow-sm dark:bg-[#16181c] dark:text-[#1d9bf0]\"\r\n                        : \"text-slate-400 hover:text-slate-600 dark:text-[#71767b] dark:hover:text-[#e7e9ea]\"\r\n                )}\r\n                title=\"Dark Mode\"\r\n            >\r\n                <MoonIcon className=\"w-4 h-4\" />\r\n            </button>\r\n            <button\r\n                type=\"button\"\r\n                onClick={() => setTheme(\"system\")}\r\n                className={cn(\r\n                    \"p-1.5 rounded transition-all\",\r\n                    theme === \"system\"\r\n                        ? \"bg-white text-slate-700 shadow-sm dark:bg-[#16181c] dark:text-[#e7e9ea]\"\r\n                        : \"text-slate-400 hover:text-slate-600 dark:text-[#71767b] dark:hover:text-[#e7e9ea]\"\r\n                )}\r\n                title=\"System Preference\"\r\n            >\r\n                <ComputerDesktopIcon className=\"w-4 h-4\" />\r\n            </button>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AACA;;;AALA;;;;;AAOO,SAAS,YAAY,EAAE,SAAS,EAA0B;;IAC7D,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,IAAA,+JAAQ;IACpC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;iCAAC;YACN,WAAW;QACf;gCAAG,EAAE;IAEL,IAAI,CAAC,SAAS,OAAO;IAErB,qBACI,6LAAC;QAAI,WAAW,IAAA,kIAAE,EAAC,sHAAsH;;0BACrI,6LAAC;gBACG,MAAK;gBACL,SAAS,IAAM,SAAS;gBACxB,WAAW,IAAA,kIAAE,EACT,gCACA,UAAU,UACJ,yDACA;gBAEV,OAAM;0BAEN,cAAA,6LAAC,2NAAO;oBAAC,WAAU;;;;;;;;;;;0BAEvB,6LAAC;gBACG,MAAK;gBACL,SAAS,IAAM,SAAS;gBACxB,WAAW,IAAA,kIAAE,EACT,gCACA,UAAU,SACJ,6EACA;gBAEV,OAAM;0BAEN,cAAA,6LAAC,8NAAQ;oBAAC,WAAU;;;;;;;;;;;0BAExB,6LAAC;gBACG,MAAK;gBACL,SAAS,IAAM,SAAS;gBACxB,WAAW,IAAA,kIAAE,EACT,gCACA,UAAU,WACJ,4EACA;gBAEV,OAAM;0BAEN,cAAA,6LAAC,+PAAmB;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAI/C;GArDgB;;QACgB,+JAAQ;;;KADxB"}},
    {"offset": {"line": 1047, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hinat/projects/weekly-report-app/src/components/DashboardStats.tsx"],"sourcesContent":["import Link from \"next/link\";\r\nimport React from \"react\";\r\nimport {\r\n    type Report,\r\n    type ReportStats,\r\n    formatDate,\r\n    formatHMFromSecondsSimple,\r\n} from \"@/lib/reportUtils\";\r\n\r\ntype Props = {\r\n    thisWeekReport: Report | null;\r\n    thisWeekStats: ReportStats | null;\r\n    onRefresh: () => void;\r\n};\r\n\r\nexport function DashboardStats({ thisWeekReport, thisWeekStats, onRefresh }: Props) {\r\n    if (!thisWeekReport || !thisWeekStats) {\r\n        return (\r\n            <div className=\"rounded-2xl border border-dashed border-slate-200 bg-slate-50/50 dark:bg-black dark:border-[#2f3336] p-6 text-center\">\r\n                <p className=\"text-sm text-slate-500 dark:text-[#71767b]\">\r\n                    ‰ªäÈÄ±„ÅÆ„É¨„Éù„Éº„Éà„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„ÄÇÂè≥‰∏ä„ÅÆ„ÄåÊñ∞„Åó„ÅÑÈÄ±„ÇíËøΩÂä†„Äç„Åã„Çâ‰ΩúÊàê„Åß„Åç„Åæ„Åô„ÄÇ\r\n                </p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const completionRate =\r\n        thisWeekStats.totalCount === 0\r\n            ? 0\r\n            : Math.round((thisWeekStats.doneCount / thisWeekStats.totalCount) * 100);\r\n\r\n    return (\r\n        <section className=\"space-y-4\">\r\n            <div className=\"flex items-center justify-between px-1\">\r\n                <h2 className=\"text-base font-bold text-slate-800 dark:text-[#e7e9ea] flex items-center gap-2\">\r\n                    üìä „Éõ„Éº„É† <span className=\"text-xs font-normal text-slate-400 dark:text-[#71767b]\">| ‰ªäÈÄ±„ÅÆÁä∂Ê≥Å</span>\r\n                </h2>\r\n                <button\r\n                    type=\"button\"\r\n                    onClick={onRefresh}\r\n                    className=\"text-xs text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-slate-200 hover:underline transition-colors\"\r\n                >\r\n                    ÈõÜË®à„ÇíÊõ¥Êñ∞\r\n                </button>\r\n            </div>\r\n\r\n            <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-4\">\r\n                {/* Link Card */}\r\n                <Link\r\n                    href={`/reports/${thisWeekReport.id}`}\r\n                    className=\"group relative flex flex-col justify-between overflow-hidden rounded-2xl border border-slate-200 bg-white dark:bg-black dark:border-[#2f3336] p-5 shadow-sm hover:shadow-md hover:border-slate-300 dark:hover:border-[#536471] transition-all duration-200\"\r\n                >\r\n                    <div className=\"absolute right-0 top-0 h-16 w-16 -mr-4 -mt-4 bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-transparent dark:to-transparent rounded-full blur-2xl opacity-50 group-hover:opacity-100 transition-opacity\" />\r\n\r\n                    <div>\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <span className=\"inline-block rounded-md bg-slate-100 dark:bg-[#16181c] px-2 py-0.5 text-[10px] font-semibold text-slate-600 dark:text-[#71767b]\">\r\n                                CURRENT\r\n                            </span>\r\n                            <span className=\"text-[10px] text-slate-400 dark:text-[#71767b]\">\r\n                                {formatDate(thisWeekReport.createdAt)}\r\n                            </span>\r\n                        </div>\r\n                        <h3 className=\"mt-2 text-sm font-bold text-slate-900 dark:text-[#e7e9ea] group-hover:text-indigo-600 dark:group-hover:text-[#1d9bf0] transition-colors line-clamp-1\">\r\n                            {thisWeekReport.title}\r\n                        </h3>\r\n                    </div>\r\n\r\n                    <div className=\"mt-4 flex items-center justify-end text-xs font-medium text-slate-500 dark:text-[#71767b] group-hover:translate-x-1 transition-transform\">\r\n                        Èñã„Åè <span className=\"ml-1\">‚Üí</span>\r\n                    </div>\r\n                </Link>\r\n\r\n                {/* Total Time */}\r\n                <div className=\"rounded-2xl border border-slate-100 dark:border-[#2f3336] bg-white dark:bg-black p-5 shadow-sm flex flex-col justify-between relative overflow-hidden\">\r\n                    <div className=\"absolute right-0 top-0 h-20 w-20 -mr-6 -mt-6 bg-emerald-50 dark:bg-transparent rounded-full blur-xl opacity-60\" />\r\n                    <p className=\"text-xs font-medium text-slate-500 dark:text-[#71767b] z-10\">ÂêàË®àÂÆüÁ∏æÊôÇÈñì</p>\r\n                    <div className=\"mt-2 z-10\">\r\n                        <span className=\"text-2xl font-bold text-slate-800 dark:text-[#e7e9ea] tracking-tight\">\r\n                            {formatHMFromSecondsSimple(thisWeekStats.totalActualSeconds)}\r\n                        </span>\r\n                        <p className=\"text-[10px] text-slate-400 dark:text-[#71767b] mt-1\">„Çø„Çπ„ÇØÂÖ®‰Ωì„ÅÆ‰ΩúÊ•≠ÊôÇÈñì</p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Completion Rate */}\r\n                <div className=\"rounded-2xl border border-slate-100 dark:border-[#2f3336] bg-white dark:bg-black p-5 shadow-sm flex flex-col justify-between relative overflow-hidden\">\r\n                    <div className=\"absolute right-0 top-0 h-20 w-20 -mr-6 -mt-6 bg-blue-50 dark:bg-transparent rounded-full blur-xl opacity-60\" />\r\n                    <p className=\"text-xs font-medium text-slate-500 dark:text-[#71767b] z-10\">ÂÆå‰∫ÜÁéá</p>\r\n                    <div className=\"mt-2 z-10\">\r\n                        <div className=\"flex items-baseline gap-2\">\r\n                            <span className=\"text-2xl font-bold text-slate-800 dark:text-[#e7e9ea] tracking-tight\">\r\n                                {thisWeekStats.totalCount === 0 ? \"‚Äî\" : `${completionRate}%`}\r\n                            </span>\r\n                            <span className=\"text-xs text-slate-500 dark:text-[#71767b]\">\r\n                                ({thisWeekStats.doneCount}/{thisWeekStats.totalCount})\r\n                            </span>\r\n                        </div>\r\n                        {/* Progress Bar */}\r\n                        <div className=\"mt-2 h-1.5 w-full rounded-full bg-slate-100 dark:bg-[#2f3336] overflow-hidden\">\r\n                            <div\r\n                                className=\"h-full bg-blue-500 rounded-full\"\r\n                                style={{ width: `${completionRate}%` }}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Today Remaining */}\r\n                <div className=\"rounded-2xl border border-slate-100 dark:border-[#2f3336] bg-white dark:bg-black p-5 shadow-sm flex flex-col justify-between relative overflow-hidden\">\r\n                    <div className=\"absolute right-0 top-0 h-20 w-20 -mr-6 -mt-6 bg-amber-50 dark:bg-transparent rounded-full blur-xl opacity-60\" />\r\n                    <p className=\"text-xs font-medium text-slate-500 dark:text-[#71767b] z-10\">‰ªäÊó•„ÅÆÊÆã„Çä„Çø„Çπ„ÇØ</p>\r\n                    <div className=\"mt-2 z-10\">\r\n                        <span className={`text-2xl font-bold tracking-tight ${thisWeekStats.todayRemaining > 0 ? 'text-amber-600 dark:text-amber-500' : 'text-slate-300 dark:text-[#2f3336]'}`}>\r\n                            {thisWeekStats.todayRemaining}\r\n                            <span className=\"text-sm font-normal text-slate-400 dark:text-[#71767b] ml-1\">‰ª∂</span>\r\n                        </span>\r\n                        <p className=\"text-[10px] text-slate-400 dark:text-[#71767b] mt-1\">\r\n                            {thisWeekStats.todayRemaining > 0 ? \"„ÅÇ„Å®‰∏ÄÊÅØ„Åß„ÅôÔºÅ\" : \"„Åô„Åπ„Å¶ÂÆå‰∫Ü„Åó„Åæ„Åó„Åü üéâ\"}\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAaO,SAAS,eAAe,EAAE,cAAc,EAAE,aAAa,EAAE,SAAS,EAAS;IAC9E,IAAI,CAAC,kBAAkB,CAAC,eAAe;QACnC,qBACI,6LAAC;YAAI,WAAU;sBACX,cAAA,6LAAC;gBAAE,WAAU;0BAA6C;;;;;;;;;;;IAKtE;IAEA,MAAM,iBACF,cAAc,UAAU,KAAK,IACvB,IACA,KAAK,KAAK,CAAC,AAAC,cAAc,SAAS,GAAG,cAAc,UAAU,GAAI;IAE5E,qBACI,6LAAC;QAAQ,WAAU;;0BACf,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAG,WAAU;;4BAAiF;0CACpF,6LAAC;gCAAK,WAAU;0CAAyD;;;;;;;;;;;;kCAEpF,6LAAC;wBACG,MAAK;wBACL,SAAS;wBACT,WAAU;kCACb;;;;;;;;;;;;0BAKL,6LAAC;gBAAI,WAAU;;kCAEX,6LAAC,0KAAI;wBACD,MAAM,CAAC,SAAS,EAAE,eAAe,EAAE,EAAE;wBACrC,WAAU;;0CAEV,6LAAC;gCAAI,WAAU;;;;;;0CAEf,6LAAC;;kDACG,6LAAC;wCAAI,WAAU;;0DACX,6LAAC;gDAAK,WAAU;0DAAkI;;;;;;0DAGlJ,6LAAC;gDAAK,WAAU;0DACX,IAAA,0IAAU,EAAC,eAAe,SAAS;;;;;;;;;;;;kDAG5C,6LAAC;wCAAG,WAAU;kDACT,eAAe,KAAK;;;;;;;;;;;;0CAI7B,6LAAC;gCAAI,WAAU;;oCAA2I;kDACnJ,6LAAC;wCAAK,WAAU;kDAAO;;;;;;;;;;;;;;;;;;kCAKlC,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAI,WAAU;;;;;;0CACf,6LAAC;gCAAE,WAAU;0CAA8D;;;;;;0CAC3E,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAK,WAAU;kDACX,IAAA,yJAAyB,EAAC,cAAc,kBAAkB;;;;;;kDAE/D,6LAAC;wCAAE,WAAU;kDAAsD;;;;;;;;;;;;;;;;;;kCAK3E,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAI,WAAU;;;;;;0CACf,6LAAC;gCAAE,WAAU;0CAA8D;;;;;;0CAC3E,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAI,WAAU;;0DACX,6LAAC;gDAAK,WAAU;0DACX,cAAc,UAAU,KAAK,IAAI,MAAM,GAAG,eAAe,CAAC,CAAC;;;;;;0DAEhE,6LAAC;gDAAK,WAAU;;oDAA6C;oDACvD,cAAc,SAAS;oDAAC;oDAAE,cAAc,UAAU;oDAAC;;;;;;;;;;;;;kDAI7D,6LAAC;wCAAI,WAAU;kDACX,cAAA,6LAAC;4CACG,WAAU;4CACV,OAAO;gDAAE,OAAO,GAAG,eAAe,CAAC,CAAC;4CAAC;;;;;;;;;;;;;;;;;;;;;;;kCAOrD,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAI,WAAU;;;;;;0CACf,6LAAC;gCAAE,WAAU;0CAA8D;;;;;;0CAC3E,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAK,WAAW,CAAC,kCAAkC,EAAE,cAAc,cAAc,GAAG,IAAI,uCAAuC,sCAAsC;;4CACjK,cAAc,cAAc;0DAC7B,6LAAC;gDAAK,WAAU;0DAA8D;;;;;;;;;;;;kDAElF,6LAAC;wCAAE,WAAU;kDACR,cAAc,cAAc,GAAG,IAAI,YAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO5E;KA9GgB"}},
    {"offset": {"line": 1407, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hinat/projects/weekly-report-app/src/components/ReportList.tsx"],"sourcesContent":["import Link from \"next/link\";\r\nimport React, { useMemo } from \"react\";\r\nimport {\r\n    type Report,\r\n    type ReportStats,\r\n    formatDate,\r\n    formatHMFromSecondsSimple,\r\n    formatAvgDiff,\r\n    cn\r\n} from \"@/lib/reportUtils\";\r\n\r\ntype Props = {\r\n    reports: Report[];\r\n    statsById: Record<string, ReportStats>;\r\n    onDelete: (id: string, e: React.MouseEvent) => void;\r\n};\r\n\r\nexport function ReportList({ reports, statsById, onDelete }: Props) {\r\n    if (reports.length === 0) {\r\n        return (\r\n            <div className=\"rounded-2xl border border-dashed border-slate-200 dark:border-[#2f3336] bg-slate-50/50 dark:bg-black p-12 text-center\">\r\n                <p className=\"text-slate-500 dark:text-[#71767b] font-medium\">„Åæ„Å†„É¨„Éù„Éº„Éà„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</p>\r\n                <p className=\"text-sm text-slate-400 dark:text-[#536471] mt-2\">\r\n                    „ÄåÊñ∞„Åó„ÅÑÈÄ±„ÇíËøΩÂä†„Äç„Éú„Çø„É≥„Åã„Çâ„ÄÅ‰ªäÈÄ±„ÅÆ„É¨„Éù„Éº„Éà„Çí‰ΩúÊàê„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ\r\n                </p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <section className=\"space-y-4\">\r\n            <div className=\"flex items-center justify-between px-1\">\r\n                <h2 className=\"text-base font-bold text-slate-800 dark:text-[#e7e9ea] flex items-center gap-2\">\r\n                    üìë „É¨„Éù„Éº„Éà‰∏ÄË¶ß\r\n                </h2>\r\n                <p className=\"text-[10px] text-slate-400 dark:text-[#71767b]\">Total: {reports.length}</p>\r\n            </div>\r\n\r\n            <div className=\"space-y-3\">\r\n                {reports.map((report) => (\r\n                    <ReportRow\r\n                        key={report.id}\r\n                        report={report}\r\n                        stats={statsById[report.id]}\r\n                        onDelete={(e) => onDelete(report.id, e)}\r\n                    />\r\n                ))}\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n\r\nfunction ReportRow({\r\n    report,\r\n    stats,\r\n    onDelete,\r\n}: {\r\n    report: Report;\r\n    stats?: ReportStats;\r\n    onDelete: (e: React.MouseEvent) => void;\r\n}) {\r\n    const avg = formatAvgDiff(stats?.avgDiffMinutes ?? null);\r\n    const totalSec = stats?.totalActualSeconds ?? 0;\r\n    const done = stats?.doneCount ?? 0;\r\n    const total = stats?.totalCount ?? 0;\r\n    const topTags = stats?.topTags ?? [];\r\n\r\n    return (\r\n        <Link\r\n            href={`/reports/${report.id}`}\r\n            className=\"group relative flex flex-col md:flex-row md:items-center justify-between gap-4 p-5 rounded-xl border border-slate-200 bg-white dark:bg-black dark:border-[#2f3336] shadow-sm hover:shadow-md hover:border-indigo-300 dark:hover:border-[#536471] transition-all duration-200\"\r\n        >\r\n            <div className=\"flex flex-col sm:flex-row gap-4 sm:items-center justify-between\">\r\n                {/* Main Info */}\r\n                <div className=\"flex-1 min-w-0 space-y-1\">\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <h3 className=\"text-base font-bold text-slate-900 dark:text-[#e7e9ea] group-hover:text-indigo-600 dark:group-hover:text-[#1d9bf0] transition-colors truncate\">\r\n                            {report.title}\r\n                        </h3>\r\n                        <span className=\"hidden sm:inline-block rounded px-1.5 py-0.5 text-[10px] bg-slate-100 dark:bg-[#16181c] text-slate-500 dark:text-[#71767b] font-mono\">\r\n                            #{report.id}\r\n                        </span>\r\n                    </div>\r\n                    <p className=\"text-xs text-slate-500 dark:text-[#71767b] line-clamp-1 group-hover:text-slate-600 dark:group-hover:text-[#aab8c2]\">\r\n                        {report.description}\r\n                    </p>\r\n\r\n                    {/* Tags (Desktop) */}\r\n                    {topTags.length > 0 && (\r\n                        <div className=\"hidden sm:flex items-center gap-2 pt-1\">\r\n                            {topTags.slice(0, 3).map((t) => (\r\n                                <span\r\n                                    key={t.tag}\r\n                                    className=\"inline-flex items-center gap-1 rounded-full bg-slate-50 dark:bg-[#16181c] px-2 py-0.5 text-[10px] text-slate-600 dark:text-[#71767b] border border-slate-100 dark:border-[#2f3336]\"\r\n                                >\r\n                                    <span className=\"w-1.5 h-1.5 rounded-full bg-indigo-400\" />\r\n                                    {t.tag}\r\n                                    <span className=\"text-slate-400 dark:text-[#71767b] font-normal ml-0.5\">\r\n                                        {formatHMFromSecondsSimple(t.seconds)}\r\n                                    </span>\r\n                                </span>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Stats & Meta */}\r\n                <div className=\"flex flex-row sm:flex-col items-center sm:items-end justify-between sm:justify-center gap-3 sm:gap-1 text-right border-t sm:border-t-0 border-dashed pt-3 sm:pt-0 border-slate-100 dark:border-[#2f3336]\">\r\n                    <div className=\"flex items-center gap-3 sm:gap-4\">\r\n                        <div className=\"text-center sm:text-right\">\r\n                            <p className=\"text-[10px] text-slate-400 dark:text-[#71767b] uppercase tracking-wider font-semibold\">Done</p>\r\n                            <p className=\"text-sm font-bold text-slate-700 dark:text-[#e7e9ea]\">\r\n                                {done}\r\n                                <span className=\"text-xs font-medium text-slate-400 dark:text-[#71767b]\">/{total}</span>\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div className=\"w-px h-6 bg-slate-100 dark:bg-[#2f3336] hidden sm:block\" />\r\n\r\n                        <div className=\"text-center sm:text-right\">\r\n                            <p className=\"text-[10px] text-slate-400 dark:text-[#71767b] uppercase tracking-wider font-semibold\">Time</p>\r\n                            <p className=\"text-sm font-bold text-slate-700 dark:text-[#e7e9ea]\">\r\n                                {formatHMFromSecondsSimple(totalSec)}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center justify-end gap-3 mt-1 pl-2 sm:pl-0\">\r\n                        <span className=\"text-[10px] text-slate-400 dark:text-[#71767b]\">\r\n                            {formatDate(report.createdAt)}\r\n                        </span>\r\n                        <button\r\n                            onClick={(e) => {\r\n                                e.preventDefault();\r\n                                e.stopPropagation();\r\n                                onDelete(e);\r\n                            }}\r\n                            className=\"p-1 -mr-1 rounded-md text-slate-300 dark:text-[#71767b] hover:text-red-500 dark:hover:text-[#f4212e] hover:bg-red-50 dark:hover:bg-[#f4212e]/10 transition-colors\"\r\n                            title=\"ÂâäÈô§\"\r\n                        >\r\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n                                <path d=\"M3 6h18\" /><path d=\"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6\" /><path d=\"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2\" />\r\n                            </svg>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </Link>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAeO,SAAS,WAAW,EAAE,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAS;IAC9D,IAAI,QAAQ,MAAM,KAAK,GAAG;QACtB,qBACI,6LAAC;YAAI,WAAU;;8BACX,6LAAC;oBAAE,WAAU;8BAAiD;;;;;;8BAC9D,6LAAC;oBAAE,WAAU;8BAAkD;;;;;;;;;;;;IAK3E;IAEA,qBACI,6LAAC;QAAQ,WAAU;;0BACf,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAG,WAAU;kCAAiF;;;;;;kCAG/F,6LAAC;wBAAE,WAAU;;4BAAiD;4BAAQ,QAAQ,MAAM;;;;;;;;;;;;;0BAGxF,6LAAC;gBAAI,WAAU;0BACV,QAAQ,GAAG,CAAC,CAAC,uBACV,6LAAC;wBAEG,QAAQ;wBACR,OAAO,SAAS,CAAC,OAAO,EAAE,CAAC;wBAC3B,UAAU,CAAC,IAAM,SAAS,OAAO,EAAE,EAAE;uBAHhC,OAAO,EAAE;;;;;;;;;;;;;;;;AAStC;KAjCgB;AAmChB,SAAS,UAAU,EACf,MAAM,EACN,KAAK,EACL,QAAQ,EAKX;IACG,MAAM,MAAM,IAAA,6IAAa,EAAC,OAAO,kBAAkB;IACnD,MAAM,WAAW,OAAO,sBAAsB;IAC9C,MAAM,OAAO,OAAO,aAAa;IACjC,MAAM,QAAQ,OAAO,cAAc;IACnC,MAAM,UAAU,OAAO,WAAW,EAAE;IAEpC,qBACI,6LAAC,0KAAI;QACD,MAAM,CAAC,SAAS,EAAE,OAAO,EAAE,EAAE;QAC7B,WAAU;kBAEV,cAAA,6LAAC;YAAI,WAAU;;8BAEX,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAG,WAAU;8CACT,OAAO,KAAK;;;;;;8CAEjB,6LAAC;oCAAK,WAAU;;wCAAuI;wCACjJ,OAAO,EAAE;;;;;;;;;;;;;sCAGnB,6LAAC;4BAAE,WAAU;sCACR,OAAO,WAAW;;;;;;wBAItB,QAAQ,MAAM,GAAG,mBACd,6LAAC;4BAAI,WAAU;sCACV,QAAQ,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,kBACtB,6LAAC;oCAEG,WAAU;;sDAEV,6LAAC;4CAAK,WAAU;;;;;;wCACf,EAAE,GAAG;sDACN,6LAAC;4CAAK,WAAU;sDACX,+JAA0B,EAAE,OAAO;;;;;;;mCANnC,EAAE,GAAG;;;;;;;;;;;;;;;;8BAe9B,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAE,WAAU;sDAAwF;;;;;;sDACrG,6LAAC;4CAAE,WAAU;;gDACR;8DACD,6LAAC;oDAAK,WAAU;;wDAAyD;wDAAE;;;;;;;;;;;;;;;;;;;8CAInF,6LAAC;oCAAI,WAAU;;;;;;8CAEf,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAE,WAAU;sDAAwF;;;;;;sDACrG,6LAAC;4CAAE,WAAU;sDACR,IAAA,yJAAyB,EAAC;;;;;;;;;;;;;;;;;;sCAKvC,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAK,WAAU;8CACX,IAAA,0IAAU,EAAC,OAAO,SAAS;;;;;;8CAEhC,6LAAC;oCACG,SAAS,CAAC;wCACN,EAAE,cAAc;wCAChB,EAAE,eAAe;wCACjB,SAAS;oCACb;oCACA,WAAU;oCACV,OAAM;8CAEN,cAAA,6LAAC;wCAAI,OAAM;wCAA6B,OAAM;wCAAK,QAAO;wCAAK,SAAQ;wCAAY,MAAK;wCAAO,QAAO;wCAAe,aAAY;wCAAI,eAAc;wCAAQ,gBAAe;;0DACtK,6LAAC;gDAAK,GAAE;;;;;;0DAAY,6LAAC;gDAAK,GAAE;;;;;;0DAA0C,6LAAC;gDAAK,GAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQ9G;MAjGS"}},
    {"offset": {"line": 1768, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hinat/projects/weekly-report-app/src/components/dashboard/TrendAnalysis.tsx"],"sourcesContent":["import React from 'react';\r\nimport {\r\n    ResponsiveContainer,\r\n    BarChart,\r\n    Bar,\r\n    XAxis,\r\n    YAxis,\r\n    CartesianGrid,\r\n    Tooltip,\r\n    Legend,\r\n    ComposedChart,\r\n    Line,\r\n} from 'recharts';\r\nimport { type TrendData, getTagColorHex, DEFAULT_TAGS } from '@/lib/reportUtils';\r\n\r\ntype Props = {\r\n    data: TrendData[];\r\n    onGenerateSample?: () => void;\r\n};\r\n\r\nexport function TrendAnalysis({ data, onGenerateSample }: Props) {\r\n    if (data.length < 2) {\r\n        return (\r\n            <div className=\"p-12 text-center text-slate-500 dark:text-[#71767b] bg-white dark:bg-black rounded-lg shadow-sm border border-slate-100 dark:border-[#2f3336]\">\r\n                <div className=\"text-4xl mb-4\">üìâ</div>\r\n                <h3 className=\"text-lg font-bold text-slate-800 dark:text-[#e7e9ea] mb-2\">\r\n                    „Éá„Éº„Çø„Åå‰∏çË∂≥„Åó„Å¶„ÅÑ„Åæ„Åô\r\n                </h3>\r\n                <p className=\"text-sm mb-6\">\r\n                    „Éà„É¨„É≥„ÉâÂàÜÊûê„ÇíË°®Á§∫„Åô„Çã„Å´„ÅØ„ÄÅÂ∞ë„Å™„Åè„Å®„ÇÇ2ÈÄ±ÈñìÂàÜ„ÅÆÈÄ±Â†±„Éá„Éº„Çø„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ\r\n                </p>\r\n                {onGenerateSample && (\r\n                    <button\r\n                        onClick={onGenerateSample}\r\n                        className=\"px-6 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-full font-bold shadow-lg shadow-indigo-500/30 transition-all hover:scale-105 active:scale-95\"\r\n                    >\r\n                        ÈÅéÂéª„ÅÆ„Çµ„É≥„Éó„É´„Éá„Éº„Çø„ÇíÁîüÊàê„Åô„Çã\r\n                    </button>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-8\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                {/* 1. Weekly Focus Time */}\r\n                <div className=\"bg-white dark:bg-black p-6 rounded-lg shadow-sm border border-slate-100 dark:border-[#2f3336]\">\r\n                    <h3 className=\"text-lg font-bold text-slate-800 dark:text-[#e7e9ea] mb-6 flex items-center gap-2\">\r\n                        <span>‚è±Ô∏è</span> ÈÄ±Èñì„Éï„Ç©„Éº„Ç´„ÇπÊôÇÈñì\r\n                    </h3>\r\n                    <div className=\"h-64 w-full\">\r\n                        <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                            <BarChart data={data} margin={{ top: 10, right: 10, left: 0, bottom: 0 }}>\r\n                                <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"#334155\" opacity={0.3} />\r\n                                <XAxis dataKey=\"label\" tick={{ fontSize: 12, fill: '#71767b' }} />\r\n                                <YAxis tick={{ fontSize: 12, fill: '#71767b' }} unit=\"h\" />\r\n                                <Tooltip\r\n                                    contentStyle={{ borderRadius: '8px', border: '1px solid #2f3336', boxShadow: 'none', backgroundColor: '#000', color: '#e7e9ea' }}\r\n                                    cursor={{ fill: 'rgba(255,255,255,0.05)' }}\r\n                                />\r\n                                <Legend wrapperStyle={{ paddingTop: '10px' }} />\r\n                                <Bar\r\n                                    dataKey=\"focusTime\"\r\n                                    name=\"ÂÆüÁ®ºÂÉç(ÊôÇÈñì)\"\r\n                                    fill=\"#1d9bf0\"\r\n                                    radius={[4, 4, 0, 0]}\r\n                                    barSize={40}\r\n                                />\r\n                            </BarChart>\r\n                        </ResponsiveContainer>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* 2. Task Volume & Completion Rate */}\r\n                <div className=\"bg-white dark:bg-black p-6 rounded-lg shadow-sm border border-slate-100 dark:border-[#2f3336]\">\r\n                    <h3 className=\"text-lg font-bold text-slate-800 dark:text-[#e7e9ea] mb-6 flex items-center gap-2\">\r\n                        <span>üìä</span> „Çø„Çπ„ÇØÊ∂àÂåñÁéá\r\n                    </h3>\r\n                    <div className=\"h-64 w-full\">\r\n                        <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                            <ComposedChart data={data} margin={{ top: 10, right: 10, left: 0, bottom: 0 }}>\r\n                                <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"#334155\" opacity={0.3} />\r\n                                <XAxis dataKey=\"label\" tick={{ fontSize: 12, fill: '#71767b' }} />\r\n                                <YAxis yAxisId=\"left\" tick={{ fontSize: 12, fill: '#71767b' }} />\r\n                                <YAxis yAxisId=\"right\" orientation=\"right\" tick={{ fontSize: 12, fill: '#71767b' }} unit=\"%\" domain={[0, 100]} />\r\n                                <Tooltip\r\n                                    contentStyle={{ borderRadius: '8px', border: '1px solid #2f3336', boxShadow: 'none', backgroundColor: '#000', color: '#e7e9ea' }}\r\n                                    cursor={{ fill: 'rgba(255,255,255,0.05)' }}\r\n                                />\r\n                                <Legend wrapperStyle={{ paddingTop: '10px' }} />\r\n                                <Bar\r\n                                    yAxisId=\"left\"\r\n                                    dataKey=\"doneCount\"\r\n                                    name=\"ÂÆå‰∫ÜÊï∞\"\r\n                                    fill=\"#71767b\"\r\n                                    radius={[4, 4, 0, 0]}\r\n                                    barSize={30}\r\n                                    opacity={0.5}\r\n                                />\r\n                                <Line\r\n                                    yAxisId=\"right\"\r\n                                    type=\"monotone\"\r\n                                    dataKey=\"completionRate\"\r\n                                    name=\"ÂÆå‰∫ÜÁéá(%)\"\r\n                                    stroke=\"#00ba7c\"\r\n                                    strokeWidth={3}\r\n                                    dot={{ r: 4, fill: '#00ba7c', strokeWidth: 2, stroke: '#000' }}\r\n                                />\r\n                            </ComposedChart>\r\n                        </ResponsiveContainer>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* 3. Tag Distribution Trend */}\r\n            <div className=\"bg-white dark:bg-black p-6 rounded-lg shadow-sm border border-slate-100 dark:border-[#2f3336]\">\r\n                <h3 className=\"text-lg font-bold text-slate-800 dark:text-[#e7e9ea] mb-6 flex items-center gap-2\">\r\n                    <span>üé®</span> „Çø„Çπ„ÇØÂàÜÈáéÂà• ÊôÇÈñìÊé®ÁßªÔºà„Çø„Ç∞ÂàÜÊûêÔºâ\r\n                </h3>\r\n                <div className=\"h-80 w-full\">\r\n                    <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                        <BarChart data={data} margin={{ top: 10, right: 10, left: 0, bottom: 0 }}>\r\n                            <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"#334155\" opacity={0.3} />\r\n                            <XAxis dataKey=\"label\" tick={{ fontSize: 12, fill: '#71767b' }} />\r\n                            <YAxis tick={{ fontSize: 12, fill: '#71767b' }} unit=\"h\" />\r\n                            <Tooltip\r\n                                contentStyle={{ borderRadius: '8px', border: '1px solid #2f3336', boxShadow: 'none', backgroundColor: '#000', color: '#e7e9ea' }}\r\n                                cursor={{ fill: 'rgba(255,255,255,0.05)' }}\r\n                            />\r\n                            <Legend wrapperStyle={{ paddingTop: '10px' }} />\r\n                            {DEFAULT_TAGS.map((tag) => (\r\n                                <Bar\r\n                                    key={tag}\r\n                                    dataKey={tag}\r\n                                    name={tag}\r\n                                    stackId=\"a\"\r\n                                    fill={getTagColorHex(tag)}\r\n                                // radius is tricky with stack, let's keep it simple\r\n                                />\r\n                            ))}\r\n                        </BarChart>\r\n                    </ResponsiveContainer>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2279, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hinat/projects/weekly-report-app/src/components/ui/AnimatedCard.tsx"],"sourcesContent":["import React from \"react\";\r\nimport { motion, HTMLMotionProps } from \"framer-motion\";\r\nimport { clsx } from \"clsx\";\r\nimport { twMerge } from \"tailwind-merge\";\r\n\r\ntype Props = HTMLMotionProps<\"div\"> & {\r\n    delay?: number;\r\n};\r\n\r\nexport function AnimatedCard({ children, className, delay = 0, ...props }: Props) {\r\n    return (\r\n        <motion.div\r\n            initial={{ opacity: 0, y: 10 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, y: -10 }}\r\n            transition={{ duration: 0.3, delay, ease: \"easeOut\" }}\r\n            className={twMerge(clsx(\"glass-panel rounded-xl\", className))}\r\n            {...props}\r\n        >\r\n            {children}\r\n        </motion.div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;;;;;AAMO,SAAS,aAAa,EAAE,QAAQ,EAAE,SAAS,EAAE,QAAQ,CAAC,EAAE,GAAG,OAAc;IAC5E,qBACI,6LAAC,uMAAM,CAAC,GAAG;QACP,SAAS;YAAE,SAAS;YAAG,GAAG;QAAG;QAC7B,SAAS;YAAE,SAAS;YAAG,GAAG;QAAE;QAC5B,MAAM;YAAE,SAAS;YAAG,GAAG,CAAC;QAAG;QAC3B,YAAY;YAAE,UAAU;YAAK;YAAO,MAAM;QAAU;QACpD,WAAW,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC,0BAA0B;QACjD,GAAG,KAAK;kBAER;;;;;;AAGb;KAbgB"}},
    {"offset": {"line": 2329, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hinat/projects/weekly-report-app/src/lib/gamification.ts"],"sourcesContent":["import { Task, getTotalActualSeconds } from \"./reportUtils\";\r\n\r\nexport type Rank = {\r\n    name: string;\r\n    color: string; // Tailwind text color class or hex\r\n    minLevel: number;\r\n};\r\n\r\nexport const RANKS: Rank[] = [\r\n    { name: \"ÊîæÊµ™ËÄÖ (Wanderer)\", color: \"text-slate-500\", minLevel: 1 },\r\n    { name: \"ÂÜíÈô∫ËÄÖ (Adventurer)\", color: \"text-emerald-500\", minLevel: 5 },\r\n    { name: \"Êà¶Â£´ (Warrior)\", color: \"text-cyan-500\", minLevel: 10 },\r\n    { name: \"È®éÂ£´ (Knight)\", color: \"text-blue-600\", minLevel: 15 },\r\n    { name: \"ÈÅî‰∫∫ (Master)\", color: \"text-violet-600\", minLevel: 20 },\r\n    { name: \"Ëã±ÈõÑ (Hero)\", color: \"text-fuchsia-500\", minLevel: 30 },\r\n    { name: \"‰ºùË™¨ (Legend)\", color: \"text-amber-500\", minLevel: 45 },\r\n    { name: \"Á•û (God)\", color: \"text-rose-600\", minLevel: 60 },\r\n];\r\n\r\nexport type LevelInfo = {\r\n    level: number;\r\n    rank: Rank;\r\n    totalXP: number;\r\n    currentLevelXP: number; // XP earned in this level\r\n    nextLevelXP: number;    // XP needed to complete this level\r\n    progressPercent: number;\r\n};\r\n\r\n// --- XP Rules ---\r\nconst XP_PER_TASK_DONE = 150;\r\nconst XP_BONUS_P0 = 50;\r\nconst XP_PER_FOCUS_MINUTE = 1;\r\n\r\n/**\r\n * Calculate Total XP from a list of tasks (usually ALL tasks from ALL reports).\r\n */\r\nexport function calculateTotalXP(allTasks: Task[]): number {\r\n    let xp = 0;\r\n    for (const t of allTasks) {\r\n        // 1. Basic completion\r\n        if (t.status === \"done\") {\r\n            xp += XP_PER_TASK_DONE;\r\n            if (t.priority === \"p0\") {\r\n                xp += XP_BONUS_P0;\r\n            }\r\n        }\r\n\r\n        // 2. Focus Time (regardless of completion)\r\n        const totalSeconds = getTotalActualSeconds(t, 0); // 0 for strict historical calc, or now if realtime\r\n        const minutes = Math.floor(totalSeconds / 60);\r\n        if (minutes > 0) {\r\n            xp += minutes * XP_PER_FOCUS_MINUTE;\r\n        }\r\n    }\r\n    return xp;\r\n}\r\n\r\n/**\r\n * Determine Level from Total XP.\r\n * Using a simple standardized RPG curve (or fibonacci-ish).\r\n * Level N requires roughly N * 500 XP total? No, that's linear.\r\n * Let's use: XP = 200 * (Level^2) roughly.\r\n * Level = sqrt(XP / 200).\r\n * \r\n * Lv 1: 0 XP\r\n * Lv 2: 200 XP\r\n * Lv 5: 5000 XP (200 * 25)\r\n * Lv 10: 20000 XP\r\n */\r\nexport function getLevelInfo(totalXP: number): LevelInfo {\r\n    // Formula: Level = floor(sqrt(totalXP / 150)) + 1\r\n    // Adjusted constant '150' to tune pacing.\r\n    // Lv 1 starts at 0.\r\n    // Lv 2 needs 150 XP (1 task)\r\n    // Lv 5 needs 150 * 16 = 2400 XP (~16 tasks)\r\n    // Lv 10 needs 150 * 81 = 12150 XP (~80 tasks)\r\n\r\n    // Reverse: Required XP for Level L = 150 * (L-1)^2\r\n\r\n    const BASE_CONST = 150;\r\n    const level = Math.floor(Math.sqrt(totalXP / BASE_CONST)) + 1;\r\n\r\n    const currentLevelBaseXP = BASE_CONST * Math.pow(level - 1, 2);\r\n    const nextLevelBaseXP = BASE_CONST * Math.pow(level, 2);\r\n\r\n    const xpNeededForNext = nextLevelBaseXP - currentLevelBaseXP;\r\n    const xpInCurrent = totalXP - currentLevelBaseXP;\r\n\r\n    const progressPercent = Math.min(100, Math.max(0, Math.round((xpInCurrent / xpNeededForNext) * 100)));\r\n\r\n    // Find Rank\r\n    // Reverse loop to find highest matching rank\r\n    let rank = RANKS[0];\r\n    for (const r of RANKS) {\r\n        if (level >= r.minLevel) {\r\n            rank = r;\r\n        }\r\n    }\r\n\r\n    return {\r\n        level,\r\n        rank,\r\n        totalXP,\r\n        currentLevelXP: xpInCurrent,\r\n        nextLevelXP: xpNeededForNext,\r\n        progressPercent\r\n    };\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAQO,MAAM,QAAgB;IACzB;QAAE,MAAM;QAAkB,OAAO;QAAkB,UAAU;IAAE;IAC/D;QAAE,MAAM;QAAoB,OAAO;QAAoB,UAAU;IAAE;IACnE;QAAE,MAAM;QAAgB,OAAO;QAAiB,UAAU;IAAG;IAC7D;QAAE,MAAM;QAAe,OAAO;QAAiB,UAAU;IAAG;IAC5D;QAAE,MAAM;QAAe,OAAO;QAAmB,UAAU;IAAG;IAC9D;QAAE,MAAM;QAAa,OAAO;QAAoB,UAAU;IAAG;IAC7D;QAAE,MAAM;QAAe,OAAO;QAAkB,UAAU;IAAG;IAC7D;QAAE,MAAM;QAAW,OAAO;QAAiB,UAAU;IAAG;CAC3D;AAWD,mBAAmB;AACnB,MAAM,mBAAmB;AACzB,MAAM,cAAc;AACpB,MAAM,sBAAsB;AAKrB,SAAS,iBAAiB,QAAgB;IAC7C,IAAI,KAAK;IACT,KAAK,MAAM,KAAK,SAAU;QACtB,sBAAsB;QACtB,IAAI,EAAE,MAAM,KAAK,QAAQ;YACrB,MAAM;YACN,IAAI,EAAE,QAAQ,KAAK,MAAM;gBACrB,MAAM;YACV;QACJ;QAEA,2CAA2C;QAC3C,MAAM,eAAe,IAAA,qJAAqB,EAAC,GAAG,IAAI,mDAAmD;QACrG,MAAM,UAAU,KAAK,KAAK,CAAC,eAAe;QAC1C,IAAI,UAAU,GAAG;YACb,MAAM,UAAU;QACpB;IACJ;IACA,OAAO;AACX;AAcO,SAAS,aAAa,OAAe;IACxC,kDAAkD;IAClD,0CAA0C;IAC1C,oBAAoB;IACpB,6BAA6B;IAC7B,4CAA4C;IAC5C,8CAA8C;IAE9C,mDAAmD;IAEnD,MAAM,aAAa;IACnB,MAAM,QAAQ,KAAK,KAAK,CAAC,KAAK,IAAI,CAAC,UAAU,eAAe;IAE5D,MAAM,qBAAqB,aAAa,KAAK,GAAG,CAAC,QAAQ,GAAG;IAC5D,MAAM,kBAAkB,aAAa,KAAK,GAAG,CAAC,OAAO;IAErD,MAAM,kBAAkB,kBAAkB;IAC1C,MAAM,cAAc,UAAU;IAE9B,MAAM,kBAAkB,KAAK,GAAG,CAAC,KAAK,KAAK,GAAG,CAAC,GAAG,KAAK,KAAK,CAAC,AAAC,cAAc,kBAAmB;IAE/F,YAAY;IACZ,6CAA6C;IAC7C,IAAI,OAAO,KAAK,CAAC,EAAE;IACnB,KAAK,MAAM,KAAK,MAAO;QACnB,IAAI,SAAS,EAAE,QAAQ,EAAE;YACrB,OAAO;QACX;IACJ;IAEA,OAAO;QACH;QACA;QACA;QACA,gBAAgB;QAChB,aAAa;QACb;IACJ;AACJ"}},
    {"offset": {"line": 2443, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hinat/projects/weekly-report-app/src/lib/coaching.ts"],"sourcesContent":["import { Task, ReportStats } from \"./reportUtils\";\r\n\r\nexport type CoachMessage = {\r\n    title: string;\r\n    message: string;\r\n    type: \"info\" | \"warning\" | \"success\" | \"encouragement\";\r\n};\r\n\r\n/**\r\n * Generate coaching advice based on current stats and tasks.\r\n */\r\nexport function generateCoachAdvice(stats: ReportStats, tasks: Task[]): CoachMessage {\r\n    const total = stats.totalCount;\r\n    // Calculate completion rate safely\r\n    const completionRate = total > 0 ? Math.round((stats.doneCount / total) * 100) : 0;\r\n    const focusMinutes = Math.floor(stats.totalActualSeconds / 60);\r\n\r\n    // 0. Empty State\r\n    if (total === 0) {\r\n        return {\r\n            title: \"„Åæ„Åö„ÅØË®àÁîª„Åã„Çâ\",\r\n            message: \"‰ªäÈÄ±„ÅÆ„Çø„Çπ„ÇØ„Åå„Åæ„Å†„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ„Äå„Çø„Çπ„ÇØ„ÇíËøΩÂä†„Äç„Åã„Çâ„ÄÅ„ÇÑ„Çã„Åπ„Åç„Åì„Å®„ÇíÊõ∏„ÅçÂá∫„Åó„Å¶„Åø„Åæ„Åó„Çá„ÅÜÔºÅ\",\r\n            type: \"info\"\r\n        };\r\n    }\r\n\r\n    // 1. High Priority Overload check\r\n    const p0Tasks = tasks.filter(t => t.priority === \"p0\" && t.status !== \"done\").length;\r\n    if (p0Tasks > 3) {\r\n        return {\r\n            title: \"Ë©∞„ÇÅËæº„Åø„Åô„ÅéÊ≥®ÊÑèÂ†±\",\r\n            message: `ÊúÄÂÑ™ÂÖà(P0)„Çø„Çπ„ÇØ„Åå${p0Tasks}ÂÄãÊÆã„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇÂÖ®„Å¶„ÇíËøΩ„ÅÜ„Å®Áñ≤„Çå„Å¶„Åó„Åæ„ÅÑ„Åæ„Åô„ÄÇÊú¨ÂΩì„Å´‰ªäÊó•„ÇÑ„Çã„Åπ„Åç1„Å§„Å´Áµû„Çä„Åæ„Åó„Çá„ÅÜ„ÄÇ`,\r\n            type: \"warning\"\r\n        };\r\n    }\r\n\r\n    // 2. High Focus but Low Completion (Stuck?)\r\n    if (focusMinutes > 120 && completionRate < 20) {\r\n        return {\r\n            title: \"Â∞ë„Åó‰ºëÊÜ©„Åó„Åæ„Åõ„Çì„ÅãÔºü\",\r\n            message: \"„Åã„Å™„ÇäÈõÜ‰∏≠„Åó„Å¶‰ΩúÊ•≠„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„Åå„ÄÅÂÆå‰∫Ü„Çø„Çπ„ÇØ„ÅåÂ∞ë„Å™„ÇÅ„Åß„Åô„ÄÇ‰∏ÄÂ∫¶„Çø„Çπ„ÇØ„ÇíÁ¥∞ÂàÜÂåñ„Åô„Çã„Åã„ÄÅÁü≠„ÅÑ‰ºëÊÜ©„ÇíÂèñ„Å£„Å¶„É™„Éï„É¨„ÉÉ„Ç∑„É•„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ\",\r\n            type: \"encouragement\"\r\n        };\r\n    }\r\n\r\n    // 3. Great Progress (Flow State)\r\n    if (completionRate > 80 && total > 5) {\r\n        return {\r\n            title: \"Á¥†Êô¥„Çâ„Åó„ÅÑÊµÅ„Çå„Åß„ÅôÔºÅ\",\r\n            message: \"„Çø„Çπ„ÇØ„ÅÆÊ∂àÂåñÁéá„Åå„Å®„Å¶„ÇÇÈ´ò„ÅÑ„Åß„ÅôÔºÅ„Åì„ÅÆË™øÂ≠ê„Åß‰ªäÈÄ±„ÅÆÁõÆÊ®ô„ÇíÈÅîÊàê„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇÁÑ°ÁêÜ„Åõ„ÅöÊ∞¥ÂàÜË£úÁµ¶„ÇÇÂøò„Çå„Åö„Å´„ÄÇ\",\r\n            type: \"success\"\r\n        };\r\n    }\r\n\r\n    // 4. End of Week / Monday Blues\r\n    const today = new Date().getDay(); // 0=Sun, 1=Mon...\r\n    if (today === 1 && completionRate < 10) {\r\n        return {\r\n            title: \"ËâØ„ÅÑ‰∏ÄÈÄ±Èñì„ÅÆ„Çπ„Çø„Éº„Éà„Çí\",\r\n            message: \"ÊúàÊõúÊó•„Åß„Åô„Å≠ÔºÅ„Åæ„Åö„ÅØ5ÂàÜ„ÅßÁµÇ„Çè„ÇãÁ∞°Âçò„Å™„Çø„Çπ„ÇØ„Åã„ÇâÂßã„ÇÅ„Å¶„ÄÅ„É™„Ç∫„É†„Çí‰Ωú„Å£„Å¶„ÅÑ„Åç„Åæ„Åó„Çá„ÅÜ„ÄÇ\",\r\n            type: \"info\"\r\n        };\r\n    }\r\n\r\n    if (today === 5 && completionRate < 50) {\r\n        return {\r\n            title: \"„É©„Çπ„Éà„Çπ„Éë„Éº„ÉàÔºÅ\",\r\n            message: \"ÈáëÊõúÊó•„Åß„Åô„ÄÇ‰ªäÈÄ±‰∏≠„Å´Áµ∂ÂØæ„Å´ÁµÇ„Çè„Çâ„Åõ„Åü„ÅÑ„Çø„Çπ„ÇØ„Å†„Åë„ÇíÈÅ∏„Çì„Åß„ÄÅÊÆã„Çä„ÅØÊù•ÈÄ±„Å´Âõû„Åô„ÅÆ„ÇÇÊà¶Áï•„Åß„Åô„ÄÇ\",\r\n            type: \"warning\"\r\n        };\r\n    }\r\n\r\n    // Default Encouragement\r\n    if (completionRate > 50) {\r\n        return {\r\n            title: \"È†ÜË™ø„Å´ÈÄ≤„Çì„Åß„ÅÑ„Åæ„Åô\",\r\n            message: \"ÂçäÂàÜ‰ª•‰∏ä„ÅÆ„Çø„Çπ„ÇØ„ÅåÂÆå‰∫Ü„Åó„Åæ„Åó„Åü„ÄÇÊÆã„Çä„ÅÆ„Çø„Çπ„ÇØÂÑ™ÂÖàÈ†Ü‰Ωç„ÇíË¶ãÁõ¥„Åó„Å¶„ÄÅÁùÄÂÆü„Å´ÈÄ≤„ÇÅ„Å¶„ÅÑ„Åç„Åæ„Åó„Çá„ÅÜ„ÄÇ\",\r\n            type: \"success\"\r\n        };\r\n    }\r\n\r\n    return {\r\n        title: \"ÁÑ¶„Çâ„Åö„ÅÑ„Åç„Åæ„Åó„Çá„ÅÜ\",\r\n        message: \"„Çø„Çπ„ÇØ„É™„Çπ„Éà„ÇíË¶ãÁõ¥„Åó„Å¶„ÄÅ‰ªä„Åô„Åê„Å´ÁùÄÊâã„Åß„Åç„ÇãÂ∞è„Åï„Å™„Åì„Å®„Åã„ÇâÂßã„ÇÅ„Å¶„Åø„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\",\r\n        type: \"info\"\r\n    };\r\n}\r\n"],"names":[],"mappings":";;;;AAWO,SAAS,oBAAoB,KAAkB,EAAE,KAAa;IACjE,MAAM,QAAQ,MAAM,UAAU;IAC9B,mCAAmC;IACnC,MAAM,iBAAiB,QAAQ,IAAI,KAAK,KAAK,CAAC,AAAC,MAAM,SAAS,GAAG,QAAS,OAAO;IACjF,MAAM,eAAe,KAAK,KAAK,CAAC,MAAM,kBAAkB,GAAG;IAE3D,iBAAiB;IACjB,IAAI,UAAU,GAAG;QACb,OAAO;YACH,OAAO;YACP,SAAS;YACT,MAAM;QACV;IACJ;IAEA,kCAAkC;IAClC,MAAM,UAAU,MAAM,MAAM,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK,QAAQ,EAAE,MAAM,KAAK,QAAQ,MAAM;IACpF,IAAI,UAAU,GAAG;QACb,OAAO;YACH,OAAO;YACP,SAAS,CAAC,WAAW,EAAE,QAAQ,0CAA0C,CAAC;YAC1E,MAAM;QACV;IACJ;IAEA,4CAA4C;IAC5C,IAAI,eAAe,OAAO,iBAAiB,IAAI;QAC3C,OAAO;YACH,OAAO;YACP,SAAS;YACT,MAAM;QACV;IACJ;IAEA,iCAAiC;IACjC,IAAI,iBAAiB,MAAM,QAAQ,GAAG;QAClC,OAAO;YACH,OAAO;YACP,SAAS;YACT,MAAM;QACV;IACJ;IAEA,gCAAgC;IAChC,MAAM,QAAQ,IAAI,OAAO,MAAM,IAAI,kBAAkB;IACrD,IAAI,UAAU,KAAK,iBAAiB,IAAI;QACpC,OAAO;YACH,OAAO;YACP,SAAS;YACT,MAAM;QACV;IACJ;IAEA,IAAI,UAAU,KAAK,iBAAiB,IAAI;QACpC,OAAO;YACH,OAAO;YACP,SAAS;YACT,MAAM;QACV;IACJ;IAEA,wBAAwB;IACxB,IAAI,iBAAiB,IAAI;QACrB,OAAO;YACH,OAAO;YACP,SAAS;YACT,MAAM;QACV;IACJ;IAEA,OAAO;QACH,OAAO;QACP,SAAS;QACT,MAAM;IACV;AACJ"}},
    {"offset": {"line": 2522, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hinat/projects/weekly-report-app/src/app/reports/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport { AnimatePresence } from \"framer-motion\";\r\nimport {\r\n  type Report,\r\n  type ReportStats,\r\n  type TrendData,\r\n  STORAGE_KEY,\r\n  TASKS_KEY_PREFIX,\r\n  getWeekRange,\r\n  formatWeekRangeTitle,\r\n  sortReportsDesc,\r\n  loadTasks,\r\n  buildStats,\r\n  findThisWeekReport,\r\n  loadAllReportsStats,\r\n  generateSampleReports,\r\n} from \"@/lib/reportUtils\";\r\n\r\nimport { ReportsHeader } from \"@/components/ReportsHeader\";\r\nimport { DashboardStats } from \"@/components/DashboardStats\";\r\nimport { ReportList } from \"@/components/ReportList\";\r\nimport { TrendAnalysis } from \"@/components/dashboard/TrendAnalysis\";\r\nimport { AnimatedCard } from \"@/components/ui/AnimatedCard\";\r\n\r\nimport {\r\n  calculateTotalXP,\r\n  getLevelInfo,\r\n  type LevelInfo\r\n} from \"@/lib/gamification\";\r\nimport { generateCoachAdvice, CoachMessage } from \"@/lib/coaching\";\r\n\r\nexport default function ReportsPage() {\r\n  const [reports, setReports] = useState<Report[]>([]);\r\n  const [loaded, setLoaded] = useState(false);\r\n\r\n  // ÈÄ±„Åî„Å®„ÅÆÈõÜË®à„Ç≠„É£„ÉÉ„Ç∑„É•\r\n  const [statsById, setStatsById] = useState<Record<string, ReportStats>>({});\r\n\r\n  // „Éà„É¨„É≥„Éâ„Éá„Éº„Çø\r\n  const [trendData, setTrendData] = useState<TrendData[]>([]);\r\n  const [showTrend, setShowTrend] = useState(false);\r\n\r\n  // Gamification\r\n  const [levelInfo, setLevelInfo] = useState<LevelInfo | undefined>(undefined);\r\n  const [advice, setAdvice] = useState<CoachMessage | undefined>(undefined);\r\n\r\n  // ÂàùÂõûË™≠„ÅøËæº„ÅøÔºölocalStorage „Åã„Çâ‰∏ÄË¶ß„ÇíË™≠„ÇÄ\r\n  useEffect(() => {\r\n    if (typeof window === \"undefined\") return;\r\n\r\n    const raw = window.localStorage.getItem(STORAGE_KEY);\r\n\r\n    if (!raw) {\r\n      // ÂàùÊúü„Çµ„É≥„Éó„É´\r\n      const now = new Date();\r\n      const { start, end } = getWeekRange(now);\r\n      const weekStartIso = start.toISOString();\r\n      const weekEndIso = end.toISOString();\r\n      const title = formatWeekRangeTitle(weekStartIso, weekEndIso);\r\n      const createdAt = now.toISOString();\r\n\r\n      const initial: Report[] = [\r\n        {\r\n          id: \"1\",\r\n          title,\r\n          description: \"„Åì„ÅÆÈÄ±„Å´Âèñ„ÇäÁµÑ„Çì„Å†„Çø„Çπ„ÇØ„ÇÑÂ≠¶„Å≥„ÇíÊï¥ÁêÜ„Åó„Åæ„Åô„ÄÇÔºà„Çµ„É≥„Éó„É´Ôºâ\",\r\n          createdAt,\r\n          weekStart: weekStartIso,\r\n          weekEnd: weekEndIso,\r\n        },\r\n        {\r\n          id: \"2\",\r\n          title,\r\n          description: \"Âºï„ÅçÁ∂ö„Åç„ÄÅ‰ªäÈÄ±„ÅÆ„Ç¢„Ç¶„Éà„Éó„ÉÉ„Éà„ÇíË®òÈå≤„Åó„Åæ„Åô„ÄÇÔºà„Çµ„É≥„Éó„É´Ôºâ\",\r\n          createdAt,\r\n          weekStart: weekStartIso,\r\n          weekEnd: weekEndIso,\r\n        },\r\n        {\r\n          id: \"3\",\r\n          title,\r\n          description: \"„Çà„ÇäÂÖ∑‰ΩìÁöÑ„Å™ÊàêÊûú„ÇÑÂèçÁúÅÁÇπ„ÇíÊõ∏„ÅçÂá∫„Åó„Å¶„Åø„Åæ„Åó„Çá„ÅÜ„ÄÇÔºà„Çµ„É≥„Éó„É´Ôºâ\",\r\n          createdAt,\r\n          weekStart: weekStartIso,\r\n          weekEnd: weekEndIso,\r\n        },\r\n      ];\r\n\r\n      setReports(sortReportsDesc(initial));\r\n      setLoaded(true);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const parsed = JSON.parse(raw) as any[];\r\n      if (Array.isArray(parsed)) {\r\n        const normalized: Report[] = parsed.map((r, index) => {\r\n          const id = String(r.id ?? index + 1);\r\n\r\n          const createdAt =\r\n            typeof r.createdAt === \"string\" && r.createdAt ? r.createdAt : new Date().toISOString();\r\n\r\n          const createdDate = new Date(createdAt);\r\n          const baseDate = Number.isNaN(createdDate.getTime()) ? new Date() : createdDate;\r\n\r\n          let weekStartIso: string;\r\n          let weekEndIso: string;\r\n\r\n          if (typeof r.weekStart === \"string\" && typeof r.weekEnd === \"string\") {\r\n            weekStartIso = r.weekStart;\r\n            weekEndIso = r.weekEnd;\r\n          } else {\r\n            const { start, end } = getWeekRange(baseDate);\r\n            weekStartIso = start.toISOString();\r\n            weekEndIso = end.toISOString();\r\n          }\r\n\r\n          const title = formatWeekRangeTitle(weekStartIso, weekEndIso);\r\n\r\n          const description =\r\n            typeof r.description === \"string\" && r.description.trim() !== \"\"\r\n              ? r.description\r\n              : \"„Åì„ÅÆÈÄ±„ÅÆ„Çø„Çπ„ÇØ„ÇÑÊåØ„ÇäËøî„Çä„ÇíË®òÈå≤„Åó„Åæ„Åô„ÄÇ\";\r\n\r\n          return {\r\n            id,\r\n            title,\r\n            description,\r\n            createdAt,\r\n            weekStart: weekStartIso,\r\n            weekEnd: weekEndIso,\r\n          };\r\n        });\r\n\r\n        setReports(sortReportsDesc(normalized));\r\n      } else {\r\n        setReports([]);\r\n      }\r\n    } catch (e) {\r\n      console.error(\"failed to parse reports from localStorage\", e);\r\n      setReports([]);\r\n    }\r\n\r\n    setLoaded(true);\r\n  }, []);\r\n\r\n  // ‰∏ÄË¶ß„ÅåÂ§â„Çè„Çã„Åü„Å≥„Å´‰øùÂ≠ò\r\n  useEffect(() => {\r\n    if (!loaded) return;\r\n    if (typeof window === \"undefined\") return;\r\n    window.localStorage.setItem(STORAGE_KEY, JSON.stringify(reports));\r\n  }, [reports, loaded]);\r\n\r\n  // ÈõÜË®à„Çí‰Ωú„Çã\r\n  const refreshStats = useCallback(() => {\r\n    if (typeof window === \"undefined\") return;\r\n    const nowMs = Date.now();\r\n\r\n    const next: Record<string, ReportStats> = {};\r\n    const allTasksForXP: any[] = []; // Collect all tasks for XP\r\n\r\n    for (const r of reports) {\r\n      const tasks = loadTasks(r.id, nowMs);\r\n      const stats = buildStats(tasks);\r\n\r\n      // Collect tasks for XP\r\n      tasks.forEach(t => allTasksForXP.push(t));\r\n\r\n      // Load note summary\r\n      const noteKey = `weekly-report-note-${r.id}`;\r\n      const noteRaw = window.localStorage.getItem(noteKey);\r\n      if (noteRaw) {\r\n        stats.noteSummary = noteRaw.slice(0, 100).replace(/\\n/g, \" \") + (noteRaw.length > 100 ? \"...\" : \"\");\r\n      }\r\n\r\n      next[r.id] = stats;\r\n    }\r\n    setStatsById(next);\r\n\r\n    // Trend Data Update\r\n    setTrendData(loadAllReportsStats(reports));\r\n\r\n    // Gamification Update\r\n    const totalXP = calculateTotalXP(allTasksForXP);\r\n    setLevelInfo(getLevelInfo(totalXP));\r\n\r\n    // Generate Advice (Based on the latest report if exists)\r\n    if (reports.length > 0) {\r\n      const latestReport = reports[0];\r\n      const tasks = loadTasks(latestReport.id, nowMs);\r\n      const stats = buildStats(tasks);\r\n      setAdvice(generateCoachAdvice(stats, tasks));\r\n    }\r\n\r\n  }, [reports]);\r\n\r\n  useEffect(() => {\r\n    if (!loaded) return;\r\n\r\n    refreshStats();\r\n\r\n    const onFocus = () => refreshStats();\r\n    window.addEventListener(\"focus\", onFocus);\r\n    return () => window.removeEventListener(\"focus\", onFocus);\r\n  }, [loaded, refreshStats]);\r\n\r\n  // Êñ∞„Åó„ÅÑÈÄ±„ÇíËøΩÂä†\r\n  const handleAddReport = () => {\r\n    setReports((prev) => {\r\n      const numericIds = prev.map((r) => Number(r.id)).filter((n) => !Number.isNaN(n));\r\n      const nextIdNum = numericIds.length > 0 ? Math.max(...numericIds) + 1 : 1;\r\n      const nextId = String(nextIdNum);\r\n\r\n      const now = new Date();\r\n      const { start, end } = getWeekRange(now);\r\n      const weekStartIso = start.toISOString();\r\n      const weekEndIso = end.toISOString();\r\n\r\n      const newReport: Report = {\r\n        id: nextId,\r\n        title: formatWeekRangeTitle(weekStartIso, weekEndIso),\r\n        description: \"Êñ∞„Åó„Åè‰ΩúÊàê„Åó„ÅüÈÄ±„ÅÆ„Çø„Çπ„ÇØ„ÇÑÊåØ„ÇäËøî„Çä„ÇíË®òÈå≤„Åß„Åç„Åæ„Åô„ÄÇ\",\r\n        createdAt: now.toISOString(),\r\n        weekStart: weekStartIso,\r\n        weekEnd: weekEndIso,\r\n      };\r\n\r\n      const next = [newReport, ...prev];\r\n      return sortReportsDesc(next);\r\n    });\r\n  };\r\n\r\n  // ÈÄ±Â†±ÂâäÈô§\r\n  const handleDelete = (reportId: string, e: React.MouseEvent) => {\r\n    if (typeof window !== \"undefined\") {\r\n      const ok = window.confirm(\r\n        \"Êú¨ÂΩì„Å´„Åì„ÅÆ„É¨„Éù„Éº„Éà„ÇíÂâäÈô§„Åó„Å¶„Çà„Çç„Åó„ÅÑ„Åß„Åô„ÅãÔºü\\nÔºà„Åì„ÅÆ„É¨„Éù„Éº„Éà„Å´Á¥ê„Å•„Åè„Çø„Çπ„ÇØ„Å®„É°„É¢„ÇÇÂâäÈô§„Åï„Çå„Åæ„ÅôÔºâ\"\r\n      );\r\n      if (!ok) return;\r\n\r\n      window.localStorage.removeItem(`${TASKS_KEY_PREFIX}${reportId}`);\r\n      window.localStorage.removeItem(`weekly-report-note-${reportId}`);\r\n    }\r\n\r\n    setReports((prev) => prev.filter((r) => r.id !== reportId));\r\n  };\r\n\r\n  const thisWeekReport = useMemo(() => findThisWeekReport(reports), [reports]);\r\n  const thisWeekStats = thisWeekReport ? statsById[thisWeekReport.id] : null;\r\n\r\n  return (\r\n    <main className=\"min-h-screen relative p-4 md:p-8\">\r\n      {/* Background is handled by globals.css (Aurora) */}\r\n      <div className=\"mx-auto max-w-5xl space-y-10 relative z-10\">\r\n\r\n        <AnimatedCard delay={0} className=\"p-5\">\r\n          <ReportsHeader\r\n            reportCount={reports.length}\r\n            loading={!loaded}\r\n            levelInfo={levelInfo}\r\n            advice={advice}\r\n            onAddReport={handleAddReport}\r\n          />\r\n        </AnimatedCard>\r\n\r\n        {/* View Switcher */}\r\n        <div className=\"flex flex-col gap-4\">\r\n          <AnimatedCard delay={0.1} className=\"border-none shadow-none bg-transparent\">\r\n            <div className=\"flex items-center justify-end\">\r\n              <div className=\"flex bg-white/40 dark:bg-slate-800/40 p-1 rounded-lg backdrop-blur-md border border-white/50 dark:border-slate-700/50 shadow-sm\">\r\n                <button\r\n                  onClick={() => setShowTrend(false)}\r\n                  className={`px-4 py-1.5 text-sm font-medium rounded-md transition-all ${!showTrend\r\n                    ? \"bg-white dark:bg-slate-700 text-indigo-600 dark:text-indigo-400 shadow-sm\"\r\n                    : \"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200 hover:bg-white/50 dark:hover:bg-slate-700/50\"\r\n                    }`}\r\n                >\r\n                  ‰ªäÈÄ±„ÅÆ„Çµ„Éû„É™„Éº\r\n                </button>\r\n                <button\r\n                  onClick={() => setShowTrend(true)}\r\n                  className={`px-4 py-1.5 text-sm font-medium rounded-md transition-all ${showTrend\r\n                    ? \"bg-white dark:bg-slate-700 text-indigo-600 dark:text-indigo-400 shadow-sm\"\r\n                    : \"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200 hover:bg-white/50 dark:hover:bg-slate-700/50\"\r\n                    }`}\r\n                >\r\n                  Èï∑Êúü„Éà„É¨„É≥„Éâ\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </AnimatedCard>\r\n\r\n          <AnimatePresence mode=\"wait\">\r\n            {showTrend ? (\r\n              <AnimatedCard key=\"trend\" delay={0.2} className=\"bg-transparent border-none shadow-none\">\r\n                <TrendAnalysis\r\n                  data={trendData}\r\n                  onGenerateSample={() => {\r\n                    const samples = generateSampleReports();\r\n                    setReports(prev => sortReportsDesc([...prev, ...samples]));\r\n                    alert(\"„Çµ„É≥„Éó„É´„Éá„Éº„Çø„ÇíÁîüÊàê„Åó„Åæ„Åó„ÅüÔºÅ\");\r\n                  }}\r\n                />\r\n              </AnimatedCard>\r\n            ) : (\r\n              <AnimatedCard key=\"dashboard\" delay={0.2} className=\"bg-transparent border-none shadow-none\">\r\n                <DashboardStats\r\n                  thisWeekReport={thisWeekReport}\r\n                  thisWeekStats={thisWeekStats}\r\n                  onRefresh={refreshStats}\r\n                />\r\n              </AnimatedCard>\r\n            )}\r\n          </AnimatePresence>\r\n        </div>\r\n\r\n        <AnimatedCard delay={0.3} className=\"bg-transparent border-none shadow-none\">\r\n          <ReportList\r\n            reports={reports}\r\n            statsById={statsById}\r\n            onDelete={handleDelete}\r\n          />\r\n        </AnimatedCard>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}