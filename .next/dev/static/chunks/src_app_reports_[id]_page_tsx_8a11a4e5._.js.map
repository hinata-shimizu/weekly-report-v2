{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/hinat/projects/weekly-report-app/src/app/reports/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { useParams } from \"next/navigation\";\r\n\r\ntype TaskStatus = \"not_decided\" | \"todo\" | \"doing\" | \"done\";\r\ntype TaskPriority = \"p0\" | \"p1\" | \"p2\";\r\n\r\ntype Task = {\r\n  id: string;\r\n  title: string;\r\n  status: TaskStatus;\r\n  tag: string | null;\r\n\r\n  priority: TaskPriority;\r\n  isToday: boolean;\r\n\r\n  estimatedMinutes: number | null;\r\n  actualSeconds: number;\r\n  isRunning: boolean;\r\n  startedAt: number | null;\r\n};\r\n\r\nconst STATUS_ORDER: TaskStatus[] = [\"not_decided\", \"todo\", \"doing\", \"done\"];\r\nconst PRIORITY_ORDER: TaskPriority[] = [\"p0\", \"p1\", \"p2\"];\r\n\r\nconst STATUS_LABEL: Record<TaskStatus, string> = {\r\n  not_decided: \"未決定\",\r\n  todo: \"未着手\",\r\n  doing: \"進行中\",\r\n  done: \"完了\",\r\n};\r\n\r\nconst PRIORITY_LABEL: Record<TaskPriority, string> = {\r\n  p0: \"P0\",\r\n  p1: \"P1\",\r\n  p2: \"P2\",\r\n};\r\n\r\nconst TAG_STORAGE_KEY = \"weekly-report-tags\";\r\nconst DEFAULT_TAGS = [\"開発\", \"学習\", \"就活\", \"事務\", \"生活\"];\r\n\r\nconst getRunningExtraSeconds = (task: Task, now: number) => {\r\n  if (!task.isRunning || !task.startedAt) return 0;\r\n  return Math.max(0, Math.floor((now - task.startedAt) / 1000));\r\n};\r\n\r\nconst getTotalActualSeconds = (task: Task, now: number) => {\r\n  return task.actualSeconds + getRunningExtraSeconds(task, now);\r\n};\r\n\r\n// Importしたデータが壊れていても安全な形に直す（タイマーは必ず停止状態にする）\r\nconst normalizeTask = (t: any): Task => {\r\n  return {\r\n    id: t?.id ?? crypto.randomUUID(),\r\n    title: typeof t?.title === \"string\" ? t.title : \"\",\r\n    status: (STATUS_ORDER as string[]).includes(t?.status)\r\n      ? (t.status as TaskStatus)\r\n      : \"todo\",\r\n    tag: typeof t?.tag === \"string\" ? t.tag : null,\r\n\r\n    priority: (PRIORITY_ORDER as string[]).includes(t?.priority)\r\n      ? (t.priority as TaskPriority)\r\n      : \"p1\",\r\n    isToday: typeof t?.isToday === \"boolean\" ? t.isToday : false,\r\n\r\n    estimatedMinutes: typeof t?.estimatedMinutes === \"number\" ? t.estimatedMinutes : null,\r\n    actualSeconds: typeof t?.actualSeconds === \"number\" ? t.actualSeconds : 0,\r\n\r\n    isRunning: false,\r\n    startedAt: null,\r\n  };\r\n};\r\n\r\nconst formatHours1 = (seconds: number) => `${(seconds / 3600).toFixed(1)}時間`;\r\n\r\nconst aggregateByTag = (tasks: Task[], now: number) => {\r\n  const map = new Map<string, number>();\r\n  for (const t of tasks) {\r\n    const key = t.tag && t.tag.trim() ? t.tag.trim() : \"(未設定)\";\r\n    const sec = getTotalActualSeconds(t, now);\r\n    map.set(key, (map.get(key) ?? 0) + sec);\r\n  }\r\n  return Array.from(map.entries())\r\n    .map(([tag, seconds]) => ({ tag, seconds }))\r\n    .sort((a, b) => b.seconds - a.seconds);\r\n};\r\n\r\nconst formatJPDateTime = (ms: number) => {\r\n  const d = new Date(ms);\r\n  const y = d.getFullYear();\r\n  const m = String(d.getMonth() + 1).padStart(2, \"0\");\r\n  const day = String(d.getDate()).padStart(2, \"0\");\r\n  const hh = String(d.getHours()).padStart(2, \"0\");\r\n  const mm = String(d.getMinutes()).padStart(2, \"0\");\r\n  return `${y}/${m}/${day} ${hh}:${mm}`;\r\n};\r\n\r\nconst formatHMFromSecondsSimple = (totalSeconds: number) => {\r\n  const totalMinutes = Math.floor(totalSeconds / 60);\r\n  const h = Math.floor(totalMinutes / 60);\r\n  const m = totalMinutes % 60;\r\n  if (h <= 0) return `${m}分`;\r\n  if (m === 0) return `${h}時間`;\r\n  return `${h}時間${m}分`;\r\n};\r\n\r\nconst safeLabel = (s: string) => (s && s.trim() ? s.trim() : \"（未設定）\");\r\n\r\nconst pickTopBySeconds = (tasks: Task[], now: number, n: number) => {\r\n  const arr = tasks\r\n    .map((t) => ({ t, sec: getTotalActualSeconds(t, now) }))\r\n    .filter((x) => x.sec > 0)\r\n    .sort((a, b) => b.sec - a.sec)\r\n    .slice(0, n);\r\n  return arr;\r\n};\r\n\r\nconst pickTopTagsBySeconds = (tasks: Task[], now: number, n: number) => {\r\n  const map = new Map<string, number>();\r\n  for (const t of tasks) {\r\n    const tag = safeLabel(t.tag ?? \"\");\r\n    map.set(tag, (map.get(tag) ?? 0) + getTotalActualSeconds(t, now));\r\n  }\r\n  return Array.from(map.entries())\r\n    .map(([tag, sec]) => ({ tag, sec }))\r\n    .filter((x) => x.sec > 0)\r\n    .sort((a, b) => b.sec - a.sec)\r\n    .slice(0, n);\r\n};\r\n\r\nconst calcEstimateInsights = (tasks: Task[], now: number) => {\r\n  const withEst = tasks.filter((t) => t.estimatedMinutes != null && t.estimatedMinutes >= 0);\r\n\r\n  const diffs = withEst.map((t) => {\r\n    const actualMin = Math.floor(getTotalActualSeconds(t, now) / 60);\r\n    const estMin = t.estimatedMinutes ?? 0;\r\n    const diff = actualMin - estMin;\r\n    return { t, actualMin, estMin, diff };\r\n  });\r\n\r\n  const overruns = diffs\r\n    .filter((x) => x.estMin > 0 && x.diff > 0)\r\n    .sort((a, b) => b.diff - a.diff);\r\n\r\n  const underruns = diffs\r\n    .filter((x) => x.estMin > 0 && x.diff < 0)\r\n    .sort((a, b) => a.diff - b.diff); // マイナスが大きい順（早かった）\r\n\r\n  const avgDiff =\r\n    diffs.length > 0 ? diffs.reduce((sum, x) => sum + x.diff, 0) / diffs.length : null;\r\n\r\n  return { withEstCount: diffs.length, avgDiff, overruns, underruns };\r\n};\r\n\r\n/**\r\n * ✅ Markdown記号を一切使わない\r\n * ✅ 英語ステータスを出さない（STATUS_LABELを使う）\r\n * ✅ そのまま週報に貼れる文章を生成\r\n */\r\nconst generateReflectionText = (tasks: Task[], now: number, topN = 5) => {\r\n  const done = tasks.filter((t) => t.status === \"done\");\r\n  const notDone = tasks.filter((t) => t.status !== \"done\");\r\n\r\n  const totalSec = tasks.reduce((sum, t) => sum + getTotalActualSeconds(t, now), 0);\r\n  const doneSec = done.reduce((sum, t) => sum + getTotalActualSeconds(t, now), 0);\r\n  const notDoneSec = notDone.reduce((sum, t) => sum + getTotalActualSeconds(t, now), 0);\r\n\r\n  const topTasks = pickTopBySeconds(tasks, now, 3);\r\n  const topTags = pickTopTagsBySeconds(tasks, now, 3);\r\n\r\n  const todayNotDone = tasks\r\n    .filter((t) => t.isToday && t.status !== \"done\")\r\n    .sort((a, b) => {\r\n      const pr: Record<TaskPriority, number> = { p0: 0, p1: 1, p2: 2 };\r\n      return pr[a.priority] - pr[b.priority];\r\n    });\r\n\r\n  const { withEstCount, avgDiff, overruns, underruns } = calcEstimateInsights(tasks, now);\r\n\r\n  const avgDiffText =\r\n    avgDiff == null\r\n      ? \"—\"\r\n      : avgDiff === 0\r\n        ? \"±0分\"\r\n        : avgDiff > 0\r\n          ? `平均 +${Math.round(avgDiff * 10) / 10}分（見積もりより時間がかかりがち）`\r\n          : `平均 ${Math.round(avgDiff * 10) / 10}分（見積もりより早めに終わりがち）`;\r\n\r\n  // 未完了をステータスごとにまとめる（日本語表記）\r\n  const notDoneByStatus: TaskStatus[] = [\"not_decided\", \"todo\", \"doing\"];\r\n  const grouped = notDoneByStatus.map((st) => ({\r\n    status: st,\r\n    list: notDone.filter((t) => t.status === st),\r\n  }));\r\n\r\n  // 次にやる（提案）：Today未完了があればそれ優先。無ければ P0→P1→P2 の未完了から上位3\r\n  const nextActions =\r\n    todayNotDone.length > 0\r\n      ? todayNotDone.slice(0, 3)\r\n      : [...notDone]\r\n          .sort((a, b) => {\r\n            const pr: Record<TaskPriority, number> = { p0: 0, p1: 1, p2: 2 };\r\n            if (pr[a.priority] !== pr[b.priority]) return pr[a.priority] - pr[b.priority];\r\n            return 0;\r\n          })\r\n          .slice(0, 3);\r\n\r\n  const lines: string[] = [];\r\n  lines.push(\"【自動ふりかえり】\");\r\n  lines.push(`作成日時：${formatJPDateTime(now)}`);\r\n  lines.push(\"\");\r\n\r\n  lines.push(\"■ 1) 今週の全体像\");\r\n  lines.push(`・タスク数：${tasks.length}件（完了 ${done.length} / 未完了 ${notDone.length}）`);\r\n  lines.push(`・合計実績：${formatHMFromSecondsSimple(totalSec)}`);\r\n  lines.push(`・完了の実績：${formatHMFromSecondsSimple(doneSec)} / 未完了の実績：${formatHMFromSecondsSimple(notDoneSec)}`);\r\n  lines.push(\"\");\r\n\r\n  lines.push(\"■ 2) できたこと（完了）\");\r\n  if (done.length === 0) {\r\n    lines.push(\"・なし\");\r\n  } else {\r\n    for (const t of done) {\r\n      const sec = getTotalActualSeconds(t, now);\r\n      const tag = t.tag ? `［${t.tag}］` : \"\";\r\n      lines.push(`・${t.title} ${tag}（実績 ${formatHMFromSecondsSimple(sec)}）`);\r\n    }\r\n  }\r\n  lines.push(\"\");\r\n\r\n  lines.push(\"■ 3) 途中のもの（未完了）\");\r\n  if (notDone.length === 0) {\r\n    lines.push(\"・なし\");\r\n  } else {\r\n    for (const g of grouped) {\r\n      if (g.list.length === 0) continue;\r\n      lines.push(`・${STATUS_LABEL[g.status]}：${g.list.length}件`);\r\n      for (const t of g.list) {\r\n        const sec = getTotalActualSeconds(t, now);\r\n        const tag = t.tag ? `［${t.tag}］` : \"\";\r\n        lines.push(`  - ${t.title} ${tag}（優先度 ${PRIORITY_LABEL[t.priority]} / 実績 ${formatHMFromSecondsSimple(sec)}）`);\r\n      }\r\n    }\r\n  }\r\n  lines.push(\"\");\r\n\r\n  lines.push(\"■ 4) 時間の使い方（上位）\");\r\n  if (topTasks.length === 0) {\r\n    lines.push(\"・まだ実績が入っているタスクがありません（タイマーを回すとここが充実します）\");\r\n  } else {\r\n    lines.push(\"・時間が長かったタスク（上位3つ）\");\r\n    for (const x of topTasks) {\r\n      const tag = x.t.tag ? `［${x.t.tag}］` : \"\";\r\n      lines.push(`  - ${x.t.title} ${tag}：${formatHMFromSecondsSimple(x.sec)}`);\r\n    }\r\n  }\r\n\r\n  if (topTags.length > 0) {\r\n    lines.push(\"・タグ別（上位3つ）\");\r\n    for (const row of topTags) {\r\n      lines.push(`  - ${row.tag}：${formatHMFromSecondsSimple(row.sec)}`);\r\n    }\r\n  } else {\r\n    lines.push(\"・タグ別：まだ集計できる実績がありません\");\r\n  }\r\n  lines.push(\"\");\r\n\r\n  lines.push(\"■ 5) 見積もりの精度\");\r\n  lines.push(`・見積もり入力：${withEstCount}件`);\r\n  lines.push(`・平均のズレ：${avgDiffText}`);\r\n\r\n  lines.push(\"・時間が押したもの（最大5件）\");\r\n  if (overruns.length === 0) {\r\n    lines.push(\"  - なし\");\r\n  } else {\r\n    for (const x of overruns.slice(0, topN)) {\r\n      const tag = x.t.tag ? `［${x.t.tag}］` : \"\";\r\n      lines.push(\r\n        `  - ${x.t.title} ${tag}：見積 ${x.estMin}分 → 実績 ${x.actualMin}分（+${x.diff}分）`\r\n      );\r\n    }\r\n  }\r\n\r\n  lines.push(\"・早く終わったもの（最大3件）\");\r\n  if (underruns.length === 0) {\r\n    lines.push(\"  - なし\");\r\n  } else {\r\n    for (const x of underruns.slice(0, 3)) {\r\n      const tag = x.t.tag ? `［${x.t.tag}］` : \"\";\r\n      lines.push(\r\n        `  - ${x.t.title} ${tag}：見積 ${x.estMin}分 → 実績 ${x.actualMin}分（${x.diff}分）`\r\n      );\r\n    }\r\n  }\r\n\r\n  lines.push(\"\");\r\n  lines.push(\"■ 6) 次にやること（提案）\");\r\n  if (nextActions.length === 0) {\r\n    lines.push(\"・なし（全タスクが完了しています）\");\r\n  } else {\r\n    lines.push(\"・まずはこれ（上位3つ）\");\r\n    for (const t of nextActions) {\r\n      const tag = t.tag ? `［${t.tag}］` : \"\";\r\n      const today = t.isToday ? \"（Today）\" : \"\";\r\n      lines.push(`  - ${t.title} ${tag}：優先度 ${PRIORITY_LABEL[t.priority]} ${today}`);\r\n    }\r\n  }\r\n\r\n  lines.push(\"\");\r\n  lines.push(\"――――――――――\");\r\n  return lines.join(\"\\n\");\r\n};\r\n\r\n\r\nexport default function ReportDetailPage() {\r\n  const params = useParams<{ id: string }>();\r\n  const id = String(params.id);\r\n\r\n  const storageKey = `weekly-report-tasks-${id}`;\r\n  const noteStorageKey = `weekly-report-note-${id}`;\r\n\r\n  const [newTitle, setNewTitle] = useState(\"\");\r\n  const [tasks, setTasks] = useState<Task[]>([]);\r\n  const [loaded, setLoaded] = useState(false);\r\n  const [savedMessage, setSavedMessage] = useState(\"\");\r\n  const [now, setNow] = useState<number>(Date.now());\r\n\r\n  const [weeklyNote, setWeeklyNote] = useState(\"\");\r\n  const [noteSavedMessage, setNoteSavedMessage] = useState(\"\");\r\n  const [csvCopiedMessage, setCsvCopiedMessage] = useState(\"\");\r\n\r\n  const [showTodayOnly, setShowTodayOnly] = useState(false);\r\n  const [showCompleted, setShowCompleted] = useState(true);\r\n\r\n  const [tags, setTags] = useState<string[]>(DEFAULT_TAGS);\r\n  const [tagFilter, setTagFilter] = useState<\"all\" | string>(\"all\");\r\n\r\n  const [templateMessage, setTemplateMessage] = useState(\"\");\r\n  const [autoReflectionMessage, setAutoReflectionMessage] = useState(\"\");\r\n\r\n  const [backupJson, setBackupJson] = useState(\"\");\r\n  const [backupMessage, setBackupMessage] = useState(\"\");\r\n\r\n  const NOTE_TEMPLATE =\r\n    \"■ 今週のテーマ\\n\\n\\n\" +\r\n    \"■ 実施内容\\n\\n\\n\" +\r\n    \"■ 学び・気づき\\n\\n\\n\" +\r\n    \"■ 課題\\n\\n\\n\" +\r\n    \"■ 次週アクション\\n\";\r\n\r\n  // 初回＋ID変化時に localStorage から読み込み\r\n  useEffect(() => {\r\n    if (typeof window === \"undefined\") return;\r\n\r\n    // タスク読み込み\r\n    const raw = window.localStorage.getItem(storageKey);\r\n    if (!raw) {\r\n      setTasks([]);\r\n    } else {\r\n      try {\r\n        const parsed = JSON.parse(raw);\r\n        if (Array.isArray(parsed)) {\r\n          // 古いデータも安全に読み込む（必要ならここで正規化）\r\n          const normalized: Task[] = parsed.map((t) => ({\r\n            id: t.id ?? crypto.randomUUID(),\r\n            title: typeof t.title === \"string\" ? t.title : \"\",\r\n            status: (STATUS_ORDER as string[]).includes(t.status)\r\n              ? (t.status as TaskStatus)\r\n              : \"todo\",\r\n            tag: typeof t.tag === \"string\" ? t.tag : null,\r\n            priority: (PRIORITY_ORDER as string[]).includes(t.priority)\r\n              ? (t.priority as TaskPriority)\r\n              : \"p1\",\r\n            isToday: typeof t.isToday === \"boolean\" ? t.isToday : false,\r\n            estimatedMinutes: typeof t.estimatedMinutes === \"number\" ? t.estimatedMinutes : null,\r\n            actualSeconds: typeof t.actualSeconds === \"number\" ? t.actualSeconds : 0,\r\n            isRunning: !!t.isRunning,\r\n            startedAt: typeof t.startedAt === \"number\" ? t.startedAt : null,\r\n          }));\r\n          setTasks(normalized);\r\n        } else {\r\n          setTasks([]);\r\n        }\r\n      } catch (e) {\r\n        console.error(\"failed to parse tasks from localStorage\", e);\r\n        setTasks([]);\r\n      }\r\n    }\r\n\r\n    // メモ読み込み\r\n    const noteRaw = window.localStorage.getItem(noteStorageKey);\r\n    if (typeof noteRaw === \"string\") setWeeklyNote(noteRaw);\r\n    else setWeeklyNote(\"\");\r\n\r\n    // タグ読み込み（全週報共通）\r\n    const tagsRaw = window.localStorage.getItem(TAG_STORAGE_KEY);\r\n    if (typeof tagsRaw === \"string\") {\r\n      try {\r\n        const parsed = JSON.parse(tagsRaw);\r\n        if (Array.isArray(parsed)) {\r\n          const cleaned = parsed\r\n            .filter((x) => typeof x === \"string\")\r\n            .map((x) => x.trim())\r\n            .filter((x) => x.length > 0);\r\n\r\n          if (cleaned.length > 0) setTags(Array.from(new Set(cleaned)));\r\n        }\r\n      } catch {\r\n        // 失敗してもデフォルトのまま\r\n      }\r\n    }\r\n\r\n    setLoaded(true);\r\n  }, [storageKey, noteStorageKey]);\r\n\r\n  // どれかのタスクが動いている時だけ1秒ごとに now を更新\r\n  useEffect(() => {\r\n    const hasRunning = tasks.some((t) => t.isRunning);\r\n    if (!hasRunning) return;\r\n\r\n    const timerId = setInterval(() => {\r\n      setNow(Date.now());\r\n    }, 1000);\r\n\r\n    return () => clearInterval(timerId);\r\n  }, [tasks]);\r\n\r\n  // tasks が変わるたびに自動保存\r\n  useEffect(() => {\r\n    if (!loaded) return;\r\n    if (typeof window === \"undefined\") return;\r\n\r\n    window.localStorage.setItem(storageKey, JSON.stringify(tasks));\r\n\r\n    if (tasks.length === 0) {\r\n      setSavedMessage(\"\");\r\n      return;\r\n    }\r\n    setSavedMessage(\"自動保存しました\");\r\n    const timer = setTimeout(() => setSavedMessage(\"\"), 1500);\r\n    return () => clearTimeout(timer);\r\n  }, [tasks, loaded, storageKey]);\r\n\r\n  // 週次メモの自動保存\r\n  useEffect(() => {\r\n    if (!loaded) return;\r\n    if (typeof window === \"undefined\") return;\r\n\r\n    window.localStorage.setItem(noteStorageKey, weeklyNote);\r\n\r\n    if (weeklyNote.trim() === \"\") {\r\n      setNoteSavedMessage(\"\");\r\n      return;\r\n    }\r\n    setNoteSavedMessage(\"メモを保存しました\");\r\n    const timer = setTimeout(() => setNoteSavedMessage(\"\"), 1500);\r\n    return () => clearTimeout(timer);\r\n  }, [weeklyNote, loaded, noteStorageKey]);\r\n\r\n  const handleAddTask = () => {\r\n    const trimmed = newTitle.trim();\r\n    if (!trimmed) return;\r\n\r\n    const newTask: Task = {\r\n      id: crypto.randomUUID(),\r\n      title: trimmed,\r\n      status: \"todo\",\r\n      tag: null,\r\n      priority: \"p1\",\r\n      isToday: false,\r\n      estimatedMinutes: null,\r\n      actualSeconds: 0,\r\n      isRunning: false,\r\n      startedAt: null,\r\n    };\r\n\r\n    setTasks((prev) => [newTask, ...prev]);\r\n    setNewTitle(\"\");\r\n  };\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n    if (e.key === \"Enter\") {\r\n      e.preventDefault();\r\n      handleAddTask();\r\n    }\r\n  };\r\n\r\n  const handleChangeStatus = (taskId: string, status: TaskStatus) => {\r\n    const nowTs = Date.now();\r\n\r\n    setTasks((prev) =>\r\n      prev.map((task) => {\r\n        if (task.id !== taskId) return task;\r\n\r\n        // done にしたら必ずタイマー停止＆経過分を実績へ加算\r\n        if (status === \"done\") {\r\n          let addedSeconds = 0;\r\n          if (task.isRunning && task.startedAt) {\r\n            addedSeconds = Math.max(0, Math.floor((nowTs - task.startedAt) / 1000));\r\n          }\r\n          return {\r\n            ...task,\r\n            status: \"done\",\r\n            isRunning: false,\r\n            startedAt: null,\r\n            actualSeconds: task.actualSeconds + addedSeconds,\r\n          };\r\n        }\r\n\r\n        // done 以外は通常どおり\r\n        return { ...task, status };\r\n      })\r\n    );\r\n  };\r\n\r\nconst handleDelete = (taskId: string) => {\r\n  const target = tasks.find((t) => t.id === taskId);\r\n\r\n  // 念のため：対象が見つからないなら何もしない\r\n  if (!target) return;\r\n\r\n  // 実行中は通常表示から削除できない設計ですが、\r\n  // 万一どこかから呼ばれても安全な確認文にします。\r\n  const message = target.isRunning\r\n    ? \"このタスクは実行中です。削除すると計測中の時間も失われます。本当に削除しますか？\"\r\n    : \"このタスクを削除してもよいですか？\";\r\n\r\n  const ok = typeof window !== \"undefined\" ? window.confirm(message) : true;\r\n  if (!ok) return;\r\n\r\n  setTasks((prev) => prev.filter((t) => t.id !== taskId));\r\n};\r\n\r\n\r\n  const handleChangeEstimated = (taskId: string, value: string) => {\r\n    setTasks((prev) =>\r\n      prev.map((task) => {\r\n        if (task.id !== taskId) return task;\r\n        if (value === \"\") return { ...task, estimatedMinutes: null };\r\n\r\n        const num = Number(value);\r\n        if (Number.isNaN(num) || num < 0) return task;\r\n\r\n        return { ...task, estimatedMinutes: Math.floor(num) };\r\n      })\r\n    );\r\n  };\r\n\r\n  const handleChangeTag = (taskId: string, value: string) => {\r\n    const tag = value === \"\" ? null : value;\r\n    setTasks((prev) => prev.map((task) => (task.id === taskId ? { ...task, tag } : task)));\r\n  };\r\n\r\n  const handleChangePriority = (taskId: string, value: string) => {\r\n    const p = (PRIORITY_ORDER as string[]).includes(value) ? (value as TaskPriority) : \"p1\";\r\n    setTasks((prev) => prev.map((task) => (task.id === taskId ? { ...task, priority: p } : task)));\r\n  };\r\n\r\n  const handleToggleToday = (taskId: string) => {\r\n    setTasks((prev) => prev.map((task) => (task.id === taskId ? { ...task, isToday: !task.isToday } : task)));\r\n  };\r\n\r\n  // タイマー開始\r\n  const handleStartTimer = (taskId: string) => {\r\n    const nowTs = Date.now();\r\n    setTasks((prev) =>\r\n      prev.map((task) =>\r\n        task.id === taskId\r\n          ? {\r\n              ...task,\r\n              isRunning: true,\r\n              startedAt: task.startedAt ?? nowTs,\r\n              status: task.status === \"done\" ? task.status : \"doing\",\r\n            }\r\n          : task\r\n      )\r\n    );\r\n  };\r\n\r\n  // タイマー停止\r\n  const handleStopTimer = (taskId: string) => {\r\n    const nowTs = Date.now();\r\n    setTasks((prev) =>\r\n      prev.map((task) => {\r\n        if (task.id !== taskId) return task;\r\n        if (!task.isRunning || !task.startedAt) return { ...task, isRunning: false, startedAt: null };\r\n\r\n        const diffSeconds = Math.max(0, Math.floor((nowTs - task.startedAt) / 1000));\r\n        return {\r\n          ...task,\r\n          isRunning: false,\r\n          startedAt: null,\r\n          actualSeconds: task.actualSeconds + diffSeconds,\r\n        };\r\n      })\r\n    );\r\n  };\r\n\r\n  const formatDuration = (totalSeconds: number): string => {\r\n    const minutes = Math.floor(totalSeconds / 60);\r\n    const seconds = totalSeconds % 60;\r\n    return `${minutes}分${seconds.toString().padStart(2, \"0\")}秒`;\r\n  };\r\n\r\n  const formatHMFromSeconds = (totalSeconds: number): string => {\r\n    const totalMinutes = Math.floor(totalSeconds / 60);\r\n    const hours = Math.floor(totalMinutes / 60);\r\n    const minutes = totalMinutes % 60;\r\n    if (hours > 0) return `${hours}時間${minutes}分`;\r\n    return `${minutes}分`;\r\n  };\r\n\r\n  const countsByStatus: Record<TaskStatus, number> = {\r\n    not_decided: tasks.filter((t) => t.status === \"not_decided\").length,\r\n    todo: tasks.filter((t) => t.status === \"todo\").length,\r\n    doing: tasks.filter((t) => t.status === \"doing\").length,\r\n    done: tasks.filter((t) => t.status === \"done\").length,\r\n  };\r\n\r\n  // 週全体サマリー計算\r\n  const summary = useMemo(() => {\r\n    let totalEstimatedMinutes = 0;\r\n    let estimatedTaskCount = 0;\r\n    let totalActualSeconds = 0;\r\n    let totalDiffMinutes = 0;\r\n    let diffCount = 0;\r\n\r\n    for (const task of tasks) {\r\n      const totalSeconds = getTotalActualSeconds(task, now);\r\n      totalActualSeconds += totalSeconds;\r\n\r\n      if (task.estimatedMinutes != null) {\r\n        totalEstimatedMinutes += task.estimatedMinutes;\r\n        estimatedTaskCount += 1;\r\n\r\n        const minutes = Math.floor(totalSeconds / 60);\r\n        const diff = minutes - task.estimatedMinutes;\r\n        totalDiffMinutes += diff;\r\n        diffCount += 1;\r\n      }\r\n    }\r\n\r\n    const totalActualMinutes = Math.floor(totalActualSeconds / 60);\r\n    const totalActualHours = Math.floor(totalActualMinutes / 60);\r\n    const remainingMinutes = totalActualMinutes % 60;\r\n\r\n    const avgDiffMinutes = diffCount > 0 ? totalDiffMinutes / diffCount : null;\r\n\r\n    return {\r\n      totalEstimatedMinutes,\r\n      estimatedTaskCount,\r\n      totalActualSeconds,\r\n      totalActualMinutes,\r\n      totalActualHours,\r\n      remainingMinutes,\r\n      avgDiffMinutes,\r\n    };\r\n  }, [tasks, now]);\r\n\r\n  const formatAvgDiff = (avg: number | null): { label: string; color: string } => {\r\n    if (avg === null) return { label: \"—\", color: \"text-slate-500\" };\r\n    const rounded = Math.round(avg * 10) / 10;\r\n    if (rounded === 0) return { label: \"±0分\", color: \"text-slate-700\" };\r\n    if (rounded > 0) return { label: `+${rounded}分（見積もりより遅い）`, color: \"text-red-600\" };\r\n    return { label: `${rounded}分（見積もりより早い）`, color: \"text-emerald-600\" };\r\n  };\r\n\r\n  const getPriorityBadgeClass = (p: TaskPriority): string => {\r\n    switch (p) {\r\n      case \"p0\":\r\n        return \"bg-slate-900 text-white border-slate-900\";\r\n      case \"p1\":\r\n        return \"bg-slate-300 text-slate-900 border-slate-400\";\r\n      case \"p2\":\r\n        return \"bg-white text-slate-600 border-slate-200\";\r\n      default:\r\n        return \"bg-slate-100 text-slate-800 border-slate-200\";\r\n    }\r\n  };\r\n\r\n  const avgDiff = formatAvgDiff(summary.avgDiffMinutes ?? null);\r\n\r\n  // ステータスごとの集計\r\n  const statusSummary = useMemo(() => {\r\n    const base: Record<TaskStatus, { count: number; totalSeconds: number }> = {\r\n      not_decided: { count: 0, totalSeconds: 0 },\r\n      todo: { count: 0, totalSeconds: 0 },\r\n      doing: { count: 0, totalSeconds: 0 },\r\n      done: { count: 0, totalSeconds: 0 },\r\n    };\r\n\r\n    for (const task of tasks) {\r\n      const totalSeconds = getTotalActualSeconds(task, now);\r\n      base[task.status].count += 1;\r\n      base[task.status].totalSeconds += totalSeconds;\r\n    }\r\n\r\n    return base;\r\n  }, [tasks, now]);\r\n\r\n  const tagSummary = useMemo(() => {\r\n    return aggregateByTag(tasks, now);\r\n  }, [tasks, now]);\r\n\r\n  // CSV用テキスト生成（タグ / 優先度 / Today 対応）\r\n  const csvText = useMemo(() => {\r\n    if (tasks.length === 0) return \"\";\r\n\r\n    const escapeCsv = (value: string): string => {\r\n      const escaped = value.replace(/\"/g, '\"\"');\r\n      return `\"${escaped}\"`;\r\n    };\r\n\r\n    const header = \"タスク名,タグ,優先度,Today,ステータス,見積もり(分),実績(分),差分(分)\";\r\n\r\n    const lines = tasks.map((task) => {\r\n      const totalSeconds = getTotalActualSeconds(task, now);\r\n\r\n      const actualMinutes = Math.floor(totalSeconds / 60);\r\n      const est = task.estimatedMinutes;\r\n\r\n      let diffStr = \"\";\r\n      if (est != null) {\r\n        const diff = actualMinutes - est;\r\n        if (diff > 0) diffStr = `+${diff}`;\r\n        else if (diff === 0) diffStr = \"0\";\r\n        else diffStr = `${diff}`;\r\n      }\r\n\r\n      const title = escapeCsv(task.title);\r\n      const tagStr = escapeCsv(task.tag ?? \"\");\r\n      const priorityStr = escapeCsv(PRIORITY_LABEL[task.priority]);\r\n      const todayStr = task.isToday ? \"1\" : \"0\";\r\n      const statusStr = escapeCsv(STATUS_LABEL[task.status]);\r\n      const estStr = est != null ? String(est) : \"\";\r\n      const actualStr = String(actualMinutes);\r\n\r\n      return [title, tagStr, priorityStr, todayStr, statusStr, estStr, actualStr, diffStr].join(\",\");\r\n    });\r\n\r\n    return [header, ...lines].join(\"\\n\");\r\n  }, [tasks, now]);\r\n\r\n  const handleCopyCsv = async () => {\r\n    if (!csvText.trim()) return;\r\n\r\n    try {\r\n      if (typeof navigator !== \"undefined\" && navigator.clipboard) {\r\n        await navigator.clipboard.writeText(csvText);\r\n      } else if (typeof document !== \"undefined\") {\r\n        const textarea = document.createElement(\"textarea\");\r\n        textarea.value = csvText;\r\n        document.body.appendChild(textarea);\r\n        textarea.select();\r\n        document.execCommand(\"copy\");\r\n        document.body.removeChild(textarea);\r\n      }\r\n      setCsvCopiedMessage(\"CSV形式のテキストをコピーしました\");\r\n    } catch (e) {\r\n      console.error(\"failed to copy csv\", e);\r\n      setCsvCopiedMessage(\"コピーに失敗しました…\");\r\n    }\r\n    setTimeout(() => setCsvCopiedMessage(\"\"), 2000);\r\n  };\r\n\r\n  const buildBackupJson = () => {\r\n    const payload = {\r\n      version: 1,\r\n      reportId: id,\r\n      exportedAt: new Date().toISOString(),\r\n      tasks,\r\n      weeklyNote,\r\n    };\r\n    return JSON.stringify(payload, null, 2);\r\n  };\r\n\r\n  const handleExportBackup = async () => {\r\n    const text = buildBackupJson();\r\n    setBackupJson(text);\r\n\r\n    try {\r\n      if (typeof navigator !== \"undefined\" && navigator.clipboard) {\r\n        await navigator.clipboard.writeText(text);\r\n        setBackupMessage(\"バックアップJSONをコピーしました\");\r\n      } else if (typeof document !== \"undefined\") {\r\n        const textarea = document.createElement(\"textarea\");\r\n        textarea.value = text;\r\n        document.body.appendChild(textarea);\r\n        textarea.select();\r\n        document.execCommand(\"copy\");\r\n        document.body.removeChild(textarea);\r\n        setBackupMessage(\"バックアップJSONをコピーしました\");\r\n      }\r\n    } catch (e) {\r\n      console.error(\"failed to copy backup json\", e);\r\n      setBackupMessage(\"JSONは生成しました（コピーは失敗しました）\");\r\n    }\r\n\r\n    setTimeout(() => setBackupMessage(\"\"), 2000);\r\n  };\r\n\r\n  const handleImportBackup = () => {\r\n    const raw = backupJson.trim();\r\n    if (!raw) {\r\n      setBackupMessage(\"JSONが空です\");\r\n      setTimeout(() => setBackupMessage(\"\"), 1500);\r\n      return;\r\n    }\r\n\r\n    let parsed: any;\r\n    try {\r\n      parsed = JSON.parse(raw);\r\n    } catch (e) {\r\n      console.error(\"invalid json\", e);\r\n      setBackupMessage(\"JSONの形式が正しくありません\");\r\n      setTimeout(() => setBackupMessage(\"\"), 2000);\r\n      return;\r\n    }\r\n\r\n    if (!parsed || typeof parsed !== \"object\") {\r\n      setBackupMessage(\"JSONの形式が正しくありません\");\r\n      setTimeout(() => setBackupMessage(\"\"), 2000);\r\n      return;\r\n    }\r\n    if (!Array.isArray(parsed.tasks)) {\r\n      setBackupMessage(\"tasks が見つかりません\");\r\n      setTimeout(() => setBackupMessage(\"\"), 2000);\r\n      return;\r\n    }\r\n    if (typeof parsed.weeklyNote !== \"string\") {\r\n      setBackupMessage(\"weeklyNote が見つかりません\");\r\n      setTimeout(() => setBackupMessage(\"\"), 2000);\r\n      return;\r\n    }\r\n\r\n    const ok =\r\n      typeof window !== \"undefined\"\r\n        ? window.confirm(\"この週報のタスクとメモを、貼り付けたJSONで上書きします。よろしいですか？\")\r\n        : true;\r\n\r\n    if (!ok) return;\r\n\r\n    setTasks((parsed.tasks as any[]).map(normalizeTask));\r\n    setWeeklyNote(typeof parsed.weeklyNote === \"string\" ? parsed.weeklyNote : \"\");\r\n\r\n    setBackupMessage(\"復元しました\");\r\n    setTimeout(() => setBackupMessage(\"\"), 2000);\r\n  };\r\n\r\n  // 表示順：未完了タスク → 完了タスク（下に寄せる）＋ 未完了は優先度順\r\n  const sortedTasks = useMemo(() => {\r\n    const priorityRank: Record<TaskPriority, number> = { p0: 0, p1: 1, p2: 2 };\r\n    const withIndex = tasks.map((t, idx) => ({ t, idx }));\r\n\r\n    withIndex.sort((a, b) => {\r\n      const adone = a.t.status === \"done\";\r\n      const bdone = b.t.status === \"done\";\r\n\r\n      if (adone !== bdone) return adone ? 1 : -1;\r\n\r\n      const ar = priorityRank[a.t.priority];\r\n      const br = priorityRank[b.t.priority];\r\n      if (ar !== br) return ar - br;\r\n\r\n      return a.idx - b.idx;\r\n    });\r\n\r\n    return withIndex.map((x) => x.t);\r\n  }, [tasks]);\r\n\r\n  const visibleTasks = useMemo(() => {\r\n    return sortedTasks\r\n      .filter((t) => (showCompleted ? true : t.status !== \"done\"))\r\n      .filter((t) => (tagFilter === \"all\" ? true : t.tag === tagFilter))\r\n      .filter((t) => (showTodayOnly ? t.isToday : true));\r\n  }, [sortedTasks, showCompleted, tagFilter, showTodayOnly]);\r\n\r\nconst handleAppendAutoReflection = () => {\r\n  const snippet = generateReflectionText(tasks, now, 5);\r\n\r\n  setWeeklyNote((prev) => {\r\n    const trimmed = prev.trim();\r\n    if (!trimmed) return snippet + \"\\n\";\r\n    const sep = prev.endsWith(\"\\n\") ? \"\\n\\n\" : \"\\n\\n\";\r\n    return prev + sep + snippet + \"\\n\";\r\n  });\r\n\r\n  setAutoReflectionMessage(\"自動生成をメモに追記しました\");\r\n  setTimeout(() => setAutoReflectionMessage(\"\"), 1500);\r\n};\r\n\r\n\r\n  const handleInsertTemplate = () => {\r\n    const trimmed = weeklyNote.trim();\r\n    if (trimmed === \"\") {\r\n      setWeeklyNote(NOTE_TEMPLATE);\r\n    } else {\r\n      const sep = weeklyNote.endsWith(\"\\n\") ? \"\\n\\n\" : \"\\n\\n\\n\";\r\n      setWeeklyNote((prev) => prev + sep + NOTE_TEMPLATE);\r\n    }\r\n\r\n    setTemplateMessage(\"テンプレを挿入しました\");\r\n    setTimeout(() => setTemplateMessage(\"\"), 1500);\r\n  };\r\n\r\n  return (\r\n    <main className=\"min-h-screen bg-slate-50\">\r\n      <div className=\"mx-auto max-w-6xl py-6 px-4 md:px-8 space-y-6\">\r\n        {/* ヘッダー */}\r\n        <header className=\"flex flex-col gap-3 md:flex-row md:items-center md:justify-between\">\r\n          <div className=\"space-y-1.5\">\r\n            <Link\r\n              href=\"/reports\"\r\n              className=\"inline-flex items-center text-[11px] md:text-xs text-slate-600 hover:text-slate-900\"\r\n            >\r\n              ← 週報一覧に戻る\r\n            </Link>\r\n            <h1 className=\"text-xl md:text-3xl font-bold\">週報タスク管理（ID: {id}）</h1>\r\n            <p className=\"text-xs md:text-sm text-slate-600 max-w-3xl\">\r\n              今週やることを箇条書きで洗い出して、ステータス・見積もり時間・実績時間を管理します。\r\n              タスクとメモは「週報IDごとに」ブラウザへ自動保存されます。\r\n            </p>\r\n            {!loaded && <p className=\"text-[11px] text-slate-500\">読み込み中...</p>}\r\n          </div>\r\n\r\n          <div className=\"flex flex-col items-end gap-2\">\r\n            <div className=\"flex flex-wrap gap-1.5 text-[11px] md:text-xs\">\r\n              <span className=\"inline-flex items-center rounded-full bg-slate-100 px-2.5 py-1\">\r\n                合計: <span className=\"ml-1 font-semibold text-slate-800\">{tasks.length}</span>\r\n              </span>\r\n              <span className=\"inline-flex items-center rounded-full bg-emerald-50 px-2.5 py-1\">\r\n                完了: <span className=\"ml-1 font-semibold text-emerald-700\">{countsByStatus.done}</span>\r\n              </span>\r\n              <span className=\"inline-flex items-center rounded-full bg-blue-50 px-2.5 py-1\">\r\n                進行中: <span className=\"ml-1 font-semibold text-blue-700\">{countsByStatus.doing}</span>\r\n              </span>\r\n              <span className=\"inline-flex items-center rounded-full bg-amber-50 px-2.5 py-1\">\r\n                未着手: <span className=\"ml-1 font-semibold text-amber-700\">{countsByStatus.todo}</span>\r\n              </span>\r\n            </div>\r\n            {savedMessage && <p className=\"text-[11px] text-emerald-600\">{savedMessage}</p>}\r\n          </div>\r\n        </header>\r\n\r\n        {/* タスク追加 */}\r\n        <section className=\"rounded-xl border bg-white shadow-sm p-4 md:p-5 space-y-3\">\r\n          <h2 className=\"text-base md:text-lg font-semibold\">タスクを追加</h2>\r\n          <div className=\"flex flex-col md:flex-row gap-3\">\r\n            <input\r\n              type=\"text\"\r\n              className=\"flex-1 rounded-lg border border-slate-300 px-3 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-slate-400 focus:border-slate-400\"\r\n              placeholder=\"タスク内容を入力\"\r\n              value={newTitle}\r\n              onChange={(e) => setNewTitle(e.target.value)}\r\n              onKeyDown={handleKeyDown}\r\n            />\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleAddTask}\r\n              className=\"w-full md:w-auto inline-flex justify-center items-center rounded-lg px-5 py-2.5 text-sm font-medium border border-slate-800 bg-slate-900 text-white hover:bg-slate-800 transition\"\r\n            >\r\n              ＋ 追加\r\n            </button>\r\n          </div>\r\n        </section>\r\n\r\n        {/* タスク一覧 */}\r\n        <section className=\"space-y-3\">\r\n          <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-2\">\r\n            <h2 className=\"text-base md:text-lg font-semibold\">\r\n              {showTodayOnly ? \"Today（今日やるタスク）\" : \"タスク一覧\"}\r\n            </h2>\r\n\r\n            <div className=\"flex items-center justify-end gap-2\">\r\n              {/* タグフィルタ */}\r\n              {tasks.length > 0 && (\r\n                <div className=\"flex items-center gap-1.5\">\r\n                  <span className=\"text-[11px] md:text-xs text-slate-600\">タグ</span>\r\n                  <select\r\n                    className=\"rounded-md border border-slate-300 bg-white px-2 py-1 text-[11px] md:text-xs text-slate-800 hover:bg-slate-50\"\r\n                    value={tagFilter}\r\n                    onChange={(e) => setTagFilter(e.target.value)}\r\n                  >\r\n                    <option value=\"all\">すべて</option>\r\n                    {tags.map((tag) => (\r\n                      <option key={tag} value={tag}>\r\n                        {tag}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n              )}\r\n\r\n              {tasks.length > 0 && (\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowTodayOnly((prev) => !prev)}\r\n                  className=\"inline-flex items-center rounded-full border border-slate-400 px-3 py-1 text-[11px] md:text-xs text-slate-700 hover:bg-slate-100\"\r\n                >\r\n                  {showTodayOnly ? \"全タスクを表示\" : \"Todayだけ表示\"}\r\n                </button>\r\n              )}\r\n\r\n              {tasks.length > 0 && (\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowCompleted((prev) => !prev)}\r\n                  className=\"inline-flex items-center rounded-full border border-slate-400 px-3 py-1 text-[11px] md:text-xs text-slate-700 hover:bg-slate-100\"\r\n                >\r\n                  {showCompleted ? \"完了タスクを隠す\" : \"完了タスクを表示\"}\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {tasks.length === 0 ? (\r\n            <div className=\"rounded-xl border border-dashed border-slate-300 bg-white p-6 text-center space-y-2\">\r\n              <p className=\"text-sm text-slate-600\">まだタスクがありません。</p>\r\n              <p className=\"text-[11px] md:text-xs text-slate-500\">\r\n                上の入力欄から「今週やること」を1行ずつ追加してみてください。\r\n              </p>\r\n            </div>\r\n          ) : visibleTasks.length === 0 ? (\r\n            <div className=\"rounded-xl border bg-white p-4 text-center space-y-1\">\r\n              {showTodayOnly ? (\r\n                <>\r\n                  <p className=\"text-sm text-slate-600\">Today に選ばれているタスクがありません。</p>\r\n                  <p className=\"text-[11px] md:text-xs text-slate-500\">\r\n                    タスク行の「Today」チェックをONにすると、ここに表示されます。\r\n                  </p>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <p className=\"text-sm text-slate-600\">表示中のタスクはありません。</p>\r\n                  <p className=\"text-[11px] md:text-xs text-slate-500\">\r\n                    完了タスクを非表示にしている場合は、右上のボタンから表示に切り替えられます。\r\n                  </p>\r\n                </>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <ul className=\"space-y-3\">\r\n              {visibleTasks.map((task) => {\r\n                const totalSeconds = getTotalActualSeconds(task, now);\r\n\r\n                const est = task.estimatedMinutes;\r\n                const totalMinutes = Math.floor(totalSeconds / 60);\r\n\r\n                let diffLabel = \"\";\r\n                let diffClass = \"text-slate-700\";\r\n                if (est != null) {\r\n                  const diff = totalMinutes - est;\r\n                  if (diff === 0) diffLabel = \"±0分\";\r\n                  else if (diff > 0) {\r\n                    diffLabel = `+${diff}分`;\r\n                    diffClass = \"text-red-600\";\r\n                  } else {\r\n                    diffLabel = `${diff}分`;\r\n                    diffClass = \"text-emerald-600\";\r\n                  }\r\n                }\r\n\r\n                const isHighlighted = task.isRunning;\r\n\r\n                const baseItemClass =\r\n                  \"rounded-xl border bg-white shadow-sm px-3 md:px-4 py-2 md:py-2.5 flex flex-col gap-2\";\r\n                const highlightClass = isHighlighted\r\n                  ? \"border-blue-500 ring-2 ring-blue-200 bg-blue-50/80\"\r\n                  : \"\";\r\n\r\n                return (\r\n                  <li key={task.id} className={`${baseItemClass} ${highlightClass}`}>\r\n                    <div className=\"flex items-start gap-3\">\r\n                      <div className=\"flex-1 min-w-0 space-y-1\">\r\n                        <div className=\"flex items-start gap-2\">\r\n                          <span\r\n                            className={`mt-[2px] inline-flex items-center rounded-full border px-2 py-[2px] text-[10px] md:text-[11px] font-semibold ${getPriorityBadgeClass(\r\n                              task.priority\r\n                            )} ${task.status === \"done\" ? \"opacity-50\" : \"\"}`}\r\n                          >\r\n                            {PRIORITY_LABEL[task.priority]}\r\n                          </span>\r\n\r\n                          <p\r\n                            className={`text-sm md:text-base text-slate-900 break-words ${\r\n                              task.status === \"done\" ? \"opacity-70\" : \"\"\r\n                            }`}\r\n                          >\r\n                            {task.title}\r\n                          </p>\r\n                        </div>\r\n\r\n                        {/* タグ / 優先度 / Today */}\r\n                        <div className=\"flex flex-wrap items-center gap-2\">\r\n                          {/* タグ */}\r\n                          <div className=\"flex items-center gap-1.5\">\r\n                            <span className=\"text-[11px] md:text-xs text-slate-500\">タグ</span>\r\n                            <select\r\n                              className=\"rounded-md border border-slate-300 bg-white px-2 py-[3px] text-[11px] md:text-xs text-slate-800 hover:bg-slate-50\"\r\n                              value={task.tag ?? \"\"}\r\n                              onChange={(e) => handleChangeTag(task.id, e.target.value)}\r\n                            >\r\n                              <option value=\"\">未設定</option>\r\n                              {tags.map((tag) => (\r\n                                <option key={tag} value={tag}>\r\n                                  {tag}\r\n                                </option>\r\n                              ))}\r\n                            </select>\r\n                          </div>\r\n\r\n                          {/* 優先度 */}\r\n                          <div className=\"flex items-center gap-1.5\">\r\n                            <span className=\"text-[11px] md:text-xs text-slate-500\">優先度</span>\r\n                            <select\r\n                              className=\"rounded-md border border-slate-300 bg-white px-2 py-[3px] text-[11px] md:text-xs text-slate-800 hover:bg-slate-50\"\r\n                              value={task.priority}\r\n                              onChange={(e) => handleChangePriority(task.id, e.target.value)}\r\n                            >\r\n                              {PRIORITY_ORDER.map((p) => (\r\n                                <option key={p} value={p}>\r\n                                  {PRIORITY_LABEL[p]}\r\n                                </option>\r\n                              ))}\r\n                            </select>\r\n                          </div>\r\n\r\n                          {/* Today */}\r\n                          <label className=\"inline-flex items-center gap-1.5 text-[11px] md:text-xs text-slate-700 select-none\">\r\n                            <input\r\n                              type=\"checkbox\"\r\n                              checked={task.isToday}\r\n                              onChange={() => handleToggleToday(task.id)}\r\n                              className=\"accent-slate-900\"\r\n                            />\r\n                            Today\r\n                          </label>\r\n                        </div>\r\n\r\n                        {isHighlighted && (\r\n                          <span className=\"inline-flex items-center rounded-full bg-blue-600 px-2 py-[2px] text-[11px] font-medium text-white\">\r\n                            ▶ 実行中のタスク\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n\r\n                      {/* 右：ステータスボタン群 */}\r\n                      <div className=\"flex flex-col items-end gap-1 min-w-[190px]\">\r\n                        <div className=\"flex flex-wrap justify-end gap-1\">\r\n                          {STATUS_ORDER.map((status) => {\r\n                            const active = task.status === status;\r\n                            const base =\r\n                              \"px-2 py-[2px] rounded-full text-[11px] border transition focus:outline-none whitespace-nowrap\";\r\n                            const activeStyleByStatus: Record<TaskStatus, string> = {\r\n                              not_decided: \"bg-slate-800 border-slate-800 text-white\",\r\n                              todo: \"bg-amber-500 border-amber-500 text-white\",\r\n                              doing: \"bg-blue-600 border-blue-600 text-white\",\r\n                              done: \"bg-emerald-600 border-emerald-600 text-white\",\r\n                            };\r\n                            const inactiveStyleByStatus: Record<TaskStatus, string> = {\r\n                              not_decided:\r\n                                \"bg-slate-50 border-slate-300 text-slate-700 hover:bg-slate-100\",\r\n                              todo: \"bg-amber-50 border-amber-300 text-amber-700 hover:bg-amber-100\",\r\n                              doing: \"bg-blue-50 border-blue-300 text-blue-700 hover:bg-blue-100\",\r\n                              done: \"bg-emerald-50 border-emerald-300 text-emerald-700 hover:bg-emerald-100\",\r\n                            };\r\n\r\n                            return (\r\n                              <button\r\n                                key={status}\r\n                                type=\"button\"\r\n                                onClick={() => handleChangeStatus(task.id, status)}\r\n                                className={`${base} ${\r\n                                  active ? activeStyleByStatus[status] : inactiveStyleByStatus[status]\r\n                                }`}\r\n                              >\r\n                                {STATUS_LABEL[status]}\r\n                              </button>\r\n                            );\r\n                          })}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* 2行目：時間まわり */}\r\n                    {isHighlighted ? (\r\n                      <div className=\"rounded-lg bg-slate-50 px-3 py-2.5 flex flex-col gap-2 md:flex-row md:items-center md:justify-between\">\r\n                        {/* 左：見積もり */}\r\n                        <div className=\"flex items-center gap-2\">\r\n                          <span className=\"text-xs md:text-sm text-slate-600\">見積もり</span>\r\n                          <input\r\n                            type=\"number\"\r\n                            min={0}\r\n                            className=\"w-20 rounded-md border border-slate-300 px-2 py-1 text-sm md:text-base font-medium text-slate-900 focus:outline-none focus:ring-2 focus:ring-slate-400\"\r\n                            value={est ?? \"\"}\r\n                            onChange={(e) => handleChangeEstimated(task.id, e.target.value)}\r\n                          />\r\n                          <span className=\"text-xs md:text-sm text-slate-600\">分</span>\r\n                        </div>\r\n\r\n                        {/* 中央：実績時間（大きく） */}\r\n                        <div className=\"flex flex-col items-start md:items-center gap-0.5\">\r\n                          <span className=\"text-xs md:text-sm text-slate-600\">実績</span>\r\n                          <span className=\"text-base md:text-xl font-semibold text-slate-900\">\r\n                            {formatDuration(totalSeconds)}\r\n                          </span>\r\n                        </div>\r\n\r\n                        {/* 右：差分＋タイマーボタン */}\r\n                        <div className=\"flex flex-col items-end gap-1.5\">\r\n                          {est != null && (\r\n                            <div className=\"text-xs md:text-sm\">\r\n                              <span className=\"text-slate-500 mr-1\">差分</span>\r\n                              <span className={`font-semibold ${diffClass}`}>{diffLabel}</span>\r\n                            </div>\r\n                          )}\r\n\r\n                          <div className=\"flex items-center gap-1.5\">\r\n  <button\r\n    type=\"button\"\r\n    onClick={() => handleStopTimer(task.id)}\r\n    className=\"px-3 py-1.5 rounded-md border border-red-500 text-xs md:text-sm font-medium text-red-600 hover:bg-red-50\"\r\n  >\r\n    ⏹ 停止\r\n  </button>\r\n</div>\r\n\r\n                        </div>\r\n                      </div>\r\n                    ) : (\r\n                      <div className=\"flex flex-wrap items-center gap-2 text-[11px] md:text-xs text-slate-600\">\r\n                        <div className=\"flex items-center gap-1.5\">\r\n                          <span>見積もり</span>\r\n                          <input\r\n                            type=\"number\"\r\n                            min={0}\r\n                            className=\"w-16 rounded-md border border-slate-300 px-1.5 py-[2px] text-[11px] md:text-xs font-medium text-slate-900 focus:outline-none focus:ring-1 focus:ring-slate-400\"\r\n                            value={est ?? \"\"}\r\n                            onChange={(e) => handleChangeEstimated(task.id, e.target.value)}\r\n                          />\r\n                          <span>分</span>\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center gap-1.5\">\r\n                          <span>実績</span>\r\n                          <span className=\"font-medium text-slate-800 text-[11px] md:text-xs\">\r\n                            {formatDuration(totalSeconds)}\r\n                          </span>\r\n                        </div>\r\n\r\n                        {est != null && (\r\n                          <div className=\"flex items-center gap-1.5\">\r\n                            <span>差分</span>\r\n                            <span className={`font-medium ${diffClass}`}>{diffLabel}</span>\r\n                          </div>\r\n                        )}\r\n\r\n                        <div className=\"flex items-center gap-1.5 ml-auto\">\r\n                         <button\r\n  type=\"button\"\r\n  onClick={() => handleStartTimer(task.id)}\r\n  className=\"px-4 py-2 rounded-md border border-slate-700 text-xs md:text-sm font-semibold text-slate-800 hover:bg-slate-100\"\r\n>\r\n  ▶ 開始\r\n</button>\r\n\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={() => handleDelete(task.id)}\r\n                            className=\"text-[10px] md:text-xs text-red-500 hover:text-red-600 hover:underline\"\r\n                          >\r\n                            削除\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </li>\r\n                );\r\n              })}\r\n            </ul>\r\n          )}\r\n        </section>\r\n\r\n        {/* 週全体のサマリー ＋ ステータス別集計 ＋ タグ別集計 */}\r\n        <section className=\"space-y-3 pt-2 border-t border-slate-200\">\r\n          <h2 className=\"text-sm md:text-base font-semibold text-slate-800\">週全体のサマリー</h2>\r\n\r\n          {tasks.length === 0 ? (\r\n            <div className=\"rounded-lg border border-dashed border-slate-300 bg-white px-4 py-3 text-[11px] md:text-xs text-slate-500\">\r\n              タスクを追加すると、この週の合計時間や見積もり精度のサマリーが表示されます。\r\n            </div>\r\n          ) : (\r\n            <>\r\n              <div className=\"grid gap-3 md:grid-cols-3\">\r\n                <div className=\"rounded-lg border bg-white px-4 py-3 flex flex-col justify-between\">\r\n                  <p className=\"text-[11px] md:text-xs text-slate-500\">合計実績時間</p>\r\n                  <p className=\"mt-1 text-base md:text-xl font-semibold text-slate-900\">\r\n                    {summary.totalActualHours}時間{summary.remainingMinutes}分\r\n                  </p>\r\n                  <p className=\"mt-1 text-[10px] md:text-[11px] text-slate-500\">（全タスクの実績時間の合計）</p>\r\n                </div>\r\n\r\n                <div className=\"rounded-lg border bg-white px-4 py-3 flex flex-col justify-between\">\r\n                  <p className=\"text-[11px] md:text-xs text-slate-500\">合計見積もり時間</p>\r\n                  <p className=\"mt-1 text-base md:text-xl font-semibold text-slate-900\">\r\n                    {summary.totalEstimatedMinutes}分\r\n                  </p>\r\n                  <p className=\"mt-1 text-[10px] md:text-[11px] text-slate-500\">\r\n                    見積もり入力済みタスク: <span className=\"font-medium\">{summary.estimatedTaskCount}件</span>\r\n                  </p>\r\n                </div>\r\n\r\n                <div className=\"rounded-lg border bg-white px-4 py-3 flex flex-col justify-between\">\r\n                  <p className=\"text-[11px] md:text-xs text-slate-500\">平均見積もり誤差</p>\r\n                  <p className={`mt-1 text-sm md:text-lg font-semibold ${avgDiff.color}`}>{avgDiff.label}</p>\r\n                  <p className=\"mt-1 text-[10px] md:text-[11px] text-slate-500\">\r\n                    （実績 − 見積もりの平均値。プラスは見積もりより時間がかかっている状態です）\r\n                  </p>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"rounded-lg border bg-white px-4 py-3 space-y-2\">\r\n                <p className=\"text-[11px] md:text-xs font-semibold text-slate-700\">ステータスごとの集計</p>\r\n\r\n                <div className=\"overflow-x-auto\">\r\n                  <table className=\"min-w-full text-[11px] md:text-xs text-left text-slate-700\">\r\n                    <thead>\r\n                      <tr className=\"border-b border-slate-200\">\r\n                        <th className=\"py-1.5 pr-4 font-medium\">ステータス</th>\r\n                        <th className=\"py-1.5 pr-4 font-medium\">タスク数</th>\r\n                        <th className=\"py-1.5 pr-4 font-medium\">合計実績時間</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {STATUS_ORDER.map((status) => {\r\n                        const s = statusSummary[status];\r\n                        return (\r\n                          <tr key={status} className=\"border-b border-slate-100 last:border-0\">\r\n                            <td className=\"py-1.5 pr-4\">{STATUS_LABEL[status]}</td>\r\n                            <td className=\"py-1.5 pr-4\">{s.count}件</td>\r\n                            <td className=\"py-1.5 pr-4\">{s.count === 0 ? \"—\" : formatHMFromSeconds(s.totalSeconds)}</td>\r\n                          </tr>\r\n                        );\r\n                      })}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n\r\n                <p className=\"text-[10px] md:text-[11px] text-slate-500\">\r\n                  実績時間には、現在タイマーが動いているタスクの経過時間も含まれます。\r\n                </p>\r\n              </div>\r\n\r\n              {/* ✅ 追加：タグ別集計（実績） */}\r\n              <div className=\"rounded-lg border bg-white px-4 py-3 space-y-2\">\r\n                <p className=\"text-[11px] md:text-xs font-semibold text-slate-700\">タグ別集計（実績）</p>\r\n\r\n                {tagSummary.length === 0 ? (\r\n                  <p className=\"text-[11px] md:text-xs text-slate-500\">—</p>\r\n                ) : (\r\n                  <div className=\"overflow-x-auto\">\r\n                    <table className=\"min-w-full text-[11px] md:text-xs text-left text-slate-700\">\r\n                      <thead>\r\n                        <tr className=\"border-b border-slate-200\">\r\n                          <th className=\"py-1.5 pr-4 font-medium\">タグ</th>\r\n                          <th className=\"py-1.5 pr-4 font-medium\">実績</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {tagSummary.map((row) => (\r\n                          <tr key={row.tag} className=\"border-b border-slate-100 last:border-0\">\r\n                            <td className=\"py-1.5 pr-4\">{row.tag}</td>\r\n                            <td className=\"py-1.5 pr-4\">{formatHours1(row.seconds)}</td>\r\n                          </tr>\r\n                        ))}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                )}\r\n\r\n                <p className=\"text-[10px] md:text-[11px] text-slate-500\">\r\n                  実績には、タイマー稼働中タスクの経過時間も含まれます。\r\n                </p>\r\n              </div>\r\n            </>\r\n          )}\r\n        </section>\r\n\r\n        {/* CSVエクスポート（コピペ用） */}\r\n        <section className=\"space-y-2 pt-3 border-t border-slate-200\">\r\n          <div className=\"flex items-center justify-between gap-2\">\r\n            <h2 className=\"text-sm md:text-base font-semibold text-slate-800\">\r\n              CSV形式でエクスポート（コピペ用）\r\n            </h2>\r\n          </div>\r\n\r\n          {tasks.length === 0 ? (\r\n            <div className=\"rounded-lg border border-dashed border-slate-300 bg-white px-4 py-3 text-[11px] md:text-xs text-slate-500\">\r\n              タスクを追加すると、この週の内容をCSV形式で出力できます。\r\n            </div>\r\n          ) : (\r\n            <div className=\"rounded-lg border bg-white px-3 py-3 md:px-4 md:py-4 space-y-2\">\r\n              <div className=\"flex items-start justify-between gap-3\">\r\n                <p className=\"text-[11px] md:text-xs text-slate-500\">\r\n                  下のテキストをコピーして、Excel / Googleスプレッドシート / 会社の週報フォーマットなどに貼り付けて使えます。\r\n                </p>\r\n\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleCopyCsv}\r\n                  className=\"shrink-0 inline-flex items-center rounded-md border border-slate-700 px-3 py-1.5 text-[11px] md:text-xs font-medium text-slate-800 hover:bg-slate-100\"\r\n                >\r\n                  コピー\r\n                </button>\r\n              </div>\r\n\r\n              <textarea\r\n                className=\"w-full min-h-[120px] rounded-md border border-slate-200 px-3 py-2 text-[11px] md:text-xs font-mono text-slate-900 bg-slate-50 focus:outline-none focus:ring-2 focus:ring-slate-300 focus:border-slate-300 resize-vertical\"\r\n                value={csvText}\r\n                readOnly\r\n              />\r\n\r\n              <div className=\"flex items-center justify-between\">\r\n                <p className=\"text-[10px] md:text-[11px] text-slate-500\">\r\n                  列: タスク名 / タグ / 優先度 / Today / ステータス / 見積もり(分) / 実績(分) / 差分(分)\r\n                </p>\r\n                {csvCopiedMessage && <p className=\"text-[10px] md:text-[11px] text-emerald-600\">{csvCopiedMessage}</p>}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </section>\r\n\r\n        {/* バックアップ/復元（JSON） */}\r\n        <section className=\"pt-3 border-t border-slate-200\">\r\n          <div className=\"rounded-lg border bg-white px-3 py-3 md:px-4 md:py-4\">\r\n            <div className=\"flex flex-col md:flex-row md:items-start md:justify-between gap-3\">\r\n              <div className=\"space-y-1\">\r\n                <h2 className=\"text-sm md:text-base font-semibold text-slate-800\">バックアップ（移行 / 復元）</h2>\r\n                <p className=\"text-[11px] md:text-xs text-slate-600\">\r\n                  この週報（タスク・メモ）を「1つのテキスト」にして保存できます。PC変更や誤削除に備えるための機能です。\r\n                </p>\r\n                <p className=\"text-[10px] md:text-[11px] text-slate-500\">\r\n                  使い方：①バックアップ作成 → どこかに貼って保存　②復元 → 貼り付けてImport\r\n                </p>\r\n\r\n                {backupMessage && <p className=\"text-[10px] md:text-[11px] text-emerald-600\">{backupMessage}</p>}\r\n              </div>\r\n\r\n              <div className=\"flex items-center gap-2\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleExportBackup}\r\n                  className=\"inline-flex items-center rounded-md border border-slate-700 px-3 py-1.5 text-[11px] md:text-xs font-medium text-slate-800 hover:bg-slate-100\"\r\n                >\r\n                  バックアップ作成（コピー）\r\n                </button>\r\n\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleImportBackup}\r\n                  className=\"inline-flex items-center rounded-md border border-slate-700 px-3 py-1.5 text-[11px] md:text-xs font-medium text-slate-800 hover:bg-slate-100\"\r\n                >\r\n                  復元（Import）\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            <details className=\"mt-3\">\r\n              <summary className=\"cursor-pointer list-none\">\r\n                <span className=\"inline-flex items-center gap-1 rounded-md border border-slate-300 bg-white px-2 py-1 text-[10px] md:text-[11px] text-slate-600 hover:bg-slate-50\">\r\n                  ※ 詳細（JSON表示）を開く / 閉じる <span className=\"text-slate-400\">▾</span>\r\n                </span>\r\n              </summary>\r\n\r\n              <div className=\"mt-3 space-y-2\">\r\n                <textarea\r\n                  className=\"w-full min-h-[90px] max-h-[220px] rounded-md border border-slate-200 px-3 py-2 text-[11px] md:text-xs font-mono text-slate-900 bg-slate-50 focus:outline-none focus:ring-2 focus:ring-slate-300 focus:border-slate-300 resize-vertical\"\r\n                  value={backupJson}\r\n                  onChange={(e) => setBackupJson(e.target.value)}\r\n                  placeholder=\"ここにバックアップJSONが入ります。別PCで復元したい時は、保存しておいたJSONを貼って Import（復元）してください。\"\r\n                />\r\n\r\n                <p className=\"text-[10px] md:text-[11px] text-slate-500\">※ Importすると現在のタスクとメモが上書きされます。</p>\r\n              </div>\r\n            </details>\r\n          </div>\r\n        </section>\r\n\r\n        {/* 週次ふりかえりメモ */}\r\n        <section className=\"space-y-2 pt-3\">\r\n          <div className=\"flex items-end justify-between gap-3\">\r\n            <div>\r\n              <h2 className=\"text-sm md:text-base font-semibold text-slate-800\">週次ふりかえりメモ</h2>\r\n              <p className=\"text-[11px] md:text-xs text-slate-500\">今週の振り返りや来週に向けたメモを書いておくスペースです。</p>\r\n            </div>\r\n\r\n            <div className=\"flex flex-col items-end gap-1\">\r\n              <div className=\"flex items-center gap-2\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleInsertTemplate}\r\n                  className=\"inline-flex items-center rounded-md border border-slate-700 px-3 py-1.5 text-[11px] md:text-xs font-medium text-slate-800 hover:bg-slate-100\"\r\n                >\r\n                  テンプレ挿入\r\n                </button>\r\n\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleAppendAutoReflection}\r\n                  disabled={tasks.length === 0}\r\n                  className=\"inline-flex items-center rounded-md border border-slate-700 px-3 py-1.5 text-[11px] md:text-xs font-medium text-slate-800 hover:bg-slate-100 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                >\r\n                  ふりかえり自動生成（追記）\r\n                </button>\r\n              </div>\r\n\r\n              {templateMessage && <p className=\"text-[10px] md:text-[11px] text-emerald-600\">{templateMessage}</p>}\r\n              {autoReflectionMessage && (\r\n                <p className=\"text-[10px] md:text-[11px] text-emerald-600\">{autoReflectionMessage}</p>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"rounded-lg border bg-white px-3 py-3 md:px-4 md:py-4 space-y-2\">\r\n            <textarea\r\n              className=\"w-full min-h-[360px] rounded-md border border-slate-300 px-3 py-2 text-sm md:text-[15px] text-slate-900 focus:outline-none focus:ring-2 focus:ring-slate-400 focus:border-slate-400 resize-vertical\"\r\n              value={weeklyNote}\r\n              onChange={(e) => setWeeklyNote(e.target.value)}\r\n            />\r\n            <div className=\"flex items-center justify-between\">\r\n              <p className=\"text-[10px] md:text-[11px] text-slate-500\">入力内容は自動で保存されます（ブラウザごと／週報IDごと）。</p>\r\n              {noteSavedMessage && <p className=\"text-[10px] md:text-[11px] text-emerald-600\">{noteSavedMessage}</p>}\r\n            </div>\r\n          </div>\r\n        </section>\r\n      </div>\r\n    </main>\r\n  );\r\n}"],"names":[],"mappings":"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"}}]
}