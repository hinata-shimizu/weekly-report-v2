(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,94605,e=>{"use strict";let t;var r,a,l,n,s,i,o,d,c,u,h,x,f,g,b,m,p,v,y,w=e.i(43476),k=e.i(71645),j=e.i(18566),N=e.i(52484),S=e.i(22016),C=e.i(35376);function T({advice:e,className:t=""}){let[r,a]=(0,k.useState)(""),[l,n]=(0,k.useState)(!0);return(0,k.useEffect)(()=>{a(""),n(!0);let t=0,r=e.message,l=setInterval(()=>{t<r.length?(a(e=>e+r.charAt(t)),t++):(n(!1),clearInterval(l))},30);return()=>clearInterval(l)},[e]),(0,w.jsxs)("div",{className:`flex items-start gap-4 p-4 rounded-xl border shadow-sm ${(e=>{switch(e){case"warning":return"bg-amber-50 text-amber-800 border-amber-200 dark:bg-black dark:text-[#ffd400] dark:border-[#332600]";case"success":return"bg-indigo-50 text-indigo-800 border-indigo-200 dark:bg-black dark:text-[#1d9bf0] dark:border-[#0a2949]";case"encouragement":return"bg-emerald-50 text-emerald-800 border-emerald-200 dark:bg-black dark:text-[#00ba7c] dark:border-[#052e1f]";default:return"bg-slate-50 text-slate-700 border-slate-200 dark:bg-black dark:text-[#e7e9ea] dark:border-[#2f3336]"}})(e.type)} ${t}`,children:[(0,w.jsx)("div",{className:"flex-shrink-0 text-3xl bg-white dark:bg-[#16181c] p-2 rounded-full shadow-sm border border-black/5 dark:border-[#2f3336]",children:"ðŸ¤–"}),(0,w.jsxs)("div",{className:"flex-1",children:[(0,w.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,w.jsx)("span",{className:"text-sm font-bold uppercase tracking-wider opacity-60",children:"AI Coach"}),(0,w.jsx)("span",{className:"text-xs",children:(e=>{switch(e){case"warning":return"âš ï¸";case"success":return"ðŸŽ‰";case"encouragement":return"â˜•";default:return"ðŸ’¡"}})(e.type)})]}),(0,w.jsx)("h4",{className:"font-bold text-sm mb-1",children:e.title}),(0,w.jsxs)("p",{className:"text-sm leading-relaxed min-h-[1.5em] font-medium opacity-90",children:[r,l&&(0,w.jsx)("span",{className:"animate-pulse inline-block w-1.5 h-3 ml-0.5 bg-current align-middle"})]})]})]})}var D=e.i(22530);function E({id:e,loaded:t,savedMessage:r,totalCount:a,countsByStatus:l,levelInfo:n,advice:s}){return(0,w.jsxs)("header",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[(0,w.jsxs)("div",{className:"space-y-2",children:[(0,w.jsxs)(S.default,{href:"/reports",className:"inline-flex items-center gap-1 text-xs font-medium text-slate-500 hover:text-slate-900 transition-colors",children:[(0,w.jsx)("span",{"aria-hidden":!0,children:"â†"})," é€±å ±ä¸€è¦§ã«æˆ»ã‚‹"]}),(0,w.jsxs)("h1",{className:"text-2xl md:text-3xl font-bold text-slate-900 dark:text-[#e7e9ea] tracking-tight flex items-center gap-3 flex-wrap",children:["é€±å ±ã‚¿ã‚¹ã‚¯ç®¡ç† ",(0,w.jsxs)("span",{className:"text-lg font-normal text-slate-400 dark:text-[#71767b]",children:["#",e]}),n&&(0,w.jsx)(C.MiniUserLevelBadge,{levelInfo:n})]}),(0,w.jsxs)("p",{className:"text-sm text-slate-500 dark:text-slate-400 max-w-2xl leading-relaxed",children:["ä»Šé€±ã‚„ã‚‹ã“ã¨ã‚’ç®‡æ¡æ›¸ãã§æ´—ã„å‡ºã—ã¦ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ»è¦‹ç©ã‚‚ã‚Šæ™‚é–“ãƒ»å®Ÿç¸¾æ™‚é–“ã‚’ç®¡ç†ã—ã¾ã™ã€‚",(0,w.jsx)("br",{className:"hidden md:block"}),"å…¥åŠ›å†…å®¹ã¯ã™ã¹ã¦ã€Œãƒ–ãƒ©ã‚¦ã‚¶ï¼ˆã“ã®ç«¯æœ«ï¼‰ã€ã«è‡ªå‹•ä¿å­˜ã•ã‚Œã¾ã™ã€‚"]}),!t&&(0,w.jsx)("p",{className:"text-xs text-slate-400 animate-pulse",children:"èª­ã¿è¾¼ã¿ä¸­..."})]}),(0,w.jsxs)("div",{className:"flex flex-col items-end gap-3 pt-1",children:[(0,w.jsxs)("div",{className:"flex flex-wrap items-center justify-end gap-2 text-[10px] md:text-xs",children:[(0,w.jsx)(D.ThemeToggle,{className:"mr-2"}),(0,w.jsx)(M,{label:"åˆè¨ˆ",value:a,color:"slate"}),(0,w.jsx)(M,{label:"å®Œäº†",value:l.done,color:"emerald"}),(0,w.jsx)(M,{label:"é€²è¡Œä¸­",value:l.doing,color:"blue"}),(0,w.jsx)(M,{label:"æœªç€æ‰‹",value:l.todo,color:"amber"})]}),(0,w.jsx)("div",{className:"h-4 flex items-center",children:r&&(0,w.jsx)("p",{className:"text-[11px] font-medium text-emerald-600 animate-fade-in-out",children:r})})]}),s&&(0,w.jsx)("div",{className:"w-full md:absolute md:top-full md:right-0 md:mt-4 md:w-96 z-20",children:(0,w.jsx)(T,{advice:s,className:"bg-white/90 backdrop-blur shadow-lg border-opacity-60"})})]})}function M({label:e,value:t,color:r}){return(0,w.jsxs)("span",{className:`inline-flex items-center rounded-full border border-transparent px-2.5 py-1 ${{slate:"bg-slate-100 text-slate-700 dark:bg-[#16181c] dark:text-[#71767b]",emerald:"bg-emerald-50 text-emerald-700 border-emerald-100 dark:bg-[#051c12] dark:text-[#00ba7c] dark:border-[#003a27]",blue:"bg-blue-50 text-blue-700 border-blue-100 dark:bg-[#0a1727] dark:text-[#1d9bf0] dark:border-[#102a43]",amber:"bg-amber-50 text-amber-700 border-amber-100 dark:bg-[#1e160a] dark:text-[#ffd400] dark:border-[#382800]"}[r]}`,children:[e,": ",(0,w.jsx)("span",{className:"ml-1 font-bold",children:t})]})}function R({onAdd:e}){let[t,r]=(0,k.useState)("");return(0,w.jsxs)("section",{className:"rounded-xl border border-slate-200 bg-white dark:bg-black dark:border-[#2f3336] shadow-sm p-4 md:p-5 hover:border-slate-300 dark:hover:border-[#536471] transition-colors",children:[(0,w.jsx)("div",{className:"flex flex-col gap-2 mb-3",children:(0,w.jsx)("h2",{className:"text-base font-bold text-slate-800 dark:text-[#e7e9ea] flex items-center gap-2",children:"âœï¸ æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ "})}),(0,w.jsxs)("form",{onSubmit:a=>{a?.preventDefault();let l=t.trim();l&&(e(l),r(""))},className:"flex flex-col md:flex-row gap-3",children:[(0,w.jsx)("input",{type:"text",className:"flex-1 rounded-lg border border-slate-300 dark:border-[#2f3336] dark:bg-black dark:text-[#e7e9ea] px-4 py-2.5 text-sm placeholder:text-slate-400 dark:placeholder:text-[#71767b] focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all",placeholder:"ä¾‹ï¼šReactã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚€ã€Aç¤¾ã®è³‡æ–™ä½œæˆ...",value:t,onChange:e=>r(e.target.value)}),(0,w.jsxs)("button",{type:"submit",className:"w-full md:w-auto inline-flex justify-center items-center gap-2 rounded-lg bg-slate-900 px-6 py-2.5 text-sm font-bold text-white shadow-md hover:bg-slate-800 hover:shadow-lg transition-all active:scale-95 focus:outline-none focus:ring-2 focus:ring-slate-900 focus:ring-offset-2",children:[(0,w.jsx)("span",{children:"ï¼‹"})," è¿½åŠ "]})]})]})}var A=e.i(74080);let O="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function I(e){let t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function L(e){return"nodeType"in e}function P(e){var t,r;return e?I(e)?e:L(e)&&null!=(t=null==(r=e.ownerDocument)?void 0:r.defaultView)?t:window:window}function z(e){let{Document:t}=P(e);return e instanceof t}function B(e){return!I(e)&&e instanceof P(e).HTMLElement}function U(e){return e instanceof P(e).SVGElement}function F(e){return e?I(e)?e.document:L(e)?z(e)?e:B(e)||U(e)?e.ownerDocument:document:document:document}let K=O?k.useLayoutEffect:k.useEffect;function Y(e){let t=(0,k.useRef)(e);return K(()=>{t.current=e}),(0,k.useCallback)(function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return null==t.current?void 0:t.current(...r)},[])}function $(e,t){void 0===t&&(t=[e]);let r=(0,k.useRef)(e);return K(()=>{r.current!==e&&(r.current=e)},t),r}function X(e,t){let r=(0,k.useRef)();return(0,k.useMemo)(()=>{let t=e(r.current);return r.current=t,t},[...t])}function J(e){let t=Y(e),r=(0,k.useRef)(null),a=(0,k.useCallback)(e=>{e!==r.current&&(null==t||t(e,r.current)),r.current=e},[]);return[r,a]}function _(e){let t=(0,k.useRef)();return(0,k.useEffect)(()=>{t.current=e},[e]),t.current}let W={};function H(e,t){return(0,k.useMemo)(()=>{if(t)return t;let r=null==W[e]?0:W[e]+1;return W[e]=r,e+"-"+r},[e,t])}function V(e){return function(t){for(var r=arguments.length,a=Array(r>1?r-1:0),l=1;l<r;l++)a[l-1]=arguments[l];return a.reduce((t,r)=>{for(let[a,l]of Object.entries(r)){let r=t[a];null!=r&&(t[a]=r+e*l)}return t},{...t})}}let q=V(1),G=V(-1);function Z(e){if(!e)return!1;let{KeyboardEvent:t}=P(e.target);return t&&e instanceof t}function Q(e){if(function(e){if(!e)return!1;let{TouchEvent:t}=P(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){let{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){let{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return"clientX"in e&&"clientY"in e?{x:e.clientX,y:e.clientY}:null}let ee=Object.freeze({Translate:{toString(e){if(!e)return;let{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[ee.Translate.toString(e),ee.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:a}=e;return t+" "+r+"ms "+a}}}),et="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]",er={display:"none"};function ea(e){let{id:t,value:r}=e;return k.default.createElement("div",{id:t,style:er},r)}function el(e){let{id:t,announcement:r,ariaLiveType:a="assertive"}=e;return k.default.createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":a,"aria-atomic":!0},r)}let en=(0,k.createContext)(null),es={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},ei={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function eo(e){var t;let r,{announcements:a=ei,container:l,hiddenTextDescribedById:n,screenReaderInstructions:s=es}=e,{announce:i,announcement:o}=function(){let[e,t]=(0,k.useState)("");return{announce:(0,k.useCallback)(e=>{null!=e&&t(e)},[]),announcement:e}}(),d=H("DndLiveRegion"),[c,u]=(0,k.useState)(!1);if((0,k.useEffect)(()=>{u(!0)},[]),t=(0,k.useMemo)(()=>({onDragStart(e){let{active:t}=e;i(a.onDragStart({active:t}))},onDragMove(e){let{active:t,over:r}=e;a.onDragMove&&i(a.onDragMove({active:t,over:r}))},onDragOver(e){let{active:t,over:r}=e;i(a.onDragOver({active:t,over:r}))},onDragEnd(e){let{active:t,over:r}=e;i(a.onDragEnd({active:t,over:r}))},onDragCancel(e){let{active:t,over:r}=e;i(a.onDragCancel({active:t,over:r}))}}),[i,a]),r=(0,k.useContext)(en),(0,k.useEffect)(()=>{if(!r)throw Error("useDndMonitor must be used within a children of <DndContext>");return r(t)},[t,r]),!c)return null;let h=k.default.createElement(k.default.Fragment,null,k.default.createElement(ea,{id:n,value:s.draggable}),k.default.createElement(el,{id:d,announcement:o}));return l?(0,A.createPortal)(h,l):h}function ed(){}function ec(e,t){return(0,k.useMemo)(()=>({sensor:e,options:null!=t?t:{}}),[e,t])}(r=u||(u={})).DragStart="dragStart",r.DragMove="dragMove",r.DragEnd="dragEnd",r.DragCancel="dragCancel",r.DragOver="dragOver",r.RegisterDroppable="registerDroppable",r.SetDroppableDisabled="setDroppableDisabled",r.UnregisterDroppable="unregisterDroppable";let eu=Object.freeze({x:0,y:0});function eh(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function ex(e,t){let{data:{value:r}}=e,{data:{value:a}}=t;return r-a}function ef(e,t){let{data:{value:r}}=e,{data:{value:a}}=t;return a-r}function eg(e){let{left:t,top:r,height:a,width:l}=e;return[{x:t,y:r},{x:t+l,y:r},{x:t,y:r+a},{x:t+l,y:r+a}]}function eb(e,t){if(!e||0===e.length)return null;let[r]=e;return t?r[t]:r}function em(e,t,r){return void 0===t&&(t=e.left),void 0===r&&(r=e.top),{x:t+.5*e.width,y:r+.5*e.height}}let ep=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:a}=e,l=em(t,t.left,t.top),n=[];for(let e of a){let{id:t}=e,a=r.get(t);if(a){let r=eh(em(a),l);n.push({id:t,data:{droppableContainer:e,value:r}})}}return n.sort(ex)},ev=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:a}=e,l=[];for(let e of a){let{id:a}=e,n=r.get(a);if(n){let r=function(e,t){let r=Math.max(t.top,e.top),a=Math.max(t.left,e.left),l=Math.min(t.left+t.width,e.left+e.width),n=Math.min(t.top+t.height,e.top+e.height);if(a<l&&r<n){let s=t.width*t.height,i=e.width*e.height,o=(l-a)*(n-r);return Number((o/(s+i-o)).toFixed(4))}return 0}(n,t);r>0&&l.push({id:a,data:{droppableContainer:e,value:r}})}}return l.sort(ef)};function ey(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:eu}let ew=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return r.reduce((e,t)=>({...e,top:e.top+ +t.y,bottom:e.bottom+ +t.y,left:e.left+ +t.x,right:e.right+ +t.x}),{...e})},ek={ignoreTransform:!1};function ej(e,t){void 0===t&&(t=ek);let r=e.getBoundingClientRect();if(t.ignoreTransform){let{transform:t,transformOrigin:a}=P(e).getComputedStyle(e);t&&(r=function(e,t,r){let a=function(e){if(e.startsWith("matrix3d(")){let t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){let t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}(t);if(!a)return e;let{scaleX:l,scaleY:n,x:s,y:i}=a,o=e.left-s-(1-l)*parseFloat(r),d=e.top-i-(1-n)*parseFloat(r.slice(r.indexOf(" ")+1)),c=l?e.width/l:e.width,u=n?e.height/n:e.height;return{width:c,height:u,top:d,right:o+c,bottom:d+u,left:o}}(r,t,a))}let{top:a,left:l,width:n,height:s,bottom:i,right:o}=r;return{top:a,left:l,width:n,height:s,bottom:i,right:o}}function eN(e){return ej(e,{ignoreTransform:!0})}function eS(e,t){let r=[];return e?function a(l){var n,s;let i;if(null!=t&&r.length>=t||!l)return r;if(z(l)&&null!=l.scrollingElement&&!r.includes(l.scrollingElement))return r.push(l.scrollingElement),r;if(!B(l)||U(l)||r.includes(l))return r;let o=P(e).getComputedStyle(l);return(l!==e&&(void 0===(n=o)&&(n=P(l).getComputedStyle(l)),i=/(auto|scroll|overlay)/,["overflow","overflowX","overflowY"].some(e=>{let t=n[e];return"string"==typeof t&&i.test(t)}))&&r.push(l),void 0===(s=o)&&(s=P(l).getComputedStyle(l)),"fixed"===s.position)?r:a(l.parentNode)}(e):r}function eC(e){let[t]=eS(e,1);return null!=t?t:null}function eT(e){return O&&e?I(e)?e:L(e)?z(e)||e===F(e).scrollingElement?window:B(e)?e:null:null:null}function eD(e){return I(e)?e.scrollX:e.scrollLeft}function eE(e){return I(e)?e.scrollY:e.scrollTop}function eM(e){return{x:eD(e),y:eE(e)}}function eR(e){return!!O&&!!e&&e===document.scrollingElement}function eA(e){let t={x:0,y:0},r=eR(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},a={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},l=e.scrollTop<=t.y,n=e.scrollLeft<=t.x;return{isTop:l,isLeft:n,isBottom:e.scrollTop>=a.y,isRight:e.scrollLeft>=a.x,maxScroll:a,minScroll:t}}(a=h||(h={}))[a.Forward=1]="Forward",a[a.Backward=-1]="Backward";let eO={x:.2,y:.2};function eI(e){return e.reduce((e,t)=>q(e,eM(t)),eu)}let eL=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+eD(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+eE(t),0)}]];class eP{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=eS(t),a=eI(r);for(const[t,l,n]of(this.rect={...e},this.width=e.width,this.height=e.height,eL))for(const e of l)Object.defineProperty(this,e,{get:()=>{let l=n(r),s=a[t]-l;return this.rect[e]+s},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ez{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,r){var a;null==(a=this.target)||a.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function eB(e,t){let r=Math.abs(e.x),a=Math.abs(e.y);return"number"==typeof t?Math.sqrt(r**2+a**2)>t:"x"in t&&"y"in t?r>t.x&&a>t.y:"x"in t?r>t.x:"y"in t&&a>t.y}function eU(e){e.preventDefault()}function eF(e){e.stopPropagation()}(l=x||(x={})).Click="click",l.DragStart="dragstart",l.Keydown="keydown",l.ContextMenu="contextmenu",l.Resize="resize",l.SelectionChange="selectionchange",l.VisibilityChange="visibilitychange",(n=f||(f={})).Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab";let eK={start:[f.Space,f.Enter],cancel:[f.Esc],end:[f.Space,f.Enter,f.Tab]},eY=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case f.Right:return{...r,x:r.x+25};case f.Left:return{...r,x:r.x-25};case f.Down:return{...r,y:r.y+25};case f.Up:return{...r,y:r.y-25}}};class e${constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new ez(F(t)),this.windowListeners=new ez(P(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(x.Resize,this.handleCancel),this.windowListeners.add(x.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(x.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&function(e,t){if(void 0===t&&(t=ej),!e)return;let{top:r,left:a,bottom:l,right:n}=t(e);eC(e)&&(l<=0||n<=0||r>=window.innerHeight||a>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}(r),t(eu)}handleKeyDown(e){if(Z(e)){let{active:t,context:r,options:a}=this.props,{keyboardCodes:l=eK,coordinateGetter:n=eY,scrollBehavior:s="smooth"}=a,{code:i}=e;if(l.end.includes(i))return void this.handleEnd(e);if(l.cancel.includes(i))return void this.handleCancel(e);let{collisionRect:o}=r.current,d=o?{x:o.left,y:o.top}:eu;this.referenceCoordinates||(this.referenceCoordinates=d);let c=n(e,{active:t,context:r.current,currentCoordinates:d});if(c){let t=G(c,d),a={x:0,y:0},{scrollableAncestors:l}=r.current;for(let r of l){let l=e.code,{isTop:n,isRight:i,isLeft:o,isBottom:d,maxScroll:u,minScroll:h}=eA(r),x=function(e){if(e===document.scrollingElement){let{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}let{top:t,left:r,right:a,bottom:l}=e.getBoundingClientRect();return{top:t,left:r,right:a,bottom:l,width:e.clientWidth,height:e.clientHeight}}(r),g={x:Math.min(l===f.Right?x.right-x.width/2:x.right,Math.max(l===f.Right?x.left:x.left+x.width/2,c.x)),y:Math.min(l===f.Down?x.bottom-x.height/2:x.bottom,Math.max(l===f.Down?x.top:x.top+x.height/2,c.y))},b=l===f.Right&&!i||l===f.Left&&!o,m=l===f.Down&&!d||l===f.Up&&!n;if(b&&g.x!==c.x){let e=r.scrollLeft+t.x,n=l===f.Right&&e<=u.x||l===f.Left&&e>=h.x;if(n&&!t.y)return void r.scrollTo({left:e,behavior:s});n?a.x=r.scrollLeft-e:a.x=l===f.Right?r.scrollLeft-u.x:r.scrollLeft-h.x,a.x&&r.scrollBy({left:-a.x,behavior:s});break}if(m&&g.y!==c.y){let e=r.scrollTop+t.y,n=l===f.Down&&e<=u.y||l===f.Up&&e>=h.y;if(n&&!t.x)return void r.scrollTo({top:e,behavior:s});n?a.y=r.scrollTop-e:a.y=l===f.Down?r.scrollTop-u.y:r.scrollTop-h.y,a.y&&r.scrollBy({top:-a.y,behavior:s});break}}this.handleMove(e,q(G(c,this.referenceCoordinates),a))}}}handleMove(e,t){let{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){let{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){let{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function eX(e){return!!(e&&"distance"in e)}function eJ(e){return!!(e&&"delay"in e)}e$.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:a=eK,onActivation:l}=t,{active:n}=r,{code:s}=e.nativeEvent;if(a.start.includes(s)){let t=n.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==l||l({event:e.nativeEvent}),!0)}return!1}}];class e_{constructor(e,t,r){var a;void 0===r&&(r=function(e){let{EventTarget:t}=P(e);return e instanceof t?e:F(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:l}=e,{target:n}=l;this.props=e,this.events=t,this.document=F(n),this.documentListeners=new ez(this.document),this.listeners=new ez(r),this.windowListeners=new ez(P(n)),this.initialCoordinates=null!=(a=Q(l))?a:eu,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(x.Resize,this.handleCancel),this.windowListeners.add(x.DragStart,eU),this.windowListeners.add(x.VisibilityChange,this.handleCancel),this.windowListeners.add(x.ContextMenu,eU),this.documentListeners.add(x.Keydown,this.handleKeydown),t){if(null!=r&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(eJ(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(eX(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){let{active:r,onPending:a}=this.props;a(r,e,this.initialCoordinates,t)}handleStart(){let{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(x.Click,eF,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(x.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;let{activated:r,initialCoordinates:a,props:l}=this,{onMove:n,options:{activationConstraint:s}}=l;if(!a)return;let i=null!=(t=Q(e))?t:eu,o=G(a,i);if(!r&&s){if(eX(s)){if(null!=s.tolerance&&eB(o,s.tolerance))return this.handleCancel();if(eB(o,s.distance))return this.handleStart()}return eJ(s)&&eB(o,s.tolerance)?this.handleCancel():void this.handlePending(s,o)}e.cancelable&&e.preventDefault(),n(i)}handleEnd(){let{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){let{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===f.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}let eW={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class eH extends e_{constructor(e){const{event:t}=e;super(e,eW,F(t.target))}}eH.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:a}=t;return!!r.isPrimary&&0===r.button&&(null==a||a({event:r}),!0)}}];(s=g||(g={}))[s.RightClick=2]="RightClick";(i=b||(b={}))[i.Pointer=0]="Pointer",i[i.DraggableRect=1]="DraggableRect",(o=m||(m={}))[o.TreeOrder=0]="TreeOrder",o[o.ReversedTreeOrder=1]="ReversedTreeOrder";let eV={x:{[h.Backward]:!1,[h.Forward]:!1},y:{[h.Backward]:!1,[h.Forward]:!1}};(d=p||(p={}))[d.Always=0]="Always",d[d.BeforeDragging=1]="BeforeDragging",d[d.WhileDragging=2]="WhileDragging",(v||(v={})).Optimized="optimized";let eq=new Map;function eG(e,t){return X(r=>e?r||("function"==typeof t?t(e):e):null,[t,e])}function eZ(e){let{callback:t,disabled:r}=e,a=Y(t),l=(0,k.useMemo)(()=>{if(r||"undefined"==typeof window||void 0===window.ResizeObserver)return;let{ResizeObserver:e}=window;return new e(a)},[r]);return(0,k.useEffect)(()=>()=>null==l?void 0:l.disconnect(),[l]),l}function eQ(e){return new eP(ej(e),e)}function e0(e,t,r){void 0===t&&(t=eQ);let[a,l]=(0,k.useState)(null);function n(){l(a=>{if(!e)return null;if(!1===e.isConnected){var l;return null!=(l=null!=a?a:r)?l:null}let n=t(e);return JSON.stringify(a)===JSON.stringify(n)?a:n})}let s=function(e){let{callback:t,disabled:r}=e,a=Y(t),l=(0,k.useMemo)(()=>{if(r||"undefined"==typeof window||void 0===window.MutationObserver)return;let{MutationObserver:e}=window;return new e(a)},[a,r]);return(0,k.useEffect)(()=>()=>null==l?void 0:l.disconnect(),[l]),l}({callback(t){if(e)for(let r of t){let{type:t,target:a}=r;if("childList"===t&&a instanceof HTMLElement&&a.contains(e)){n();break}}}}),i=eZ({callback:n});return K(()=>{n(),e?(null==i||i.observe(e),null==s||s.observe(document.body,{childList:!0,subtree:!0})):(null==i||i.disconnect(),null==s||s.disconnect())},[e]),a}let e1=[];function e2(e,t){void 0===t&&(t=[]);let r=(0,k.useRef)(null);return(0,k.useEffect)(()=>{r.current=null},t),(0,k.useEffect)(()=>{let t=e!==eu;t&&!r.current&&(r.current=e),!t&&r.current&&(r.current=null)},[e]),r.current?G(e,r.current):eu}function e5(e){return(0,k.useMemo)(()=>{let t,r;return e?(t=e.innerWidth,{top:0,left:0,right:t,bottom:r=e.innerHeight,width:t,height:r}):null},[e])}let e3=[],e7=[{sensor:eH,options:{}},{sensor:e$,options:{}}],e6={current:{}},e4={draggable:{measure:eN},droppable:{measure:eN,strategy:p.WhileDragging,frequency:v.Optimized},dragOverlay:{measure:ej}};class e8 extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return null!=(t=null==(r=this.get(e))?void 0:r.node.current)?t:void 0}}let e9={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new e8,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ed},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:e4,measureDroppableContainers:ed,windowRect:null,measuringScheduled:!1},te={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ed,draggableNodes:new Map,over:null,measureDroppableContainers:ed},tt=(0,k.createContext)(te),tr=(0,k.createContext)(e9);function ta(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new e8}}}function tl(e,t){switch(t.type){case u.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case u.DragMove:if(null==e.draggable.active)return e;return{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case u.DragEnd:case u.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case u.RegisterDroppable:{let{element:r}=t,{id:a}=r,l=new e8(e.droppable.containers);return l.set(a,r),{...e,droppable:{...e.droppable,containers:l}}}case u.SetDroppableDisabled:{let{id:r,key:a,disabled:l}=t,n=e.droppable.containers.get(r);if(!n||a!==n.key)return e;let s=new e8(e.droppable.containers);return s.set(r,{...n,disabled:l}),{...e,droppable:{...e.droppable,containers:s}}}case u.UnregisterDroppable:{let{id:r,key:a}=t,l=e.droppable.containers.get(r);if(!l||a!==l.key)return e;let n=new e8(e.droppable.containers);return n.delete(r),{...e,droppable:{...e.droppable,containers:n}}}default:return e}}function tn(e){let{disabled:t}=e,{active:r,activatorEvent:a,draggableNodes:l}=(0,k.useContext)(tt),n=_(a),s=_(null==r?void 0:r.id);return(0,k.useEffect)(()=>{if(!t&&!a&&n&&null!=s){if(!Z(n)||document.activeElement===n.target)return;let e=l.get(s);if(!e)return;let{activatorNode:t,node:r}=e;(t.current||r.current)&&requestAnimationFrame(()=>{for(let e of[t.current,r.current]){if(!e)continue;let t=e.matches(et)?e:e.querySelector(et);if(t){t.focus();break}}})}},[a,t,l,s,n]),null}let ts=(0,k.createContext)({...eu,scaleX:1,scaleY:1});(c=y||(y={}))[c.Uninitialized=0]="Uninitialized",c[c.Initializing=1]="Initializing",c[c.Initialized=2]="Initialized";let ti=(0,k.memo)(function(e){var t,r,a,l,n,s,i,o;let d,c,x,f,g,v,w,j,{id:N,accessibility:S,autoScroll:C=!0,children:T,sensors:D=e7,collisionDetection:E=ev,measuring:M,modifiers:R,...I}=e,[L,z]=(0,k.useReducer)(tl,void 0,ta),[U,F]=function(){let[e]=(0,k.useState)(()=>new Set),t=(0,k.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,k.useCallback)(t=>{let{type:r,event:a}=t;e.forEach(e=>{var t;return null==(t=e[r])?void 0:t.call(e,a)})},[e]),t]}(),[Y,W]=(0,k.useState)(y.Uninitialized),V=Y===y.Initialized,{draggable:{active:G,nodes:Z,translate:ee},droppable:{containers:et}}=L,er=null!=G?Z.get(G):null,ea=(0,k.useRef)({initial:null,translated:null}),el=(0,k.useMemo)(()=>{var e;return null!=G?{id:G,data:null!=(e=null==er?void 0:er.data)?e:e6,rect:ea}:null},[G,er]),es=(0,k.useRef)(null),[ei,ed]=(0,k.useState)(null),[ec,eh]=(0,k.useState)(null),ex=$(I,Object.values(I)),ef=H("DndDescribedBy",N),eg=(0,k.useMemo)(()=>et.getEnabled(),[et]),em=(0,k.useMemo)(()=>({draggable:{...e4.draggable,...null==M?void 0:M.draggable},droppable:{...e4.droppable,...null==M?void 0:M.droppable},dragOverlay:{...e4.dragOverlay,...null==M?void 0:M.dragOverlay}}),[null==M?void 0:M.draggable,null==M?void 0:M.droppable,null==M?void 0:M.dragOverlay]),{droppableRects:ep,measureDroppableContainers:ek,measuringScheduled:eN}=function(e,t){let{dragging:r,dependencies:a,config:l}=t,[n,s]=(0,k.useState)(null),{frequency:i,measure:o,strategy:d}=l,c=(0,k.useRef)(e),u=function(){switch(d){case p.Always:return!1;case p.BeforeDragging:return r;default:return!r}}(),h=$(u),x=(0,k.useCallback)(function(e){void 0===e&&(e=[]),h.current||s(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[h]),f=(0,k.useRef)(null),g=X(t=>{if(u&&!r)return eq;if(!t||t===eq||c.current!==e||null!=n){let t=new Map;for(let r of e){if(!r)continue;if(n&&n.length>0&&!n.includes(r.id)&&r.rect.current){t.set(r.id,r.rect.current);continue}let e=r.node.current,a=e?new eP(o(e),e):null;r.rect.current=a,a&&t.set(r.id,a)}return t}return t},[e,n,r,u,o]);return(0,k.useEffect)(()=>{c.current=e},[e]),(0,k.useEffect)(()=>{u||x()},[r,u]),(0,k.useEffect)(()=>{n&&n.length>0&&s(null)},[JSON.stringify(n)]),(0,k.useEffect)(()=>{u||"number"!=typeof i||null!==f.current||(f.current=setTimeout(()=>{x(),f.current=null},i))},[i,u,x,...a]),{droppableRects:g,measureDroppableContainers:x,measuringScheduled:null!=n}}(eg,{dragging:V,dependencies:[ee.x,ee.y],config:em.droppable}),eD=X(e=>{var t;return null==G?null:null!=(t=null!=g?g:e)?t:null},[g=(f=null!=G?Z.get(G):void 0)?f.node.current:null,G]),eE=(0,k.useMemo)(()=>ec?Q(ec):null,[ec]),eL=(d=(null==ei?void 0:ei.autoScrollEnabled)===!1,c="object"==typeof C?!1===C.enabled:!1===C,x=V&&!d&&!c,"object"==typeof C?{...C,enabled:x}:{enabled:x}),ez=eG(eD,em.draggable.measure);!function(e){let{activeNode:t,measure:r,initialRect:a,config:l=!0}=e,n=(0,k.useRef)(!1),{x:s,y:i}="boolean"==typeof l?{x:l,y:l}:l;K(()=>{if(!s&&!i||!t){n.current=!1;return}if(n.current||!a)return;let e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;let l=ey(r(e),a);if(s||(l.x=0),i||(l.y=0),n.current=!0,Math.abs(l.x)>0||Math.abs(l.y)>0){let t=eC(e);t&&t.scrollBy({top:l.y,left:l.x})}},[t,s,i,a,r])}({activeNode:null!=G?Z.get(G):null,config:eL.layoutShiftCompensation,initialRect:ez,measure:em.draggable.measure});let eB=e0(eD,em.draggable.measure,ez),eU=e0(eD?eD.parentElement:null),eF=(0,k.useRef)({activatorEvent:null,active:null,activeNode:eD,collisionRect:null,collisions:null,droppableRects:ep,draggableNodes:Z,draggingNode:null,draggingNodeRect:null,droppableContainers:et,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),eK=et.getNodeFor(null==(t=eF.current.over)?void 0:t.id),eY=function(e){let{measure:t}=e,[r,a]=(0,k.useState)(null),l=eZ({callback:(0,k.useCallback)(e=>{for(let{target:r}of e)if(B(r)){a(e=>{let a=t(r);return e?{...e,width:a.width,height:a.height}:a});break}},[t])}),[n,s]=J((0,k.useCallback)(e=>{let r=function(e){if(!e)return null;if(e.children.length>1)return e;let t=e.children[0];return B(t)?t:e}(e);null==l||l.disconnect(),r&&(null==l||l.observe(r)),a(r?t(r):null)},[t,l]));return(0,k.useMemo)(()=>({nodeRef:n,rect:r,setRef:s}),[r,n,s])}({measure:em.dragOverlay.measure}),e$=null!=(r=eY.nodeRef.current)?r:eD,eX=V?null!=(a=eY.rect)?a:eB:null,eJ=!!(eY.nodeRef.current&&eY.rect),e_=(v=eG(n=eJ?null:eB),ey(n,v)),eW=e5(e$?P(e$):null),eH=(s=V?null!=eK?eK:eD:null,w=(0,k.useRef)(s),j=X(e=>s?e&&e!==e1&&s&&w.current&&s.parentNode===w.current.parentNode?e:eS(s):e1,[s]),(0,k.useEffect)(()=>{w.current=s},[s]),j),eQ=function(e,t){void 0===t&&(t=ej);let[r]=e,a=e5(r?P(r):null),[l,n]=(0,k.useState)(e3);function s(){n(()=>e.length?e.map(e=>eR(e)?a:new eP(t(e),e)):e3)}let i=eZ({callback:s});return K(()=>{null==i||i.disconnect(),s(),e.forEach(e=>null==i?void 0:i.observe(e))},[e]),l}(eH),e8=function(e,t){let{transform:r,...a}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...a}),r):r}(R,{transform:{x:ee.x-e_.x,y:ee.y-e_.y,scaleX:1,scaleY:1},activatorEvent:ec,active:el,activeNodeRect:eB,containerNodeRect:eU,draggingNodeRect:eX,over:eF.current.over,overlayNodeRect:eY.rect,scrollableAncestors:eH,scrollableAncestorRects:eQ,windowRect:eW}),e9=eE?q(eE,ee):null,te=function(e){let[t,r]=(0,k.useState)(null),a=(0,k.useRef)(e),l=(0,k.useCallback)(e=>{let t=eT(e.target);t&&r(e=>e?(e.set(t,eM(t)),new Map(e)):null)},[]);return(0,k.useEffect)(()=>{let t=a.current;if(e!==t){n(t);let s=e.map(e=>{let t=eT(e);return t?(t.addEventListener("scroll",l,{passive:!0}),[t,eM(t)]):null}).filter(e=>null!=e);r(s.length?new Map(s):null),a.current=e}return()=>{n(e),n(t)};function n(e){e.forEach(e=>{let t=eT(e);null==t||t.removeEventListener("scroll",l)})}},[l,e]),(0,k.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>q(e,t),eu):eI(e):eu,[e,t])}(eH),ti=e2(te),to=e2(te,[eB]),td=q(e8,ti),tc=eX?ew(eX,e8):null,tu=el&&tc?E({active:el,collisionRect:tc,droppableRects:ep,droppableContainers:eg,pointerCoordinates:e9}):null,th=eb(tu,"id"),[tx,tf]=(0,k.useState)(null),tg=(i=eJ?e8:q(e8,to),o=null!=(l=null==tx?void 0:tx.rect)?l:null,{...i,scaleX:o&&eB?o.width/eB.width:1,scaleY:o&&eB?o.height/eB.height:1}),tb=(0,k.useRef)(null),tm=(0,k.useCallback)((e,t)=>{let{sensor:r,options:a}=t;if(null==es.current)return;let l=Z.get(es.current);if(!l)return;let n=e.nativeEvent,s=new r({active:es.current,activeNode:l,event:n,options:a,context:eF,onAbort(e){if(!Z.get(e))return;let{onDragAbort:t}=ex.current,r={id:e};null==t||t(r),U({type:"onDragAbort",event:r})},onPending(e,t,r,a){if(!Z.get(e))return;let{onDragPending:l}=ex.current,n={id:e,constraint:t,initialCoordinates:r,offset:a};null==l||l(n),U({type:"onDragPending",event:n})},onStart(e){let t=es.current;if(null==t)return;let r=Z.get(t);if(!r)return;let{onDragStart:a}=ex.current,l={activatorEvent:n,active:{id:t,data:r.data,rect:ea}};(0,A.unstable_batchedUpdates)(()=>{null==a||a(l),W(y.Initializing),z({type:u.DragStart,initialCoordinates:e,active:t}),U({type:"onDragStart",event:l}),ed(tb.current),eh(n)})},onMove(e){z({type:u.DragMove,coordinates:e})},onEnd:i(u.DragEnd),onCancel:i(u.DragCancel)});function i(e){return async function(){let{active:t,collisions:r,over:a,scrollAdjustedTranslate:l}=eF.current,s=null;if(t&&l){let{cancelDrop:i}=ex.current;s={activatorEvent:n,active:t,collisions:r,delta:l,over:a},e===u.DragEnd&&"function"==typeof i&&await Promise.resolve(i(s))&&(e=u.DragCancel)}es.current=null,(0,A.unstable_batchedUpdates)(()=>{z({type:e}),W(y.Uninitialized),tf(null),ed(null),eh(null),tb.current=null;let t=e===u.DragEnd?"onDragEnd":"onDragCancel";if(s){let e=ex.current[t];null==e||e(s),U({type:t,event:s})}})}}tb.current=s},[Z]),tp=(0,k.useCallback)((e,t)=>(r,a)=>{let l=r.nativeEvent,n=Z.get(a);null!==es.current||!n||l.dndKit||l.defaultPrevented||!0===e(r,t.options,{active:n})&&(l.dndKit={capturedBy:t.sensor},es.current=a,tm(r,t))},[Z,tm]),tv=(0,k.useMemo)(()=>D.reduce((e,t)=>{let{sensor:r}=t;return[...e,...r.activators.map(e=>({eventName:e.eventName,handler:tp(e.handler,t)}))]},[]),[D,tp]);(0,k.useEffect)(()=>{if(!O)return;let e=D.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(let t of e)null==t||t()}},D.map(e=>{let{sensor:t}=e;return t})),K(()=>{eB&&Y===y.Initializing&&W(y.Initialized)},[eB,Y]),(0,k.useEffect)(()=>{let{onDragMove:e}=ex.current,{active:t,activatorEvent:r,collisions:a,over:l}=eF.current;if(!t||!r)return;let n={active:t,activatorEvent:r,collisions:a,delta:{x:td.x,y:td.y},over:l};(0,A.unstable_batchedUpdates)(()=>{null==e||e(n),U({type:"onDragMove",event:n})})},[td.x,td.y]),(0,k.useEffect)(()=>{let{active:e,activatorEvent:t,collisions:r,droppableContainers:a,scrollAdjustedTranslate:l}=eF.current;if(!e||null==es.current||!t||!l)return;let{onDragOver:n}=ex.current,s=a.get(th),i=s&&s.rect.current?{id:s.id,rect:s.rect.current,data:s.data,disabled:s.disabled}:null,o={active:e,activatorEvent:t,collisions:r,delta:{x:l.x,y:l.y},over:i};(0,A.unstable_batchedUpdates)(()=>{tf(i),null==n||n(o),U({type:"onDragOver",event:o})})},[th]),K(()=>{eF.current={activatorEvent:ec,active:el,activeNode:eD,collisionRect:tc,collisions:tu,droppableRects:ep,draggableNodes:Z,draggingNode:e$,draggingNodeRect:eX,droppableContainers:et,over:tx,scrollableAncestors:eH,scrollAdjustedTranslate:td},ea.current={initial:eX,translated:tc}},[el,eD,tu,tc,Z,e$,eX,ep,et,tx,eH,td]),function(e){let t,{acceleration:r,activator:a=b.Pointer,canScroll:l,draggingRect:n,enabled:s,interval:i=5,order:o=m.TreeOrder,pointerCoordinates:d,scrollableAncestors:c,scrollableAncestorRects:u,delta:x,threshold:f}=e,g=function(e){let{delta:t,disabled:r}=e,a=_(t);return X(e=>{if(r||!a||!e)return eV;let l={x:Math.sign(t.x-a.x),y:Math.sign(t.y-a.y)};return{x:{[h.Backward]:e.x[h.Backward]||-1===l.x,[h.Forward]:e.x[h.Forward]||1===l.x},y:{[h.Backward]:e.y[h.Backward]||-1===l.y,[h.Forward]:e.y[h.Forward]||1===l.y}}},[r,t,a])}({delta:x,disabled:!s}),[p,v]=(t=(0,k.useRef)(null),[(0,k.useCallback)((e,r)=>{t.current=setInterval(e,r)},[]),(0,k.useCallback)(()=>{null!==t.current&&(clearInterval(t.current),t.current=null)},[])]),y=(0,k.useRef)({x:0,y:0}),w=(0,k.useRef)({x:0,y:0}),j=(0,k.useMemo)(()=>{switch(a){case b.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case b.DraggableRect:return n}},[a,n,d]),N=(0,k.useRef)(null),S=(0,k.useCallback)(()=>{let e=N.current;if(!e)return;let t=y.current.x*w.current.x,r=y.current.y*w.current.y;e.scrollBy(t,r)},[]),C=(0,k.useMemo)(()=>o===m.TreeOrder?[...c].reverse():c,[o,c]);(0,k.useEffect)(()=>{if(!s||!c.length||!j)return void v();for(let e of C){if((null==l?void 0:l(e))===!1)continue;let t=u[c.indexOf(e)];if(!t)continue;let{direction:a,speed:n}=function(e,t,r,a,l){let{top:n,left:s,right:i,bottom:o}=r;void 0===a&&(a=10),void 0===l&&(l=eO);let{isTop:d,isBottom:c,isLeft:u,isRight:x}=eA(e),f={x:0,y:0},g={x:0,y:0},b={height:t.height*l.y,width:t.width*l.x};return!d&&n<=t.top+b.height?(f.y=h.Backward,g.y=a*Math.abs((t.top+b.height-n)/b.height)):!c&&o>=t.bottom-b.height&&(f.y=h.Forward,g.y=a*Math.abs((t.bottom-b.height-o)/b.height)),!x&&i>=t.right-b.width?(f.x=h.Forward,g.x=a*Math.abs((t.right-b.width-i)/b.width)):!u&&s<=t.left+b.width&&(f.x=h.Backward,g.x=a*Math.abs((t.left+b.width-s)/b.width)),{direction:f,speed:g}}(e,t,j,r,f);for(let e of["x","y"])g[e][a[e]]||(n[e]=0,a[e]=0);if(n.x>0||n.y>0){v(),N.current=e,p(S,i),y.current=n,w.current=a;return}}y.current={x:0,y:0},w.current={x:0,y:0},v()},[r,S,l,v,s,i,JSON.stringify(j),JSON.stringify(g),p,c,C,u,JSON.stringify(f)])}({...eL,delta:ee,draggingRect:tc,pointerCoordinates:e9,scrollableAncestors:eH,scrollableAncestorRects:eQ});let ty=(0,k.useMemo)(()=>({active:el,activeNode:eD,activeNodeRect:eB,activatorEvent:ec,collisions:tu,containerNodeRect:eU,dragOverlay:eY,draggableNodes:Z,droppableContainers:et,droppableRects:ep,over:tx,measureDroppableContainers:ek,scrollableAncestors:eH,scrollableAncestorRects:eQ,measuringConfiguration:em,measuringScheduled:eN,windowRect:eW}),[el,eD,eB,ec,tu,eU,eY,Z,et,ep,tx,ek,eH,eQ,em,eN,eW]),tw=(0,k.useMemo)(()=>({activatorEvent:ec,activators:tv,active:el,activeNodeRect:eB,ariaDescribedById:{draggable:ef},dispatch:z,draggableNodes:Z,over:tx,measureDroppableContainers:ek}),[ec,tv,el,eB,z,ef,Z,tx,ek]);return k.default.createElement(en.Provider,{value:F},k.default.createElement(tt.Provider,{value:tw},k.default.createElement(tr.Provider,{value:ty},k.default.createElement(ts.Provider,{value:tg},T)),k.default.createElement(tn,{disabled:(null==S?void 0:S.restoreFocus)===!1})),k.default.createElement(eo,{...S,hiddenTextDescribedById:ef}))}),to=(0,k.createContext)(null),td="button",tc={timeout:25},tu={position:"fixed",touchAction:"none"},th=e=>Z(e)?"transform 250ms ease":void 0;function tx(e,t,r){let a=e.slice();return a.splice(r<0?a.length+r:r,0,a.splice(t,1)[0]),a}function tf(e){return null!==e&&e>=0}t={styles:{active:{opacity:"0"}}},e=>{let{active:r,dragOverlay:a}=e,l={},{styles:n,className:s}=t;if(null!=n&&n.active)for(let[e,t]of Object.entries(n.active))void 0!==t&&(l[e]=r.node.style.getPropertyValue(e),r.node.style.setProperty(e,t));if(null!=n&&n.dragOverlay)for(let[e,t]of Object.entries(n.dragOverlay))void 0!==t&&a.node.style.setProperty(e,t);return null!=s&&s.active&&r.node.classList.add(s.active),null!=s&&s.dragOverlay&&a.node.classList.add(s.dragOverlay),function(){for(let[e,t]of Object.entries(l))r.node.style.setProperty(e,t);null!=s&&s.active&&r.node.classList.remove(s.active)}};let tg=e=>{let{rects:t,activeIndex:r,overIndex:a,index:l}=e,n=tx(t,a,r),s=t[l],i=n[l];return i&&s?{x:i.left-s.left,y:i.top-s.top,scaleX:i.width/s.width,scaleY:i.height/s.height}:null},tb={scaleX:1,scaleY:1},tm=e=>{var t,r,a,l;let n,s,i,{activeIndex:o,activeNodeRect:d,index:c,rects:u,overIndex:h}=e,x=null!=(t=u[o])?t:d;if(!x)return null;if(c===o){let e=u[h];return e?{x:0,y:o<h?e.top+e.height-(x.top+x.height):e.top-x.top,...tb}:null}let f=(r=u,a=c,l=o,n=r[a],s=r[a-1],i=r[a+1],n?l<a?s?n.top-(s.top+s.height):i?i.top-(n.top+n.height):0:i?i.top-(n.top+n.height):s?n.top-(s.top+s.height):0:0);return c>o&&c<=h?{x:0,y:-x.height-f,...tb}:c<o&&c>=h?{x:0,y:x.height+f,...tb}:{x:0,y:0,...tb}},tp="Sortable",tv=k.default.createContext({activeIndex:-1,containerId:tp,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:tg,disabled:{draggable:!1,droppable:!1}});function ty(e){let{children:t,id:r,items:a,strategy:l=tg,disabled:n=!1}=e,{active:s,dragOverlay:i,droppableRects:o,over:d,measureDroppableContainers:c}=(0,k.useContext)(tr),u=H(tp,r),h=null!==i.rect,x=(0,k.useMemo)(()=>a.map(e=>"object"==typeof e&&"id"in e?e.id:e),[a]),f=null!=s,g=s?x.indexOf(s.id):-1,b=d?x.indexOf(d.id):-1,m=(0,k.useRef)(x),p=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(x,m.current),v=-1!==b&&-1===g||p,y="boolean"==typeof n?{draggable:n,droppable:n}:n;K(()=>{p&&f&&c(x)},[p,x,f,c]),(0,k.useEffect)(()=>{m.current=x},[x]);let w=(0,k.useMemo)(()=>({activeIndex:g,containerId:u,disabled:y,disableTransforms:v,items:x,overIndex:b,useDragOverlay:h,sortedRects:x.reduce((e,t,r)=>{let a=o.get(t);return a&&(e[r]=a),e},Array(x.length)),strategy:l}),[g,u,y.draggable,y.droppable,v,x,b,o,h,l]);return k.default.createElement(tv.Provider,{value:w},t)}let tw=e=>{let{id:t,items:r,activeIndex:a,overIndex:l}=e;return tx(r,a,l).indexOf(t)},tk=e=>{let{containerId:t,isSorting:r,wasDragging:a,index:l,items:n,newIndex:s,previousItems:i,previousContainerId:o,transition:d}=e;return!!d&&!!a&&(i===n||l!==s)&&(!!r||s!==l&&t===o)},tj={duration:200,easing:"ease"},tN="transform",tS=ee.Transition.toString({property:tN,duration:0,easing:"linear"}),tC={roleDescription:"sortable"};function tT(e){if(!e)return!1;let t=e.data.current;return!!t&&"sortable"in t&&"object"==typeof t.sortable&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable}let tD=[f.Down,f.Right,f.Up,f.Left],tE=(e,t)=>{let{context:{active:r,collisionRect:a,droppableRects:l,droppableContainers:n,over:s,scrollableAncestors:i}}=t;if(tD.includes(e.code)){if(e.preventDefault(),!r||!a)return;let t=[];n.getEnabled().forEach(r=>{if(!r||null!=r&&r.disabled)return;let n=l.get(r.id);if(n)switch(e.code){case f.Down:a.top<n.top&&t.push(r);break;case f.Up:a.top>n.top&&t.push(r);break;case f.Left:a.left>n.left&&t.push(r);break;case f.Right:a.left<n.left&&t.push(r)}});let c=(e=>{let{collisionRect:t,droppableRects:r,droppableContainers:a}=e,l=eg(t),n=[];for(let e of a){let{id:t}=e,a=r.get(t);if(a){let r=eg(a),s=Number((l.reduce((e,t,a)=>e+eh(r[a],t),0)/4).toFixed(4));n.push({id:t,data:{droppableContainer:e,value:s}})}}return n.sort(ex)})({active:r,collisionRect:a,droppableRects:l,droppableContainers:t,pointerCoordinates:null}),u=eb(c,"id");if(u===(null==s?void 0:s.id)&&c.length>1&&(u=c[1].id),null!=u){let e=n.get(r.id),t=n.get(u),s=t?l.get(t.id):null,c=null==t?void 0:t.node.current;if(c&&s&&e&&t){var o,d;let r=eS(c).some((e,t)=>i[t]!==e),l=tM(e,t),n=(o=e,d=t,!!tT(o)&&!!tT(d)&&!!tM(o,d)&&o.data.current.sortable.index<d.data.current.sortable.index),u=r||!l?{x:0,y:0}:{x:n?a.width-s.width:0,y:n?a.height-s.height:0},h={x:s.left,y:s.top};return u.x&&u.y?h:G(h,u)}}}};function tM(e,t){return!!tT(e)&&!!tT(t)&&e.data.current.sortable.containerId===t.data.current.sortable.containerId}let tR=k.forwardRef(function({title:e,titleId:t,...r},a){return k.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?k.createElement("title",{id:t},e):null,k.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))});function tA({task:e,now:t,tags:r,onChangeStatus:a,onChangeTag:l,onChangePriority:n,onChangeEstimated:s,onToggleToday:i,onStartTimer:o,onStopTimer:d,onDelete:c}){let{attributes:h,listeners:x,setNodeRef:f,transform:g,transition:b,isDragging:m}=function(e){var t,r,a,l;let{animateLayoutChanges:n=tk,attributes:s,disabled:i,data:o,getNewIndex:d=tw,id:c,strategy:h,resizeObserverConfig:x,transition:f=tj}=e,{items:g,containerId:b,activeIndex:m,disabled:p,disableTransforms:v,sortedRects:y,overIndex:w,useDragOverlay:j,strategy:N}=(0,k.useContext)(tv),S=(t=i,r=p,"boolean"==typeof t?{draggable:t,droppable:!1}:{draggable:null!=(a=null==t?void 0:t.draggable)?a:r.draggable,droppable:null!=(l=null==t?void 0:t.droppable)?l:r.droppable}),C=g.indexOf(c),T=(0,k.useMemo)(()=>({sortable:{containerId:b,index:C,items:g},...o}),[b,o,C,g]),D=(0,k.useMemo)(()=>g.slice(g.indexOf(c)),[g,c]),{rect:E,node:M,isOver:R,setNodeRef:A}=function(e){let{data:t,disabled:r=!1,id:a,resizeObserverConfig:l}=e,n=H("Droppable"),{active:s,dispatch:i,over:o,measureDroppableContainers:d}=(0,k.useContext)(tt),c=(0,k.useRef)({disabled:r}),h=(0,k.useRef)(!1),x=(0,k.useRef)(null),f=(0,k.useRef)(null),{disabled:g,updateMeasurementsFor:b,timeout:m}={...tc,...l},p=$(null!=b?b:a),v=eZ({callback:(0,k.useCallback)(()=>{if(!h.current){h.current=!0;return}null!=f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{d(Array.isArray(p.current)?p.current:[p.current]),f.current=null},m)},[m]),disabled:g||!s}),[y,w]=J((0,k.useCallback)((e,t)=>{v&&(t&&(v.unobserve(t),h.current=!1),e&&v.observe(e))},[v])),j=$(t);return(0,k.useEffect)(()=>{v&&y.current&&(v.disconnect(),h.current=!1,v.observe(y.current))},[y,v]),(0,k.useEffect)(()=>(i({type:u.RegisterDroppable,element:{id:a,key:n,disabled:r,node:y,rect:x,data:j}}),()=>i({type:u.UnregisterDroppable,key:n,id:a})),[a]),(0,k.useEffect)(()=>{r!==c.current.disabled&&(i({type:u.SetDroppableDisabled,id:a,key:n,disabled:r}),c.current.disabled=r)},[a,n,r,i]),{active:s,rect:x,isOver:(null==o?void 0:o.id)===a,node:y,over:o,setNodeRef:w}}({id:c,data:T,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:D,...x}}),{active:O,activatorEvent:I,activeNodeRect:L,attributes:P,setNodeRef:z,listeners:B,isDragging:U,over:F,setActivatorNodeRef:Y,transform:X}=function(e){let{id:t,data:r,disabled:a=!1,attributes:l}=e,n=H("Draggable"),{activators:s,activatorEvent:i,active:o,activeNodeRect:d,ariaDescribedById:c,draggableNodes:u,over:h}=(0,k.useContext)(tt),{role:x=td,roleDescription:f="draggable",tabIndex:g=0}=null!=l?l:{},b=(null==o?void 0:o.id)===t,m=(0,k.useContext)(b?ts:to),[p,v]=J(),[y,w]=J(),j=(0,k.useMemo)(()=>s.reduce((e,r)=>{let{eventName:a,handler:l}=r;return e[a]=e=>{l(e,t)},e},{}),[s,t]),N=$(r);return K(()=>(u.set(t,{id:t,key:n,node:p,activatorNode:y,data:N}),()=>{let e=u.get(t);e&&e.key===n&&u.delete(t)}),[u,t]),{active:o,activatorEvent:i,activeNodeRect:d,attributes:(0,k.useMemo)(()=>({role:x,tabIndex:g,"aria-disabled":a,"aria-pressed":!!b&&x===td||void 0,"aria-roledescription":f,"aria-describedby":c.draggable}),[a,x,g,b,f,c.draggable]),isDragging:b,listeners:a?void 0:j,node:p,over:h,setNodeRef:v,setActivatorNodeRef:w,transform:m}}({id:c,data:T,attributes:{...tC,...s},disabled:S.draggable}),_=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,k.useMemo)(()=>e=>{t.forEach(t=>t(e))},t)}(A,z),W=!!O,V=W&&!v&&tf(m)&&tf(w),q=!j&&U,G=q&&V?X:null,Q=V?null!=G?G:(null!=h?h:N)({rects:y,activeNodeRect:L,activeIndex:m,overIndex:w,index:C}):null,et=tf(m)&&tf(w)?d({id:c,items:g,activeIndex:m,overIndex:w}):C,er=null==O?void 0:O.id,ea=(0,k.useRef)({activeId:er,items:g,newIndex:et,containerId:b}),el=g!==ea.current.items,en=n({active:O,containerId:b,isDragging:U,isSorting:W,id:c,index:C,items:g,newIndex:ea.current.newIndex,previousItems:ea.current.items,previousContainerId:ea.current.containerId,transition:f,wasDragging:null!=ea.current.activeId}),es=function(e){let{disabled:t,index:r,node:a,rect:l}=e,[n,s]=(0,k.useState)(null),i=(0,k.useRef)(r);return K(()=>{if(!t&&r!==i.current&&a.current){let e=l.current;if(e){let t=ej(a.current,{ignoreTransform:!0}),r={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(r.x||r.y)&&s(r)}}r!==i.current&&(i.current=r)},[t,r,a,l]),(0,k.useEffect)(()=>{n&&s(null)},[n]),n}({disabled:!en,index:C,node:M,rect:E});return(0,k.useEffect)(()=>{W&&ea.current.newIndex!==et&&(ea.current.newIndex=et),b!==ea.current.containerId&&(ea.current.containerId=b),g!==ea.current.items&&(ea.current.items=g)},[W,et,b,g]),(0,k.useEffect)(()=>{if(er===ea.current.activeId)return;if(null!=er&&null==ea.current.activeId){ea.current.activeId=er;return}let e=setTimeout(()=>{ea.current.activeId=er},50);return()=>clearTimeout(e)},[er]),{active:O,activeIndex:m,attributes:P,data:T,rect:E,index:C,newIndex:et,items:g,isOver:R,isSorting:W,isDragging:U,listeners:B,node:M,overIndex:w,over:F,setNodeRef:_,setActivatorNodeRef:Y,setDroppableNodeRef:A,setDraggableNodeRef:z,transform:null!=es?es:Q,transition:es||el&&ea.current.newIndex===C?tS:(!q||Z(I))&&f&&(W||en)?ee.Transition.toString({...f,property:tN}):void 0}}({id:e.id}),p={transform:ee.Transform.toString(g),transition:b,zIndex:m?50:"auto",position:m?"relative":void 0},v=(0,N.getTotalActualSeconds)(e,t),y=Math.floor(v/60),j=v%60,S=`${y}åˆ†${j.toString().padStart(2,"0")}ç§’`,C=e.estimatedMinutes,T="",D="text-slate-500";if(null!=C){let e=y-C;0===e?T="Â±0":e>0?(T=`+${e}`,D="text-red-500 font-medium"):(T=`${e}`,D="text-emerald-600 font-medium")}let E=e.isRunning,M=(0,N.cn)("rounded-xl border p-3 sm:p-4 transition-all duration-200 flex flex-col gap-3 group relative",E?"border-indigo-500 bg-white dark:bg-black ring-4 ring-indigo-500/20 shadow-2xl scale-[1.05] md:scale-110 z-20 my-4":"border-slate-200 dark:border-[#2f3336] bg-white dark:bg-black hover:bg-white dark:hover:bg-black hover:shadow-md hover:border-indigo-200 dark:hover:border-[#536471]",m&&"shadow-xl ring-2 ring-indigo-500 opacity-80 cursor-grabbing bg-indigo-50 dark:bg-[#1d9bf0]/10");return(0,w.jsxs)("div",{ref:f,style:p,className:M,children:[(0,w.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-start justify-between pl-8 sm:pl-10 relative",children:[(0,w.jsx)("div",{...h,...x,className:"absolute left-1 top-4 p-2 text-slate-300 hover:text-indigo-500 cursor-grab active:cursor-grabbing touch-none z-10",title:"ãƒ‰ãƒ©ãƒƒã‚°ã—ã¦ä¸¦ã³æ›¿ãˆ",children:(0,w.jsx)(tR,{className:"w-5 h-5"})}),(0,w.jsxs)("div",{className:"flex-1 space-y-2 min-w-0 pl-1",children:[(0,w.jsxs)("div",{className:"flex items-start gap-2",children:[(0,w.jsx)("div",{className:"pt-0.5 shrink-0",children:(0,w.jsx)("span",{className:(0,N.cn)("inline-flex items-center justify-center rounded px-1.5 py-0.5 text-[10px] font-bold uppercase tracking-wider border",(e=>{switch(e){case"p0":return"bg-rose-50 text-rose-700 border-rose-200 dark:bg-transparent dark:text-rose-500 dark:border-rose-900/50";case"p1":return"bg-amber-50 text-amber-700 border-amber-200 dark:bg-transparent dark:text-amber-500 dark:border-amber-900/50";case"p2":return"bg-blue-50 text-blue-700 border-blue-200 dark:bg-transparent dark:text-blue-500 dark:border-blue-900/50";default:return""}})(e.priority)),children:N.PRIORITY_LABEL[e.priority]})}),(0,w.jsx)("p",{className:(0,N.cn)("text-base font-semibold leading-relaxed break-words text-slate-800 dark:text-[#e7e9ea]","done"===e.status&&"text-slate-400 dark:text-[#71767b] line-through decoration-slate-300 dark:decoration-[#2f3336]"),children:e.title})]}),(0,w.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,w.jsxs)("div",{className:"flex items-center gap-1.5 bg-slate-100/50 dark:bg-black rounded-md px-2 py-0.5 border border-transparent dark:border-[#2f3336] hover:border-slate-200 dark:hover:border-[#536471] transition-colors",children:[(0,w.jsx)("span",{className:"text-[10px] text-slate-500 dark:text-[#71767b]",children:"TAG"}),(0,w.jsxs)("select",{className:"text-[11px] bg-transparent border-none p-0 pr-4 focus:ring-0 text-slate-700 dark:text-[#e7e9ea] font-medium cursor-pointer",value:e.tag??"",onChange:t=>l(e.id,t.target.value),children:[(0,w.jsx)("option",{value:"",className:"dark:bg-black dark:text-[#e7e9ea]",children:"(æœªè¨­å®š)"}),r.map(e=>(0,w.jsx)("option",{value:e,className:"dark:bg-black dark:text-[#e7e9ea]",children:e},e))]})]}),(0,w.jsxs)("div",{className:"flex items-center gap-1.5 bg-slate-100/50 dark:bg-black rounded-md px-2 py-0.5 border border-transparent dark:border-[#2f3336] hover:border-slate-200 dark:hover:border-[#536471] transition-colors",children:[(0,w.jsx)("span",{className:"text-[10px] text-slate-500 dark:text-[#71767b]",children:"PRIORITY"}),(0,w.jsx)("select",{className:"text-[11px] bg-transparent border-none p-0 pr-4 focus:ring-0 text-slate-700 dark:text-[#e7e9ea] font-medium cursor-pointer",value:e.priority,onChange:t=>n(e.id,t.target.value),children:N.PRIORITY_ORDER.map(e=>(0,w.jsx)("option",{value:e,className:"dark:bg-black dark:text-[#e7e9ea]",children:e.toUpperCase()},e))})]}),(0,w.jsxs)("label",{className:"flex items-center gap-1.5 cursor-pointer bg-slate-100/50 dark:bg-black rounded-md px-2 py-0.5 hover:bg-indigo-50 dark:hover:bg-[#1d9bf0]/10 hover:border-indigo-100 border border-transparent dark:border-[#2f3336] transition-colors",children:[(0,w.jsx)("input",{type:"checkbox",className:"rounded border-slate-300 dark:border-[#536471] text-indigo-600 focus:ring-indigo-500 h-3 w-3 dark:bg-black",checked:e.isToday,onChange:()=>i(e.id)}),(0,w.jsx)("span",{className:(0,N.cn)("text-[11px] font-medium transition-colors",e.isToday?"text-indigo-600 dark:text-[#1d9bf0]":"text-slate-500 dark:text-[#71767b]"),children:"Today"})]})]})]}),(0,w.jsx)("div",{className:"flex sm:flex-col items-center sm:items-end gap-1 overflow-x-auto pb-1 sm:pb-0 scrollbar-hide",children:(0,w.jsx)("div",{className:"flex rounded-lg bg-slate-100/80 p-0.5 backdrop-blur-sm",children:N.STATUS_ORDER.map(t=>{let r=e.status===t;return(0,w.jsx)("button",{type:"button",onClick:()=>a(e.id,t),className:(0,N.cn)("px-2.5 py-1 text-[10px] font-medium rounded-md transition-all whitespace-nowrap",r?"bg-white dark:bg-[#1d9bf0] text-indigo-600 dark:text-white shadow-sm ring-1 ring-black/5 dark:ring-0":"text-slate-500 dark:text-[#71767b] hover:text-slate-700 dark:hover:text-[#e7e9ea]"),children:N.STATUS_LABEL[t]},t)})})})]}),E?(0,w.jsxs)("div",{className:"mt-2 flex flex-col items-center justify-center gap-3 py-4 bg-indigo-50/50 dark:bg-[#1d9bf0]/10 rounded-xl border border-indigo-100 dark:border-[#1d9bf0]/30 backdrop-blur-sm",children:[(0,w.jsxs)("div",{className:"flex flex-col items-center",children:[(0,w.jsx)("span",{className:"text-xs font-bold text-indigo-400 uppercase tracking-widest mb-1 animate-pulse",children:"RUNNING"}),(0,w.jsxs)("span",{className:"font-mono text-4xl md:text-5xl font-black text-indigo-600 tabular-nums tracking-tight drop-shadow-sm",children:[y,(0,w.jsx)("span",{className:"text-xl md:text-2xl text-indigo-400 font-bold ml-1",children:"m"}),j.toString().padStart(2,"0"),(0,w.jsx)("span",{className:"text-xl md:text-2xl text-indigo-400 font-bold ml-1",children:"s"})]})]}),(0,w.jsxs)("div",{className:"flex items-center gap-6 mt-2",children:[(0,w.jsxs)("div",{className:"flex items-center gap-2 text-xs text-slate-500 dark:text-[#71767b] bg-white/80 dark:bg-black px-3 py-1.5 rounded-full border border-slate-200 dark:border-[#2f3336]",children:[(0,w.jsx)("span",{children:"è¦‹ç©:"}),(0,w.jsx)("input",{type:"number",min:"0",className:"w-8 text-center font-bold text-slate-700 bg-transparent focus:outline-none border-b border-slate-300 focus:border-indigo-500 p-0",placeholder:"0",value:C??"",onChange:t=>s(e.id,t.target.value)}),(0,w.jsx)("span",{children:"åˆ†"}),null!=C&&(0,w.jsx)("span",{className:(0,N.cn)("ml-1 font-bold",D),children:T})]}),(0,w.jsxs)("button",{onClick:()=>d(e.id),className:"flex items-center gap-2 bg-gradient-to-r from-red-500 to-pink-600 hover:from-red-600 hover:to-pink-700 text-white px-8 py-2.5 rounded-full text-sm font-bold shadow-lg shadow-red-500/30 transition-all hover:scale-105 active:scale-95 animate-pulse",children:[(0,w.jsx)("span",{className:"w-2.5 h-2.5 rounded-full bg-white block"}),"STOP TIMER"]})]})]}):(0,w.jsxs)("div",{className:"mt-1 rounded-lg px-3 py-2 flex flex-col sm:flex-row sm:items-center justify-between gap-3 bg-slate-50/50 dark:bg-black border border-slate-100 dark:border-[#2f3336] hover:bg-slate-50 dark:hover:bg-[#16181c] transition-colors",children:[(0,w.jsxs)("div",{className:"flex items-center gap-4 text-xs pl-7 sm:pl-0",children:[(0,w.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,w.jsx)("span",{className:"text-slate-500",children:"è¦‹ç©"}),(0,w.jsxs)("div",{className:"relative",children:[(0,w.jsx)("input",{min:"0",className:"w-14 rounded border border-slate-200/60 dark:border-[#2f3336] bg-white dark:bg-black px-1.5 py-0.5 text-right font-medium focus:outline-none focus:border-indigo-500 dark:focus:border-[#1d9bf0] focus:ring-1 focus:ring-indigo-500 dark:focus:ring-[#1d9bf0] text-slate-700 dark:text-[#e7e9ea]",placeholder:"0",value:C??"",onChange:t=>s(e.id,t.target.value)}),(0,w.jsx)("span",{className:"ml-1 text-slate-400",children:"åˆ†"})]})]}),null!=C&&(0,w.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,w.jsx)("span",{className:"text-slate-400",children:"å·®åˆ†"}),(0,w.jsx)("span",{className:D,children:T})]})]}),(0,w.jsxs)("div",{className:"flex items-center justify-between sm:justify-end gap-4 flex-1",children:[(0,w.jsxs)("div",{className:"flex items-baseline gap-1.5",children:[(0,w.jsx)("span",{className:"text-xs text-slate-500",children:"å®Ÿç¸¾"}),(0,w.jsx)("span",{className:"font-mono text-base font-bold text-slate-700 tabular-nums",children:S})]}),(0,w.jsxs)("div",{className:"flex items-center gap-2",children:[(0,w.jsx)("a",{href:`/focus?reportId=${new URL(window.location.href).pathname.split("/").pop()}&taskId=${e.id}`,className:"flex items-center gap-1.5 bg-indigo-500 hover:bg-indigo-600 text-white px-2 py-1.5 rounded-md text-xs font-bold shadow-sm transition-all hover:scale-105 active:scale-95",title:"ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãƒ¢ãƒ¼ãƒ‰ã§é›†ä¸­",children:(0,w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:(0,w.jsx)("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm14.024-.983a1.125 1.125 0 0 1 0 1.966l-5.603 3.113A1.125 1.125 0 0 1 9 15.113V8.887c0-.857.921-1.4 1.671-.983l5.603 3.113Z",clipRule:"evenodd"})})}),(0,w.jsxs)("button",{onClick:()=>o(e.id),className:"flex items-center gap-1.5 bg-slate-900 hover:bg-slate-700 text-white px-3 py-1.5 rounded-md text-xs font-bold shadow-sm transition-all hover:scale-105 active:scale-95",children:[(0,w.jsx)("span",{className:"w-0 h-0 border-l-[6px] border-l-white border-y-[4px] border-y-transparent block ml-0.5"}),"START"]}),(0,w.jsx)("button",{onClick:()=>c(e.id),className:"p-1.5 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors ml-1",title:"å‰Šé™¤",children:(0,w.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,w.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]})]})}function tO({tasks:e,now:t,tags:r,showTodayOnly:a,setShowTodayOnly:l,showCompleted:n,setShowCompleted:s,tagFilter:i,setTagFilter:o,actions:d}){let c=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,k.useMemo)(()=>[...t].filter(e=>null!=e),[...t])}(ec(eH,{activationConstraint:{distance:8}}),ec(e$,{coordinateGetter:tE})),u=(0,k.useMemo)(()=>e.filter(e=>(!a||!!e.isToday)&&(!!n||"done"!==e.status)&&("all"===i||e.tag===i)),[e,a,n,i]);return 0===e.length?(0,w.jsxs)("div",{className:"rounded-xl border border-dashed border-slate-300 dark:border-[#2f3336] bg-slate-50/50 dark:bg-black/50 p-8 text-center backdrop-blur-sm",children:[(0,w.jsx)("p",{className:"text-slate-500 dark:text-[#71767b] font-medium",children:"ã¾ã ã‚¿ã‚¹ã‚¯ãŒã‚ã‚Šã¾ã›ã‚“"}),(0,w.jsx)("p",{className:"text-sm text-slate-400 dark:text-[#536471] mt-1",children:"ä¸Šã®ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰ã€ä»Šé€±ã‚„ã‚‹ã“ã¨ã‚’è¿½åŠ ã—ã¾ã—ã‚‡ã†ã€‚"})]}):(0,w.jsxs)("section",{className:"space-y-4",children:[(0,w.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 sticky top-0 z-10 bg-slate-50/80 dark:bg-black/80 backdrop-blur-md py-3 px-1 border-b border-slate-200/50 dark:border-[#2f3336] transition-all rounded-b-lg -mx-1",children:[(0,w.jsx)("div",{className:"flex items-center gap-2 px-2",children:(0,w.jsxs)("h2",{className:"text-lg font-bold text-slate-800 dark:text-[#e7e9ea] flex items-center gap-2",children:["ðŸ“‹ ã‚¿ã‚¹ã‚¯ä¸€è¦§",(0,w.jsxs)("span",{className:"text-xs font-normal text-slate-500 dark:text-[#71767b] bg-slate-200/50 dark:bg-[#16181c] px-2 py-0.5 rounded-full",children:[u.length," / ",e.length]})]})}),(0,w.jsxs)("div",{className:"flex items-center gap-2 overflow-x-auto pb-1 sm:pb-0 scrollbar-hide px-2",children:[(0,w.jsxs)("select",{className:"text-xs border border-slate-200 dark:border-[#2f3336] rounded-lg px-2 py-1.5 bg-white/80 dark:bg-black text-slate-700 dark:text-[#e7e9ea] hover:border-indigo-300 cursor-pointer focus:outline-none focus:border-indigo-500 shadow-sm",value:i,onChange:e=>o(e.target.value),children:[(0,w.jsx)("option",{value:"all",children:"ã™ã¹ã¦ã®ã‚¿ã‚°"}),r.map(e=>(0,w.jsx)("option",{value:e,children:e},e))]}),(0,w.jsx)("button",{onClick:()=>l(!a),className:`text-xs px-3 py-1.5 rounded-lg border transition-all whitespace-nowrap shadow-sm ${a?"bg-indigo-50 border-indigo-200 text-indigo-700 font-bold dark:bg-[#1d9bf0]/10 dark:border-[#1d9bf0]/30 dark:text-[#1d9bf0]":"bg-white/80 border-slate-200 text-slate-600 hover:bg-slate-50 dark:bg-black dark:border-[#2f3336] dark:text-[#71767b] dark:hover:bg-[#16181c]"}`,children:"Today"}),(0,w.jsx)("button",{onClick:()=>s(!n),className:`text-xs px-3 py-1.5 rounded-lg border transition-all whitespace-nowrap shadow-sm ${n?"bg-slate-100 border-slate-200 text-slate-700 dark:bg-[#16181c] dark:border-[#2f3336] dark:text-[#e7e9ea]":"bg-white/80 border-slate-200 text-slate-400 hover:text-slate-600 dark:bg-black dark:border-[#2f3336] dark:text-[#71767b] dark:hover:text-[#e7e9ea]"}`,children:n?"å®Œäº†ã‚’éš ã™":"å®Œäº†ã‚’è¡¨ç¤º"})]})]}),0===u.length?(0,w.jsxs)("div",{className:"py-12 text-center border rounded-xl bg-white/50 dark:bg-black/50 border-slate-200 dark:border-[#2f3336] backdrop-blur-sm",children:[(0,w.jsx)("p",{className:"text-slate-400 dark:text-[#71767b]",children:"è¡¨ç¤ºã™ã‚‹ã‚¿ã‚¹ã‚¯ãŒã‚ã‚Šã¾ã›ã‚“"}),(0,w.jsx)("p",{className:"text-xs text-slate-400 dark:text-[#536471] mt-1",children:"ãƒ•ã‚£ãƒ«ã‚¿æ¡ä»¶ã‚’å¤‰æ›´ã—ã¦ã¿ã¦ãã ã•ã„"})]}):(0,w.jsx)(ti,{sensors:c,collisionDetection:ep,onDragEnd:function(t){let{active:r,over:a}=t;if(a&&r.id!==a.id){let t=e.findIndex(e=>e.id===r.id),l=e.findIndex(e=>e.id===a.id);if(-1!==t&&-1!==l){let r=tx(e,t,l);d.onReorder?.(r)}}},children:(0,w.jsx)(ty,{items:u.map(e=>e.id),strategy:tm,children:(0,w.jsx)("div",{className:"flex flex-col gap-3",children:u.map(e=>(0,w.jsx)(tA,{task:e,now:t,tags:r,...d},e.id))})})})]})}function tI({tasks:e,now:t}){let r=(0,k.useMemo)(()=>{let r=0,a=0,l=0,n=0,s=0;for(let i of e){let e=(0,N.getTotalActualSeconds)(i,t);l+=e,null!=i.estimatedMinutes&&(r+=i.estimatedMinutes,a++,n+=Math.floor(e/60)-i.estimatedMinutes,s++)}return{totalEst:r,estCount:a,totalActSec:l,avgDiff:s>0?n/s:null}},[e,t]),a=(0,k.useMemo)(()=>{let r={};for(let a of(N.STATUS_ORDER.forEach(e=>r[e]={count:0,sec:0}),e))r[a.status]&&(r[a.status].count++,r[a.status].sec+=(0,N.getTotalActualSeconds)(a,t));return r},[e,t]),l=(0,k.useMemo)(()=>(0,N.pickTopTagsBySeconds)(e,t,5),[e,t]);if((0,N.formatAvgDiff)(r.avgDiff),0===e.length)return null;let n=(0,k.useMemo)(()=>{let l=e.length,n=a.done.count;return{totalCount:l,doneCount:n,totalActualSeconds:r.totalActSec,topTags:(0,N.pickTopTagsBySeconds)(e,t,5)}},[e,t,r,a]),s=(0,N.formatAvgDiff)(r.avgDiff);return(0,w.jsxs)("div",{className:"space-y-6 mt-6 pt-6 border-t border-slate-200",children:[(0,w.jsxs)("section",{className:"space-y-6",children:[(0,w.jsxs)("div",{className:"flex items-center gap-2",children:[(0,w.jsx)("h2",{className:"text-lg font-bold text-slate-800 dark:text-[#e7e9ea]",children:"ðŸ“Š ä»Šé€±ã®ã‚µãƒžãƒªãƒ¼"}),(0,w.jsx)("span",{className:"text-xs text-slate-500 dark:text-[#71767b] bg-slate-100 dark:bg-[#16181c] px-2 py-0.5 rounded-full",children:"Real-time"})]}),(0,w.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,w.jsxs)("div",{className:"bg-white dark:bg-black rounded-xl border border-slate-200 dark:border-[#2f3336] p-5 shadow-sm space-y-4",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsx)("h3",{className:"text-sm font-bold text-slate-600 dark:text-[#e7e9ea]",children:"ã‚¿ã‚¹ã‚¯æ¶ˆåŒ–çŠ¶æ³"}),(0,w.jsxs)("span",{className:"text-2xl font-black text-slate-800 dark:text-[#e7e9ea]",children:[n.doneCount,(0,w.jsxs)("span",{className:"text-sm text-slate-400 dark:text-[#71767b] font-medium ml-1",children:["/ ",n.totalCount]})]})]}),(0,w.jsxs)("div",{className:"space-y-2",children:[(0,w.jsx)("div",{className:"h-3 w-full bg-slate-100 dark:bg-[#16181c] rounded-full overflow-hidden",children:(0,w.jsx)("div",{className:"h-full bg-indigo-500 dark:bg-[#1d9bf0] rounded-full transition-all duration-1000 ease-out relative overflow-hidden",style:{width:`${n.totalCount>0?n.doneCount/n.totalCount*100:0}%`},children:(0,w.jsx)("div",{className:"absolute inset-0 bg-white/20 animate-[shimmer_2s_infinite]"})})}),(0,w.jsxs)("div",{className:"flex justify-between text-xs text-slate-500 dark:text-[#71767b]",children:[(0,w.jsxs)("span",{children:[n.totalCount>0?Math.round(n.doneCount/n.totalCount*100):0,"% Complete"]}),(0,w.jsxs)("span",{children:["æ®‹ã‚Š ",n.totalCount-n.doneCount,"ä»¶"]})]})]}),(0,w.jsxs)("div",{className:"pt-4 border-t border-slate-100 dark:border-[#2f3336] grid grid-cols-2 gap-4",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("p",{className:"text-xs text-slate-400 dark:text-[#71767b]",children:"åˆè¨ˆç¨¼åƒæ™‚é–“"}),(0,w.jsx)("p",{className:"text-lg font-bold text-slate-700 dark:text-[#e7e9ea] font-mono",children:(0,N.formatHMFromSecondsSimple)(n.totalActualSeconds)})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("p",{className:"text-xs text-slate-400 dark:text-[#71767b]",children:"å¹³å‡è¦‹ç©å·®åˆ†"}),(0,w.jsx)("p",{className:(0,N.cn)("text-lg font-bold font-mono",s.className),children:s.label})]})]})]}),(0,w.jsxs)("div",{className:"bg-white dark:bg-black rounded-xl border border-slate-200 dark:border-[#2f3336] p-5 shadow-sm space-y-4",children:[(0,w.jsx)("h3",{className:"text-sm font-bold text-slate-600 dark:text-[#e7e9ea]",children:"ã‚¿ã‚°åˆ¥æ™‚é–“ã®ä½¿ã„æ–¹"}),0===n.topTags.length?(0,w.jsxs)("div",{className:"h-32 flex items-center justify-center text-slate-400 dark:text-[#71767b] text-xs text-center border-2 border-dashed border-slate-100 dark:border-[#2f3336] rounded-lg",children:["ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“",(0,w.jsx)("br",{}),"ã‚¿ã‚¤ãƒžãƒ¼ã‚’ä½¿ã£ã¦è¨ˆæ¸¬ã—ã¾ã—ã‚‡ã†"]}):(0,w.jsx)("div",{className:"space-y-3",children:n.topTags.slice(0,4).map((e,t)=>{let r=Math.round(e.sec/Math.max(n.totalActualSeconds,1)*100);return(0,w.jsxs)("div",{className:"space-y-1",children:[(0,w.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,w.jsx)("span",{className:"font-medium text-slate-700 dark:text-[#e7e9ea]",children:e.tag}),(0,w.jsxs)("span",{className:"text-slate-500 dark:text-[#71767b]",children:[(0,N.formatHMFromSecondsSimple)(e.sec)," (",r,"%)"]})]}),(0,w.jsx)("div",{className:"h-2 w-full bg-slate-50 dark:bg-[#16181c] rounded-full overflow-hidden",children:(0,w.jsx)("div",{className:(0,N.cn)("h-full rounded-full opacity-80",(0,N.getTagColor)(e.tag).replace("bg-","bg-").replace("text-","").replace("border-","")),style:{width:`${r}%`,backgroundColor:"currentColor",color:"inherit"},children:(0,w.jsx)("div",{className:(0,N.cn)("w-full h-full",(0,N.getTagColor)(e.tag).split(" ")[0].replace("bg-","bg-"))})})})]},e.tag)})})]})]})]}),(0,w.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,w.jsxs)("div",{className:"rounded-xl border border-slate-200 dark:border-[#2f3336] bg-white dark:bg-black p-4",children:[(0,w.jsx)("h3",{className:"text-sm font-bold text-slate-700 dark:text-[#e7e9ea] mb-3",children:"ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹åˆ¥"}),(0,w.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,w.jsx)("thead",{className:"text-xs text-slate-400 dark:text-[#71767b] border-b dark:border-[#2f3336]",children:(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{className:"pb-2 font-medium",children:"Status"}),(0,w.jsx)("th",{className:"pb-2 font-medium",children:"Count"}),(0,w.jsx)("th",{className:"pb-2 font-medium",children:"Time"})]})}),(0,w.jsx)("tbody",{className:"divide-y divide-slate-50 dark:divide-[#16181c]",children:N.STATUS_ORDER.map(e=>(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"py-2 text-slate-700 dark:text-[#e7e9ea]",children:N.STATUS_LABEL[e]}),(0,w.jsx)("td",{className:"py-2 text-slate-600 dark:text-[#71767b] font-medium",children:a[e].count}),(0,w.jsx)("td",{className:"py-2 text-slate-500 dark:text-[#71767b] tabular-nums",children:a[e].sec>0?(0,N.formatHMFromSecondsSimple)(a[e].sec):"â€”"})]},e))})]})]}),(0,w.jsxs)("div",{className:"rounded-xl border border-slate-200 dark:border-[#2f3336] bg-white dark:bg-black p-4",children:[(0,w.jsx)("h3",{className:"text-sm font-bold text-slate-700 dark:text-[#e7e9ea] mb-3",children:"ã‚¿ã‚°åˆ¥ï¼ˆTop 5ï¼‰"}),0===l.length?(0,w.jsx)("div",{className:"h-24 flex items-center justify-center text-xs text-slate-400 dark:text-[#71767b]",children:"å®Ÿç¸¾ãƒ‡ãƒ¼ã‚¿ãªã—"}):(0,w.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,w.jsx)("thead",{className:"text-xs text-slate-400 dark:text-[#71767b] border-b dark:border-[#2f3336]",children:(0,w.jsxs)("tr",{children:[(0,w.jsx)("th",{className:"pb-2 font-medium",children:"Tag"}),(0,w.jsx)("th",{className:"pb-2 font-medium",children:"Time"}),(0,w.jsx)("th",{className:"pb-2 font-medium",children:"Share"})]})}),(0,w.jsx)("tbody",{className:"divide-y divide-slate-50 dark:divide-[#16181c]",children:l.map(e=>{let t=r.totalActSec>0?Math.round(e.sec/r.totalActSec*100):0;return(0,w.jsxs)("tr",{children:[(0,w.jsx)("td",{className:"py-2 text-slate-700 dark:text-[#e7e9ea]",children:e.tag}),(0,w.jsx)("td",{className:"py-2 text-slate-600 dark:text-[#71767b] tabular-nums",children:(0,N.formatHMFromSecondsSimple)(e.sec)}),(0,w.jsx)("td",{className:"py-2",children:(0,w.jsxs)("div",{className:"flex items-center gap-2",children:[(0,w.jsx)("div",{className:"w-12 h-1.5 bg-slate-100 dark:bg-[#16181c] rounded-full overflow-hidden",children:(0,w.jsx)("div",{className:"h-full bg-indigo-500",style:{width:`${t}%`}})}),(0,w.jsxs)("span",{className:"text-xs text-slate-400 dark:text-[#71767b] tabular-nums",children:[t,"%"]})]})})]},e.tag)})})]})]})]})]})}let tL="## ðŸŽ¯ ä»Šé€±ã®ç›®æ¨™ãƒ»ãƒ†ãƒ¼ãƒž\n\n\n## ðŸ™Œ KPT - Keep (è‰¯ã‹ã£ãŸã“ã¨ãƒ»ç¶šã‘ãŸã„ã“ã¨)\n\n\n## ðŸ’¦ KPT - Problem (å›°ã£ãŸã“ã¨ãƒ»èª²é¡Œ)\n\n\n## ðŸš€ KPT - Try (æ¬¡é€±ã‚„ã‚‹ã“ã¨ãƒ»æ”¹å–„ç­–)\n\n\n## ðŸ“ ãã®ä»–ãƒ»ãƒ•ãƒªãƒ¼ãƒ¡ãƒ¢\n";function tP({weeklyNote:e,setWeeklyNote:t,noteSavedMessage:r,tasks:a,now:l}){return(0,w.jsxs)("section",{className:"space-y-3 pt-6 border-t border-slate-200",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("h2",{className:"text-lg font-bold text-slate-800 dark:text-slate-100",children:"ðŸ“ é€±æ¬¡ãµã‚Šã‹ãˆã‚Šãƒ¡ãƒ¢"}),(0,w.jsx)("p",{className:"text-xs text-slate-500",children:"å…¥åŠ›å†…å®¹ã¯è‡ªå‹•ä¿å­˜ã•ã‚Œã¾ã™ã€‚"})]}),(0,w.jsxs)("div",{className:"flex items-center gap-2",children:[(0,w.jsx)("button",{type:"button",onClick:()=>{if(""===e.trim())t(tL);else{let r=e.endsWith("\n")?"\n\n":"\n\n\n";t(e=>e+r+tL)}},className:"text-xs font-medium text-slate-600 hover:bg-slate-100 border border-slate-300 px-3 py-1.5 rounded-lg transition-colors",children:"ãƒ†ãƒ³ãƒ—ãƒ¬æŒ¿å…¥"}),(0,w.jsx)("button",{type:"button",onClick:()=>{let e=(0,N.generateReflectionText)(a,l,5);t(t=>{if(!t.trim())return e+"\n";let r=(t.endsWith("\n"),"\n\n");return t+r+e+"\n"})},disabled:0===a.length,className:"text-xs font-medium text-indigo-700 bg-indigo-50 hover:bg-indigo-100 border border-indigo-200 px-3 py-1.5 rounded-lg transition-colors disabled:opacity-50",children:"âœ¨ è‡ªå‹•ç”Ÿæˆã‚’è¿½è¨˜"})]})]}),(0,w.jsxs)("div",{className:"relative",children:[(0,w.jsx)("textarea",{className:"w-full min-h-[400px] rounded-xl border border-slate-300 bg-white dark:bg-black dark:border-[#2f3336] dark:text-[#e7e9ea] px-4 py-3 text-sm leading-relaxed text-slate-800 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 resize-y",value:e,onChange:e=>t(e.target.value),placeholder:"ã“ã“ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€ä»Šé€±ã®æŒ¯ã‚Šè¿”ã‚Šã‚„ãƒ¡ãƒ¢ã‚’è‡ªç”±ã«è¨˜è¿°ã—ã¦ãã ã•ã„..."}),(0,w.jsx)("div",{className:"absolute bottom-3 right-3",children:r&&(0,w.jsx)("span",{className:"text-xs font-medium text-emerald-600 bg-white/80 px-2 py-1 rounded shadow-sm",children:r})})]})]})}function tz({id:e,report:t,tasks:r,now:a,weeklyNote:l,onRestore:n,onDeleteAllTasks:s}){let[i,o]=(0,k.useState)(!1),[d,c]=(0,k.useState)(""),[u,h]=(0,k.useState)(""),[x,f]=(0,k.useState)("idle"),g=async e=>{let a="slack"===e?(0,N.generateSlackText)(t,r,l):(0,N.generateNotionText)(t,r,l);try{await navigator.clipboard.writeText(a),f(e),setTimeout(()=>f("idle"),2e3)}catch(e){console.error("Failed to copy",e),alert("ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ")}},b=k.default.useMemo(()=>(0,N.generateCsvText)(r,a),[r,a]),m=async()=>{if(b)try{await navigator.clipboard.writeText(b),o(!0),setTimeout(()=>o(!1),2e3)}catch{alert("ã‚³ãƒ”ãƒ¼ã«å¤±æ•—ã—ã¾ã—ãŸ")}},p=async()=>{let t=JSON.stringify({version:1,reportId:e,exportedAt:new Date().toISOString(),tasks:r,weeklyNote:l},null,2);c(t);try{await navigator.clipboard.writeText(t),h("JSONã‚’ä½œæˆã—ã¦ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ")}catch{h("JSONã‚’ä½œæˆã—ã¾ã—ãŸï¼ˆã‚³ãƒ”ãƒ¼å¤±æ•—ï¼‰")}};return(0,w.jsxs)("section",{className:"space-y-8 pt-8 mt-4 border-t border-slate-200 pb-20",children:[(0,w.jsxs)("div",{className:"space-y-2",children:[(0,w.jsxs)("h2",{className:"text-sm font-bold text-slate-800 dark:text-[#e7e9ea] flex items-center gap-2",children:["ðŸ“‹ CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ",(0,w.jsx)("span",{className:"text-xs font-normal text-slate-500 bg-slate-100 dark:bg-[#16181c] dark:text-[#71767b] px-2 py-0.5 rounded",children:"ã‚³ãƒ”ãƒšç”¨"})]}),(0,w.jsxs)("div",{className:"flex gap-2",children:[(0,w.jsx)("textarea",{className:"flex-1 h-24 text-[11px] font-mono border rounded-lg p-2 bg-slate-50 dark:bg-black dark:border-[#2f3336] text-slate-600 dark:text-[#71767b] focus:outline-none",readOnly:!0,value:b,placeholder:"ã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ ã™ã‚‹ã¨CSVãŒç”Ÿæˆã•ã‚Œã¾ã™"}),(0,w.jsx)("button",{onClick:m,className:"self-start px-4 py-2 bg-white dark:bg-black border border-slate-300 dark:border-[#2f3336] text-slate-700 dark:text-[#e7e9ea] text-xs font-medium rounded-lg hover:bg-slate-50 dark:hover:bg-[#16181c] active:bg-slate-100 transition-colors",children:i?"ã‚³ãƒ”ãƒ¼æ¸ˆ":"ã‚³ãƒ”ãƒ¼"})]})]}),(0,w.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 bg-white/50 dark:bg-black/50 p-4 rounded-xl border border-slate-100 dark:border-[#2f3336] backdrop-blur-sm",children:[(0,w.jsxs)("div",{className:"flex items-center gap-2",children:[(0,w.jsx)("button",{onClick:()=>g("slack"),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-white dark:bg-black border border-slate-200 dark:border-[#2f3336] text-slate-600 dark:text-[#e7e9ea] text-sm font-bold hovering-scale shadow-sm hover:border-[#4A154B] hover:text-[#4A154B] transition-colors",children:"slack"===x?(0,w.jsxs)("span",{className:"text-emerald-600 flex items-center gap-1",children:[(0,w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:(0,w.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"COPIED"]}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:(0,w.jsx)("path",{d:"M5.042 15.165a2.528 2.528 0 0 1-2.52 2.523A2.528 2.528 0 0 1 0 15.165a2.527 2.527 0 0 1 2.522-2.52h2.52v2.52zM6.313 15.165a2.527 2.527 0 0 1 2.521-2.52 2.527 2.527 0 0 1 2.521 2.52v6.313A2.528 2.528 0 0 1 8.834 24a2.528 2.528 0 0 1-2.521-2.52v-6.315zm8.853-8.887a2.528 2.528 0 0 1 2.521-2.521A2.528 2.528 0 0 1 20.208 6.278a2.528 2.528 0 0 1-2.52 2.52h-2.522V6.278zm-1.26 0a2.528 2.528 0 0 1-2.521 2.521 2.527 2.527 0 0 1-2.52-2.521V0a2.528 2.528 0 0 1 2.52 2.521v6.313zM6.313 6.313a2.528 2.528 0 0 1-2.521 2.521 2.528 2.528 0 0 1-2.52 0 2.528 2.528 0 0 1 2.52-2.52H6.313v2.52zm0 2.52h6.313a2.528 2.528 0 0 1 2.521 2.521 2.528 2.528 0 0 1-2.521 2.521H6.313A2.528 2.528 0 0 1 3.792 11.374a2.528 2.528 0 0 1 2.521-2.541zM20.208 17.688a2.528 2.528 0 0 1-2.52 2.52h-6.313a2.528 2.528 0 0 1-2.521-2.52 2.528 2.528 0 0 1 2.521-2.521h6.313a2.528 2.528 0 0 1 2.52 2.521z"})}),"Slack Copy"]})}),(0,w.jsx)("button",{onClick:()=>g("notion"),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-white dark:bg-black border border-slate-200 dark:border-[#2f3336] text-slate-600 dark:text-[#e7e9ea] text-sm font-bold hovering-scale shadow-sm hover:border-slate-800 dark:hover:border-[#e7e9ea] hover:text-slate-800 dark:hover:text-white transition-colors",children:"notion"===x?(0,w.jsxs)("span",{className:"text-emerald-600 flex items-center gap-1",children:[(0,w.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:(0,w.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"COPIED"]}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:(0,w.jsx)("path",{d:"M4.459 4.208c.746-3.167 3.226-4.208 7.426-4.208 4.2 0 6.679 1.041 7.426 4.208.157.665.23 1.636.23 2.929v10.709c0 3.385-1.936 6.154-7.656 6.154-5.721 0-7.656-2.769-7.656-6.154V7.137c0-1.293.073-2.264.23-2.929zm12.35 2.951c.148 0 .27-.119.27-.272a27.18 27.18 0 0 0-.175-3.074c-.234-2.029-2.03-2.7-4.998-2.7-2.969 0-4.764.671-4.998 2.7-.091.772-.15 1.794-.175 3.074a.273.273 0 0 0 .27.272h9.807z"})}),"Notion Copy"]})})]}),(0,w.jsx)("div",{className:"flex gap-2",children:(0,w.jsx)("button",{onClick:()=>{confirm("å…¨ã¦ã®ã‚¿ã‚¹ã‚¯ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚")&&s()},className:"flex items-center gap-2 px-4 py-2 rounded-lg text-rose-500 hover:bg-rose-50 hover:text-rose-600 transition-colors text-xs font-bold",children:"ðŸ—‘ï¸ å…¨ã‚¿ã‚¹ã‚¯å‰Šé™¤"})})]}),(0,w.jsxs)("div",{className:"space-y-2",children:[(0,w.jsx)("h2",{className:"text-sm font-bold text-slate-800 dark:text-[#e7e9ea] flex items-center gap-2",children:"ðŸ“¦ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ— / å¾©å…ƒ"}),(0,w.jsx)("p",{className:"text-xs text-slate-500 dark:text-[#71767b]",children:"ã“ã®é€±å ±ãƒ‡ãƒ¼ã‚¿ã‚’JSONãƒ†ã‚­ã‚¹ãƒˆã¨ã—ã¦ä¿å­˜ãƒ»å¾©å…ƒã§ãã¾ã™ã€‚"}),(0,w.jsxs)("div",{className:"bg-slate-50 dark:bg-black p-3 rounded-xl border border-slate-200 dark:border-[#2f3336]",children:[(0,w.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,w.jsx)("button",{onClick:p,className:"text-xs bg-slate-800 dark:bg-[#16181c] text-white dark:text-[#e7e9ea] px-3 py-1.5 rounded-md hover:bg-slate-700 dark:hover:bg-[#2f3336] border border-transparent dark:border-[#2f3336]",children:"ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆï¼ˆã‚³ãƒ”ãƒ¼ï¼‰"}),(0,w.jsx)("button",{onClick:()=>{if(d.trim())try{let e=JSON.parse(d);if(!e||!Array.isArray(e.tasks))throw Error("Invalid format");confirm("ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã®JSONå†…å®¹ã§ã‚¿ã‚¹ã‚¯ã¨ãƒ¡ãƒ¢ã‚’ä¸Šæ›¸ãã—ã¦è‰¯ã„ã§ã™ã‹ï¼Ÿ")&&(n(e.tasks,e.weeklyNote||""),h("å¾©å…ƒã—ã¾ã—ãŸ"))}catch{h("JSONå½¢å¼ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“")}},className:"text-xs bg-white dark:bg-black border border-slate-300 dark:border-[#2f3336] text-slate-700 dark:text-[#e7e9ea] px-3 py-1.5 rounded-md hover:bg-slate-50 dark:hover:bg-[#16181c]",children:"JSONã‹ã‚‰å¾©å…ƒï¼ˆImportï¼‰"}),(0,w.jsx)("span",{className:"text-xs text-emerald-600 dark:text-emerald-500 flex items-center",children:u})]}),(0,w.jsx)("textarea",{className:"w-full h-24 text-[11px] font-mono border border-slate-200 dark:border-[#2f3336] bg-white dark:bg-black text-slate-700 dark:text-[#71767b] rounded-lg p-2 focus:outline-none focus:border-indigo-500",value:d,onChange:e=>c(e.target.value),placeholder:"ã“ã“ã«JSONãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚å¾©å…ƒã™ã‚‹å ´åˆã¯ã€ä¿å­˜ã—ã¦ãŠã„ãŸJSONã‚’ã“ã“ã«è²¼ã‚Šä»˜ã‘ã¦ã€ŒImportã€ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚"})]})]})]})}var tB=e.i(44388),tU=e.i(46932),tF=e.i(88653);function tK({show:e,oldLevel:t,newLevel:r,rank:a,onClose:l}){return(0,w.jsx)(tF.AnimatePresence,{children:e&&(0,w.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,w.jsx)(tU.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:l,className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),(0,w.jsxs)(tU.motion.div,{initial:{scale:.8,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"relative z-10 w-full max-w-sm rounded-3xl bg-white/90 dark:bg-black/90 backdrop-blur-xl border border-white/50 dark:border-[#2f3336] shadow-2xl overflow-hidden p-8 text-center",children:[(0,w.jsx)("div",{className:`absolute -top-20 -left-20 w-60 h-60 rounded-full opacity-20 blur-3xl ${a.color.replace("text-","bg-")}`}),(0,w.jsx)("div",{className:`absolute -bottom-20 -right-20 w-60 h-60 rounded-full opacity-20 blur-3xl ${a.color.replace("text-","bg-")}`}),(0,w.jsx)(tU.motion.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"text-4xl mb-4",children:"ðŸŽ‰"}),(0,w.jsx)(tU.motion.h2,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3,type:"spring"},className:"text-3xl font-black italic tracking-tighter text-transparent bg-clip-text bg-gradient-to-br from-indigo-600 to-purple-600 mb-2",children:"LEVEL UP!"}),(0,w.jsxs)("div",{className:"flex justify-center items-baseline gap-4 mb-6",children:[(0,w.jsxs)("span",{className:"text-xl font-bold text-slate-400",children:["Lv.",t]}),(0,w.jsx)("span",{className:"text-2xl text-slate-300",children:"â†’"}),(0,w.jsxs)("span",{className:"text-4xl font-black text-slate-800",children:["Lv.",r]})]}),(0,w.jsxs)("div",{className:"mb-8",children:[(0,w.jsx)("div",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-1",children:"Current Rank"}),(0,w.jsx)("div",{className:`text-lg font-bold ${a.color}`,children:a.name})]}),(0,w.jsx)("button",{onClick:l,className:"w-full py-3 px-6 rounded-xl bg-slate-900 dark:bg-[#e7e9ea] text-white dark:text-black font-bold shadow-lg hover:scale-105 active:scale-95 transition-all",children:"Awesome!"})]})]})})}var tY=e.i(18315);function t$(){let e=(0,j.useParams)(),t=Array.isArray(e.id)?e.id[0]:e.id;(0,j.useRouter)();let[r,a]=(0,k.useState)(!1),[l,n]=(0,k.useState)([]),[s,i]=(0,k.useState)([]),[o,d]=(0,k.useState)(void 0),c=k.default.useRef(void 0),[u,h]=(0,k.useState)(!1),[x,f]=(0,k.useState)(null),[g,b]=(0,k.useState)(void 0);(0,k.useEffect)(()=>{if(!r||0===l.length)return;let e=Date.now(),a=[];for(let r of l)r.id===t?a.push(...s):a.push(...(0,N.loadTasks)(r.id,e));let n=(0,tB.calculateTotalXP)(a),i=(0,tB.getLevelInfo)(n);void 0!==c.current&&i.level>c.current&&(f({old:c.current,new:i.level}),h(!0)),c.current=i.level,d(i)},[s,l,r,t]);let m=`weekly-report-note-${t}`,[p,v]=(0,k.useState)(""),[y,S]=(0,k.useState)(""),[C,T]=(0,k.useState)("all"),[D,M]=(0,k.useState)(!1),[A,O]=(0,k.useState)(!0),[I,L]=(0,k.useState)(Date.now()),[P,z]=(0,k.useState)("");(0,k.useEffect)(()=>{if(!t)return;let e=localStorage.getItem(N.STORAGE_KEY);if(e)try{let t=JSON.parse(e);n(t);let r=Date.now(),a=[];if(Array.isArray(t))for(let e of t){let t=(0,N.loadTasks)(e.id,r);a.push(...t)}let l=(0,tB.calculateTotalXP)(a);d((0,tB.getLevelInfo)(l))}catch{}let r=localStorage.getItem(`${N.TASKS_KEY_PREFIX}${t}`);if(r)try{let e=JSON.parse(r);Array.isArray(e)&&i(e.map(N.normalizeTask))}catch{}let l=localStorage.getItem(m);l&&v(l),a(!0)},[t,m]),(0,k.useEffect)(()=>{if(!r||0===l.length)return;let e=Date.now(),a=[];for(let r of l)r.id===t?a.push(...s):a.push(...(0,N.loadTasks)(r.id,e));let n=(0,tB.calculateTotalXP)(a);d((0,tB.getLevelInfo)(n)),b((0,tY.generateCoachAdvice)((0,N.buildStats)(s),s))},[s,l,r,t]),(0,k.useEffect)(()=>{let e=setInterval(()=>{L(Date.now())},1e3);return()=>clearInterval(e)},[]),(0,k.useEffect)(()=>{r&&t&&(localStorage.setItem(`${N.TASKS_KEY_PREFIX}${t}`,JSON.stringify(s)),B())},[s,r,t]),(0,k.useEffect)(()=>{if(!r||!t)return;localStorage.setItem(m,p),S("ä¿å­˜ã—ã¾ã—ãŸ");let e=setTimeout(()=>S(""),2e3);return()=>clearTimeout(e)},[p,r,t,m]);let B=()=>{z("ä¿å­˜ã—ã¾ã—ãŸ");let e=setTimeout(()=>z(""),2e3);return()=>clearTimeout(e)},U=(0,k.useCallback)(e=>{let t={id:crypto.randomUUID(),title:e,status:"todo",tag:null,priority:"p1",isToday:!1,estimatedMinutes:null,actualSeconds:0,isRunning:!1,startedAt:null};i(e=>[t,...e])},[]),F=(0,k.useCallback)((e,t)=>{i(r=>r.map(r=>{if(r.id!==e)return r;if("done"===t&&r.isRunning){let e=r.startedAt?Math.floor((Date.now()-r.startedAt)/1e3):0;return{...r,status:t,isRunning:!1,startedAt:null,actualSeconds:r.actualSeconds+e}}return{...r,status:t}}))},[]),K=(0,k.useCallback)((e,t)=>{i(r=>r.map(r=>r.id===e?{...r,tag:t||null}:r))},[]),Y=(0,k.useCallback)((e,t)=>{i(r=>r.map(r=>r.id===e?{...r,priority:t}:r))},[]),$=(0,k.useCallback)((e,t)=>{let r=parseInt(t,10);i(t=>t.map(t=>t.id===e?{...t,estimatedMinutes:isNaN(r)?null:r}:t))},[]),X=(0,k.useCallback)(e=>{i(t=>t.map(t=>t.id===e?{...t,isToday:!t.isToday}:t))},[]),J=(0,k.useCallback)(e=>{i(t=>t.map(t=>{if(t.id===e)return{...t,isRunning:!0,startedAt:Date.now()};if(t.isRunning&&t.startedAt){let e=Math.floor((Date.now()-t.startedAt)/1e3);return{...t,isRunning:!1,startedAt:null,actualSeconds:t.actualSeconds+e}}return t}))},[]),_=(0,k.useCallback)(e=>{i(t=>t.map(t=>{if(t.id!==e||!t.isRunning||!t.startedAt)return t;let r=Math.floor((Date.now()-t.startedAt)/1e3);return{...t,isRunning:!1,startedAt:null,actualSeconds:t.actualSeconds+r}}))},[]),W=(0,k.useCallback)(e=>{confirm("æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ")&&i(t=>t.filter(t=>t.id!==e))},[]),H=(0,k.useCallback)((e,t)=>{try{let r=e.map(N.normalizeTask);i(r),v(t)}catch(e){alert("å¾©å…ƒã«å¤±æ•—ã—ã¾ã—ãŸ")}},[]),V=(0,k.useMemo)(()=>{let e=new Set;return s.forEach(t=>{t.tag&&e.add(t.tag)}),(0,N.loadStoredTags)().forEach(t=>e.add(t)),Array.from(e).sort()},[s]);(0,k.useEffect)(()=>{if(!r)return;let e=new Set((0,N.loadStoredTags)()),t=!1;s.forEach(r=>{r.tag&&!e.has(r.tag)&&(e.add(r.tag),t=!0)}),t&&(0,N.saveStoredTags)(Array.from(e))},[s,r]),(0,k.useMemo)(()=>(0,N.buildStats)(s),[s]);let q=(0,k.useMemo)(()=>{let e={done:0,doing:0,todo:0,not_decided:0};return s.forEach(t=>{void 0!==e[t.status]&&e[t.status]++}),e},[s]),G=(0,k.useMemo)(()=>l.find(e=>e.id===t)||{id:t,title:"èª­è¾¼ä¸­...",description:"",createdAt:new Date().toISOString(),weekStart:new Date().toISOString(),weekEnd:new Date().toISOString()},[l,t]),Z=(0,k.useCallback)(()=>{i([]),v("")},[]);return r?(0,w.jsx)("main",{className:"min-h-screen bg-slate-50/50 pb-20",children:(0,w.jsxs)("div",{className:"mx-auto max-w-5xl px-4 py-8 md:px-8 space-y-8",children:[(0,w.jsx)(E,{id:t,loaded:r,savedMessage:P,totalCount:s.length,countsByStatus:q,levelInfo:o,advice:g}),(0,w.jsxs)("div",{className:"grid gap-8",children:[(0,w.jsxs)("div",{className:"space-y-6",children:[(0,w.jsx)(R,{onAdd:U}),(0,w.jsx)(tO,{tasks:s,now:I,tags:V,showTodayOnly:D,setShowTodayOnly:M,showCompleted:A,setShowCompleted:O,tagFilter:C,setTagFilter:T,actions:{onChangeStatus:F,onChangeTag:K,onChangePriority:Y,onChangeEstimated:$,onToggleToday:X,onStartTimer:J,onStopTimer:_,onDelete:W,onReorder:e=>i(e)}})]}),(0,w.jsx)(tI,{tasks:s,now:I}),(0,w.jsx)(tP,{weeklyNote:p,setWeeklyNote:v,noteSavedMessage:y,tasks:s,now:I}),(0,w.jsx)(tz,{id:G.id,report:G,tasks:s,now:I,weeklyNote:p,onRestore:H,onDeleteAllTasks:Z})]}),o&&x&&(0,w.jsx)(tK,{show:u,oldLevel:x.old,newLevel:x.new,rank:o.rank,onClose:()=>h(!1)})]})}):(0,w.jsx)("div",{className:"p-8 text-center text-slate-500",children:"Loading..."})}e.s(["default",()=>t$],94605)}]);